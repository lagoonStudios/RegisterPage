/*! For license information please see 368.808aff18.chunk.js.LICENSE.txt */
(self.webpackChunkregister_page=self.webpackChunkregister_page||[]).push([[368],{7530:function(t,e,n){"use strict";n.d(e,{ZP:function(){return c}});var r={_origin:"https://api.emailjs.com"},i=function(t,e,n){if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},a=n(3144),o=n(5671),u=(0,a.Z)((function t(e){(0,o.Z)(this,t),this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"})),s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,a){var o=new XMLHttpRequest;o.addEventListener("load",(function(t){var e=t.target,n=new u(e);200===n.status||"OK"===n.text?i(n):a(n)})),o.addEventListener("error",(function(t){var e=t.target;a(new u(e))})),o.open("POST",r._origin+t,!0),Object.keys(n).forEach((function(t){o.setRequestHeader(t,n[t])})),o.send(e)}))},c={init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";r._userID=t,r._origin=e},send:function(t,e,n,a){var o=a||r._userID;i(o,t,e);var u={lib_version:"3.10.0",user_id:o,service_id:t,template_id:e,template_params:n};return s("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})},sendForm:function(t,e,n,a){var o=a||r._userID,u=function(t){var e;if(!(e="string"===typeof t?document.querySelector(t):t)||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e}(n);i(o,t,e);var c=new FormData(u);return c.append("lib_version","3.10.0"),c.append("service_id",t),c.append("template_id",e),c.append("user_id",o),s("/api/v1.0/email/send-form",c)}}},5854:function(t,e,n){"use strict";n.d(e,{$s:function(){return C},BH:function(){return w},L:function(){return f},LL:function(){return _},P0:function(){return k},Sg:function(){return E},ZR:function(){return x},aH:function(){return b},eu:function(){return p},hl:function(){return d},m9:function(){return D},ru:function(){return v},vZ:function(){return I},zI:function(){return y}});var r=n(7326),i=n(136),a=n(7277),o=n(8664),u=n(5671),s=n(3144),c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var a=t[i],o=i+1<t.length,u=o?t[i+1]:0,s=i+2<t.length,c=s?t[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,v=63&c;s||(v=64,o||(h=64)),r.push(n[l],n[f],n[h],n[v])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{var u=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,u=++i<t.length?n[t.charAt(i)]:64,s=++i<t.length?n[t.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},f=function(t){return function(t){var e=c(t);return l.encodeByteArray(e,!0)}(t).replace(/\./g,"")},h=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function v(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function d(){return"object"===typeof indexedDB}function p(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(a){e(a)}}))}function y(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var g=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},m=function(){try{return g()||function(){if("undefined"!==typeof process){var t={NODE_ENV:"production",PUBLIC_URL:"/RegisterPage",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0}}()||function(){if("undefined"!==typeof document){var t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var e=t&&h(t[1]);return e&&JSON.parse(e)}}()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},k=function(t){var e=function(t){var e,n;return null===(n=null===(e=m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]}(t);if(e){var n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));var r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]}},b=function(){var t;return null===(t=m())||void 0===t?void 0:t.config},w=function(){function t(){var e=this;(0,u.Z)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return(0,s.Z)(t,[{key:"wrapCallback",value:function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}}}]),t}();function E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(a)),""].join(".")}var x=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(t,i,a){var o;return(0,u.Z)(this,n),(o=e.call(this,i)).code=t,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf((0,r.Z)(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,r.Z)(o),_.prototype.create),o}return(0,s.Z)(n)}((0,o.Z)(Error)),_=function(){function t(e,n,r){(0,u.Z)(this,t),this.service=e,this.serviceName=n,this.errors=r}return(0,s.Z)(t,[{key:"create",value:function(t){var e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),r=this.errors[t],i=r?T(r,e):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new x(n,a,e);return o}}]),t}();function T(t,e){return t.replace(S,(function(t,n){var r=e[n];return null!=r?String(r):"<".concat(n,"?>")}))}var S=/\{\$([^}]+)}/g;function I(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=t[o],s=e[o];if(Z(u)&&Z(s)){if(!I(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Z(t){return null!==t&&"object"===typeof t}var A=144e5;function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(A,r+i)}function D(t){return t&&t._delegate?t._delegate:t}},1694:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var a=typeof n;if("string"===a||"number"===a)t.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&t.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&t.push(u)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},2191:function(t,e,n){"use strict";n.d(e,{IH:function(){return Te}});var r,i=n(885),a=n(7762),o=n(5671),u=n(3144),s=n(4942),c=n(4165),l=n(5861),f=n(9474),h=n(6781),v=n(5854),d=n(3258),p=n(2982),y=n(9073),g="@firebase/installations",m="0.5.16",k=1e4,b="w:".concat(m),w="FIS_v2",E=36e5,x=(r={},(0,s.Z)(r,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,s.Z)(r,"not-registered","Firebase Installation is not registered."),(0,s.Z)(r,"installation-not-found","Firebase Installation not found."),(0,s.Z)(r,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,s.Z)(r,"app-offline","Could not process request. Application offline."),(0,s.Z)(r,"delete-pending-registration","Can't delete installation while there is a pending registration request."),r),_=new v.LL("installations","Installations",x);function T(t){return t instanceof v.ZR&&t.code.includes("request-failed")}function S(t){var e=t.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(e,"/installations")}function I(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Z(t,e){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:return r=t.sent,i=r.error,t.abrupt("return",_.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function D(t,e){var n=e.refreshToken,r=C(t);return r.append("Authorization",function(t){return"".concat(w," ").concat(t)}(n)),r}function O(t){return F.apply(this,arguments)}function F(){return(F=(0,l.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(!((n=t.sent).status>=500&&n.status<600)){t.next=5;break}return t.abrupt("return",e());case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e){return R.apply(this,arguments)}function R(){return(R=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u,s,l,f,h,v,d,p;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.appConfig,i=e.heartbeatServiceProvider,a=n.fid,o=S(r),u=C(r),!(s=i.getImmediate({optional:!0}))){t.next=10;break}return t.next=8,s.getHeartbeatsHeader();case 8:(l=t.sent)&&u.append("x-firebase-client",l);case 10:return f={fid:a,authVersion:w,appId:r.appId,sdkVersion:b},h={method:"POST",headers:u,body:JSON.stringify(f)},t.next=14,O((function(){return fetch(o,h)}));case 14:if(!(v=t.sent).ok){t.next=23;break}return t.next=18,v.json();case 18:return d=t.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:I(d.authToken)},t.abrupt("return",p);case 23:return t.next=25,Z("Create Installation",v);case 25:throw t.sent;case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return new Promise((function(e){setTimeout(e,t)}))}var L=/^[cdef][\w-]{21}$/;function M(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){var e=(n=t,btoa(String.fromCharCode.apply(String,(0,p.Z)(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return L.test(e)?e:""}catch(n){return""}}function P(t){return"".concat(t.appName,"!").concat(t.appId)}var V=new Map;function U(t,e){var n=P(t);B(n,e),function(t,e){var n=z();n&&n.postMessage({key:t,fid:e});K()}(n,e)}function B(t,e){var n=V.get(t);if(n){var r,i=(0,a.Z)(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(e)}}catch(o){i.e(o)}finally{i.f()}}}var q=null;function z(){return!q&&"BroadcastChannel"in self&&((q=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){B(t.data.key,t.data.fid)}),q}function K(){0===V.size&&q&&(q.close(),q=null)}var G="firebase-installations-store",H=null;function $(){return H||(H=(0,y.X3)("firebase-installations-database",1,{upgrade:function(t,e){if(0===e)t.createObjectStore(G)}})),H}function W(t,e){return Q.apply(this,arguments)}function Q(){return(Q=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P(e),t.next=3,$();case 3:return i=t.sent,a=i.transaction(G,"readwrite"),o=a.objectStore(G),t.next=8,o.get(r);case 8:return u=t.sent,t.next=11,o.put(n,r);case 11:return t.next=13,a.done;case 13:return u&&u.fid===n.fid||U(e,n.fid),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function X(t){return Y.apply(this,arguments)}function Y(){return(Y=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=P(e),t.next=3,$();case 3:return r=t.sent,i=r.transaction(G,"readwrite"),t.next=7,i.objectStore(G).delete(n);case 7:return t.next=9,i.done;case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t,e){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P(e),t.next=3,$();case 3:return i=t.sent,a=i.transaction(G,"readwrite"),o=a.objectStore(G),t.next=8,o.get(r);case 8:if(u=t.sent,void 0!==(s=n(u))){t.next=15;break}return t.next=13,o.delete(r);case 13:t.next=17;break;case 15:return t.next=17,o.put(s,r);case 17:return t.next=19,a.done;case 19:return!s||u&&u.fid===s.fid||U(e,s.fid),t.abrupt("return",s);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e.appConfig,(function(t){var r=rt(t),i=it(e,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=t.sent).fid){t.next=8;break}return t.next=6,n;case 6:return t.t0=t.sent,t.abrupt("return",{installationEntry:t.t0});case 8:return t.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(t){return ct(t||{fid:M(),registrationStatus:0})}function it(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(_.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return at.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ot(t)}:{installationEntry:e}}function at(){return(at=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N(e,n);case 3:return r=t.sent,t.abrupt("return",W(e.appConfig,r));case 7:if(t.prev=7,t.t0=t.catch(0),!T(t.t0)||409!==t.t0.customData.serverCode){t.next=14;break}return t.next=12,X(e.appConfig);case 12:t.next=16;break;case 14:return t.next=16,W(e.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function ot(t){return ut.apply(this,arguments)}function ut(){return(ut=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st(e.appConfig);case 2:n=t.sent;case 3:if(1!==n.registrationStatus){t.next=11;break}return t.next=6,j(100);case 6:return t.next=8,st(e.appConfig);case 8:n=t.sent,t.next=3;break;case 11:if(0!==n.registrationStatus){t.next=22;break}return t.next=14,et(e);case 14:if(r=t.sent,i=r.installationEntry,!(a=r.registrationPromise)){t.next=21;break}return t.abrupt("return",a);case 21:return t.abrupt("return",i);case 22:return t.abrupt("return",n);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){return J(t,(function(t){if(!t)throw _.create("installation-not-found");return ct(t)}))}function ct(t){return 1===(e=t).registrationStatus&&e.registrationTime+k<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function lt(t,e){return ft.apply(this,arguments)}function ft(){return(ft=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u,s,l,f,h,v,d;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.appConfig,i=e.heartbeatServiceProvider,a=ht(r,n),o=D(r,n),!(u=i.getImmediate({optional:!0}))){t.next=9;break}return t.next=7,u.getHeartbeatsHeader();case 7:(s=t.sent)&&o.append("x-firebase-client",s);case 9:return l={installation:{sdkVersion:b,appId:r.appId}},f={method:"POST",headers:o,body:JSON.stringify(l)},t.next=13,O((function(){return fetch(a,f)}));case 13:if(!(h=t.sent).ok){t.next=22;break}return t.next=17,h.json();case 17:return v=t.sent,d=I(v),t.abrupt("return",d);case 22:return t.next=24,Z("Generate Auth Token",h);case 24:throw t.sent;case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t,e){var n=e.fid;return"".concat(S(t),"/").concat(n,"/authTokens:generate")}function vt(t){return dt.apply(this,arguments)}function dt(){return dt=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a,o=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],t.next=3,J(e.appConfig,(function(t){if(!bt(t))throw _.create("not-registered");var i=t.authToken;if(!n&&wt(i))return t;if(1===i.requestStatus)return r=pt(e,n),t;if(!navigator.onLine)throw _.create("app-offline");var a=Et(t);return r=mt(e,a),a}));case 3:if(i=t.sent,!r){t.next=10;break}return t.next=7,r;case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=i.authToken;case 11:return a=t.t0,t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)}))),dt.apply(this,arguments)}function pt(t,e){return yt.apply(this,arguments)}function yt(){return(yt=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt(e.appConfig);case 2:r=t.sent;case 3:if(1!==r.authToken.requestStatus){t.next=11;break}return t.next=6,j(100);case 6:return t.next=8,gt(e.appConfig);case 8:r=t.sent,t.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){t.next=16;break}return t.abrupt("return",vt(e,n));case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(t){return J(t,(function(t){if(!bt(t))throw _.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+k<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t}))}function mt(t,e){return kt.apply(this,arguments)}function kt(){return(kt=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt(e,n);case 3:return r=t.sent,i=Object.assign(Object.assign({},n),{authToken:r}),t.next=7,W(e.appConfig,i);case 7:return t.abrupt("return",r);case 10:if(t.prev=10,t.t0=t.catch(0),!T(t.t0)||401!==t.t0.customData.serverCode&&404!==t.t0.customData.serverCode){t.next=17;break}return t.next=15,X(e.appConfig);case 15:t.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),t.next=20,W(e.appConfig,a);case 20:throw t.t0;case 21:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function bt(t){return void 0!==t&&2===t.registrationStatus}function wt(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+E}(t)}function Et(t){var e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function xt(){return(xt=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,et(n);case 3:return r=t.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):vt(n).catch(console.error),t.abrupt("return",i.fid);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(){return _t=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=e,t.next=4,Tt(r);case 4:return t.next=6,vt(r,n);case 6:return i=t.sent,t.abrupt("return",i.token);case 8:case"end":return t.stop()}}),t)}))),_t.apply(this,arguments)}function Tt(t){return St.apply(this,arguments)}function St(){return(St=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(e);case 2:if(n=t.sent,!(r=n.registrationPromise)){t.next=7;break}return t.next=7,r;case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function It(t){return _.create("missing-app-config-values",{valueName:t})}var Zt,At="installations",Ct=function(t){var e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw It("App Configuration");if(!t.name)throw It("App Name");for(var e=0,n=["projectId","apiKey","appId"];e<n.length;e++){var r=n[e];if(!t.options[r])throw It(r)}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:(0,f.qX)(e,"heartbeat"),_delete:function(){return Promise.resolve()}}},Dt=function(t){var e=t.getProvider("app").getImmediate(),n=(0,f.qX)(e,At).getImmediate(),r={getId:function(){return function(t){return xt.apply(this,arguments)}(n)},getToken:function(t){return function(t){return _t.apply(this,arguments)}(n,t)}};return r};(0,f.Xd)(new d.wA(At,Ct,"PUBLIC")),(0,f.Xd)(new d.wA("installations-internal",Dt,"PRIVATE")),(0,f.KN)(g,m),(0,f.KN)(g,m,"esm2017");var Ot="analytics",Ft="firebase_id",Nt="origin",Rt=6e4,jt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lt="https://www.googletagmanager.com/gtag/js",Mt=new h.Yd("@firebase/analytics");function Pt(t){return Promise.all(t.map((function(t){return t.catch((function(t){return t}))})))}function Vt(t,e){var n=document.createElement("script");n.src="".concat(Lt,"?l=").concat(t,"&id=").concat(e),n.async=!0,document.head.appendChild(n)}function Ut(t,e,n,r,i,a){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,i,a,o){var u,s,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=i[a],t.prev=1,!u){t.next=7;break}return t.next=5,n[u];case 5:t.next=14;break;case 7:return t.next=9,Pt(r);case 9:if(s=t.sent,!(l=s.find((function(t){return t.measurementId===a})))){t.next=14;break}return t.next=14,n[l.appId];case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),Mt.error(t.t0);case 19:e("config",a,o);case 20:case"end":return t.stop()}}),t,null,[[1,16]])}))),Bt.apply(this,arguments)}function qt(t,e,n,r,i){return zt.apply(this,arguments)}function zt(){return zt=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,i,o){var u,s,l,f,h,v;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,u=[],!o||!o.send_to){t.next=26;break}return s=o.send_to,Array.isArray(s)||(s=[s]),t.next=7,Pt(r);case 7:l=t.sent,f=(0,a.Z)(s),t.prev=9,v=function(){var t=h.value,e=l.find((function(e){return e.measurementId===t})),r=e&&n[e.appId];if(!r)return u=[],"break";u.push(r)},f.s();case 12:if((h=f.n()).done){t.next=18;break}if("break"!==v()){t.next=16;break}return t.abrupt("break",18);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),f.e(t.t0);case 23:return t.prev=23,f.f(),t.finish(23);case 26:return 0===u.length&&(u=Object.values(n)),t.next=29,Promise.all(u);case 29:e("event",i,o||{}),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(0),Mt.error(t.t1);case 35:case"end":return t.stop()}}),t,null,[[0,32],[9,20,23,26]])}))),zt.apply(this,arguments)}function Kt(t,e,n,r,i){var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(t,e,n,r){function i(){return(i=(0,l.Z)((0,c.Z)().mark((function i(a,o,u){return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,qt(t,e,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Ut(t,e,n,r,o,u);case 9:i.next=12;break;case 11:"consent"===a?t("consent","update",u):t("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Mt.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(t,e,n){return i.apply(this,arguments)}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[i]}}function Gt(t){for(var e=window.document.getElementsByTagName("script"),n=0,r=Object.values(e);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes(Lt)&&i.src.includes(t))return i}return null}var Ht=(Zt={},(0,s.Z)(Zt,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),(0,s.Z)(Zt,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),(0,s.Z)(Zt,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),(0,s.Z)(Zt,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),(0,s.Z)(Zt,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,s.Z)(Zt,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,s.Z)(Zt,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),(0,s.Z)(Zt,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),(0,s.Z)(Zt,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),(0,s.Z)(Zt,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),Zt),$t=new v.LL("analytics","Analytics",Ht),Wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,o.Z)(this,t),this.throttleMetadata=e,this.intervalMillis=n}return(0,u.Z)(t,[{key:"getThrottleMetadata",value:function(t){return this.throttleMetadata[t]}},{key:"setThrottleMetadata",value:function(t,e){this.throttleMetadata[t]=e}},{key:"deleteThrottleMetadata",value:function(t){delete this.throttleMetadata[t]}}]),t}(),Qt=new Wt;function Xt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Yt(t){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a,o,u,s,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.appId,i=e.apiKey,a={method:"GET",headers:Xt(i)},o=jt.replace("{app-id}",r),t.next=5,fetch(o,a);case 5:if(200===(u=t.sent).status||304===u.status){t.next=18;break}return s="",t.prev=8,t.next=11,u.json();case 11:l=t.sent,(null===(n=l.error)||void 0===n?void 0:n.message)&&(s=l.error.message),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(8);case 17:throw $t.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return t.abrupt("return",u.json());case 19:case"end":return t.stop()}}),t,null,[[8,15]])})))).apply(this,arguments)}function te(t){return ee.apply(this,arguments)}function ee(){return ee=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a,o,u,s,f,h=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:Qt,r=h.length>2?h[2]:void 0,i=e.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){t.next=5;break}throw $t.create("no-app-id");case 5:if(o){t.next=9;break}if(!u){t.next=8;break}return t.abrupt("return",{measurementId:u,appId:a});case 8:throw $t.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new se,setTimeout((0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.abort();case 1:case"end":return t.stop()}}),t)}))),void 0!==r?r:Rt),t.abrupt("return",ne({appId:a,apiKey:o,measurementId:u},s,f,n));case 13:case"end":return t.stop()}}),t)}))),ee.apply(this,arguments)}function ne(t,e,n){return re.apply(this,arguments)}function re(){return re=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a,o,u,s,l,f,h,d,p,y,g=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=g.length>3&&void 0!==g[3]?g[3]:Qt,l=e.appId,f=e.measurementId,t.prev=3,t.next=6,ie(r,i);case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(3),!f){t.next=13;break}return Mt.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(f)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===(u=t.t0)||void 0===u?void 0:u.message,"]")),t.abrupt("return",{appId:l,measurementId:f});case 13:throw t.t0;case 14:return t.prev=14,t.next=17,Yt(e);case 17:return h=t.sent,o.deleteThrottleMetadata(l),t.abrupt("return",h);case 22:if(t.prev=22,t.t1=t.catch(14),ae(d=t.t1)){t.next=33;break}if(o.deleteThrottleMetadata(l),!f){t.next=32;break}return Mt.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(f)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===d||void 0===d?void 0:d.message,"]")),t.abrupt("return",{appId:l,measurementId:f});case 32:throw t.t1;case 33:return p=503===Number(null===(s=null===d||void 0===d?void 0:d.customData)||void 0===s?void 0:s.httpStatus)?(0,v.$s)(a,o.intervalMillis,30):(0,v.$s)(a,o.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:a+1},o.setThrottleMetadata(l,y),Mt.debug("Calling attemptFetch again in ".concat(p," millis")),t.abrupt("return",ne(e,y,r,o));case 38:case"end":return t.stop()}}),t,null,[[3,8],[14,22]])}))),re.apply(this,arguments)}function ie(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),a=setTimeout(n,i);t.addEventListener((function(){clearTimeout(a),r($t.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function ae(t){if(!(t instanceof v.ZR)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}var oe,ue,se=function(){function t(){(0,o.Z)(this,t),this.listeners=[]}return(0,u.Z)(t,[{key:"addEventListener",value:function(t){this.listeners.push(t)}},{key:"abort",value:function(){this.listeners.forEach((function(t){return t()}))}}]),t}();function ce(){return(ce=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,i,a){var o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!a.global){t.next=5;break}return e("event",r,i),t.abrupt("return");case 5:return t.next=7,n;case 7:o=t.sent,u=Object.assign(Object.assign({},i),{send_to:o}),e("event",r,u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function le(t){ue=t}function fe(t){oe=t}function he(){return ve.apply(this,arguments)}function ve(){return(ve=(0,l.Z)((0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,v.hl)()){t.next=5;break}return Mt.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),t.abrupt("return",!1);case 5:return t.prev=5,t.next=8,(0,v.eu)();case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),Mt.warn($t.create("indexeddb-unavailable",{errorInfo:null===(e=t.t0)||void 0===e?void 0:e.toString()}).message),t.abrupt("return",!1);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,null,[[5,10]])})))).apply(this,arguments)}function de(){return de=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,a,o,u,s){var l,f,h,v,d,p,y,g;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(f=te(e)).then((function(t){r[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Mt.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Mt.error(t)})),n.push(f),h=he().then((function(t){return t?a.getId():void 0})),t.next=6,Promise.all([f,h]);case 6:return v=t.sent,d=(0,i.Z)(v,2),p=d[0],y=d[1],Gt(u)||Vt(u,p.measurementId),ue&&(o("consent","default",ue),le(void 0)),o("js",new Date),(g=null!==(l=null===s||void 0===s?void 0:s.config)&&void 0!==l?l:{})[Nt]="firebase",g.update=!0,null!=y&&(g[Ft]=y),o("config",p.measurementId,g),oe&&(o("set",oe),fe(void 0)),t.abrupt("return",p.measurementId);case 20:case"end":return t.stop()}}),t)}))),de.apply(this,arguments)}var pe,ye,ge=function(){function t(e){(0,o.Z)(this,t),this.app=e}return(0,u.Z)(t,[{key:"_delete",value:function(){return delete me[this.app.options.appId],Promise.resolve()}}]),t}(),me={},ke=[],be={},we="dataLayer",Ee="gtag",xe=!1;function _e(t,e,n){!function(){var t=[];if((0,v.ru)()&&t.push("This is a browser extension environment."),(0,v.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"(".concat(e+1,") ").concat(t)})).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:e});Mt.warn(n.message)}}();var r=t.options.appId;if(!r)throw $t.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $t.create("no-api-key");Mt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=me[r])throw $t.create("already-exists",{id:r});if(!xe){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(we);var i=Kt(me,ke,be,we,Ee),a=i.wrappedGtag,o=i.gtagCore;ye=a,pe=o,xe=!0}return me[r]=function(t,e,n,r,i,a,o){return de.apply(this,arguments)}(t,ke,be,e,pe,we,n),new ge(t)}function Te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,f.Mq)();t=(0,v.m9)(t);var e=(0,f.qX)(t,Ot);return e.isInitialized()?e.getImmediate():Se(t)}function Se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,f.qX)(t,Ot);if(n.isInitialized()){var r=n.getImmediate();if((0,v.vZ)(e,n.getOptions()))return r;throw $t.create("already-initialized")}var i=n.initialize({options:e});return i}function Ie(t,e,n,r){t=(0,v.m9)(t),function(t,e,n,r,i){return ce.apply(this,arguments)}(ye,me[t.app.options.appId],e,n,r).catch((function(t){return Mt.error(t)}))}var Ze="@firebase/analytics",Ae="0.8.4";(0,f.Xd)(new d.wA(Ot,(function(t,e){var n=e.options;return _e(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),(0,f.Xd)(new d.wA("analytics-internal",(function(t){try{var e=t.getProvider(Ot).getImmediate();return{logEvent:function(t,n,r){return Ie(e,t,n,r)}}}catch(n){throw $t.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),(0,f.KN)(Ze,Ae),(0,f.KN)(Ze,Ae,"esm2017")},2426:function(t,e,n){"use strict";n.d(e,{ZF:function(){return r.ZF}});var r=n(9474);(0,r.KN)("firebase","9.14.0","app")},9062:function(t,e,n){"use strict";n.d(e,{ET:function(){return Of},hJ:function(){return Tl},ad:function(){return Bl},cf:function(){return Ff},IO:function(){return mf},ar:function(){return bf}});var r,i=n(5647),a=n(1752),o=n(1120),u=n(885),s=n(7762),c=n(4165),l=n(5861),f=n(136),h=n(7277),v=n(2982),d=n(5671),p=n(3144),y=n(9474),g=n(3258),m=n(6781),k=n(5854),b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},w={},E=E||{},x=b||self;function _(){}function T(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function S(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var I="closure_uid_"+(1e9*Math.random()>>>0),Z=0;function A(t,e,n){return t.call.apply(t.bind,arguments)}function C(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function D(t,e,n){return(D=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:C).apply(null,arguments)}function O(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function F(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return e.prototype[n].apply(t,i)}}function N(){this.s=this.s,this.o=this.o}N.prototype.s=!1,N.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,I)&&t[I]||(t[I]=++Z))},N.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var R=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function j(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function L(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(T(r)){var i=t.length||0,a=r.length||0;t.length=i+a;for(var o=0;o<a;o++)t[i+o]=r[o]}else t.push(r)}}function M(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{x.addEventListener("test",_,e),x.removeEventListener("test",_,e)}catch(n){}return t}();function V(t){return/^[\s\xa0]*$/.test(t)}var U=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function B(t,e){return t<e?-1:t>e?1:0}function q(){var t=x.navigator;return t&&(t=t.userAgent)?t:""}function z(t){return-1!=q().indexOf(t)}function K(t){return K[" "](t),t}K[" "]=_;var G,H=z("Opera"),$=z("Trident")||z("MSIE"),W=z("Edge"),Q=W||$,X=z("Gecko")&&!(-1!=q().toLowerCase().indexOf("webkit")&&!z("Edge"))&&!(z("Trident")||z("MSIE"))&&!z("Edge"),Y=-1!=q().toLowerCase().indexOf("webkit")&&!z("Edge");function J(){var t=x.document;return t?t.documentMode:void 0}t:{var tt="",et=function(){var t=q();return X?/rv:([^\);]+)(\)|;)/.exec(t):W?/Edge\/([\d\.]+)/.exec(t):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Y?/WebKit\/(\S+)/.exec(t):H?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(et&&(tt=et?et[1]:""),$){var nt=J();if(null!=nt&&nt>parseFloat(tt)){G=String(nt);break t}}G=tt}var rt,it={};function at(){return function(t){var e=it;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=U(String(G)).split("."),n=U("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var a=e[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;t=B(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||B(0==a[2].length,0==o[2].length)||B(a[2],o[2]),a=a[3],o=o[3]}while(0==t)}return 0<=t}))}if(x.document&&$){var ot=J();rt=ot||(parseInt(G,10)||void 0)}else rt=void 0;var ut=rt;function st(t,e){if(M.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(X){t:{try{K(e.nodeName);var i=!0;break t}catch(a){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&st.X.h.call(this)}}F(st,M);var ct={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),ft=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++ft,this.ba=this.ea=!1}function vt(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function dt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function pt(t){var e={};for(var n in t)e[n]=t[n];return e}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var a=0;a<yt.length;a++)n=yt[a],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t){this.src=t,this.g={},this.h=0}function kt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],a=R(i,e);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(vt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function bt(t,e,n,r){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==e&&a.capture==!!n&&a.ha==r)return i}return-1}mt.prototype.add=function(t,e,n,r,i){var a=t.toString();(t=this.g[a])||(t=this.g[a]=[],this.h++);var o=bt(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new ht(e,this.src,a,!!r,i)).ea=n,t.push(e)),e};var wt="closure_lm_"+(1e6*Math.random()|0),Et={};function xt(t,e,n,r,i){if(r&&r.once)return Tt(t,e,n,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)xt(t,e[a],n,r,i);return null}return n=Ot(n),t&&t[lt]?t.N(e,n,S(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,a){if(!e)throw Error("Invalid event type");var o=S(i)?!!i.capture:!!i,u=Ct(t);if(u||(t[wt]=u=new mt(t)),(n=u.add(e,n,r,o,a)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=At;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)P||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Zt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Tt(t,e,n,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Tt(t,e[a],n,r,i);return null}return n=Ot(n),t&&t[lt]?t.O(e,n,S(r)?!!r.capture:!!r,i):_t(t,e,n,!0,r,i)}function St(t,e,n,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)St(t,e[a],n,r,i);else r=S(r)?!!r.capture:!!r,n=Ot(n),t&&t[lt]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=bt(a=t.g[e],n,r,i))&&(vt(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete t.g[e],t.h--)))):t&&(t=Ct(t))&&(e=t.g[e.toString()],t=-1,e&&(t=bt(e,n,r,i)),(n=-1<t?e[t]:null)&&It(n))}function It(t){if("number"!==typeof t&&t&&!t.ba){var e=t.src;if(e&&e[lt])kt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Zt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ct(e))?(kt(n,t),0==n.h&&(n.src=null,e[wt]=null)):vt(t)}}}function Zt(t){return t in Et?Et[t]:Et[t]="on"+t}function At(t,e){if(t.ba)t=!0;else{e=new st(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&It(t),t=n.call(r,e)}return t}function Ct(t){return(t=t[wt])instanceof mt?t:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"===typeof t?t:(t[Dt]||(t[Dt]=function(e){return t.handleEvent(e)}),t[Dt])}function Ft(){N.call(this),this.i=new mt(this),this.P=this,this.I=null}function Nt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new M(e,t);else if(e instanceof M)e.target=e.target||t;else{var i=e;gt(e=new M(r,t),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=e.g=n[a];i=Rt(o,r,!0,e)&&i}if(i=Rt(o=e.g=t,r,!0,e)&&i,i=Rt(o,r,!1,e)&&i,n)for(a=0;a<n.length;a++)i=Rt(o=e.g=n[a],r,!1,e)&&i}function Rt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var o=e[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&kt(t.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}F(Ft,N),Ft.prototype[lt]=!0,Ft.prototype.removeEventListener=function(t,e,n,r){St(this,t,e,n,r)},Ft.prototype.M=function(){if(Ft.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)vt(n[r]);delete e.g[t],e.h--}}this.I=null},Ft.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ft.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var jt=x.JSON.stringify;function Lt(){var t=Kt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Mt,Pt=function(){function t(){(0,d.Z)(this,t),this.h=this.g=null}return(0,p.Z)(t,[{key:"add",value:function(t,e){var n=Vt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),Vt=new(function(){function t(e,n){(0,d.Z)(this,t),this.i=e,this.j=n,this.h=0,this.g=null}return(0,p.Z)(t,[{key:"get",value:function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}]),t}())((function(){return new Ut}),(function(t){return t.reset()})),Ut=function(){function t(){(0,d.Z)(this,t),this.next=this.g=this.h=null}return(0,p.Z)(t,[{key:"set",value:function(t,e){this.h=t,this.g=e,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function Bt(t){x.setTimeout((function(){throw t}),0)}function qt(t,e){Mt||function(){var t=x.Promise.resolve(void 0);Mt=function(){t.then(Gt)}}(),zt||(Mt(),zt=!0),Kt.add(t,e)}var zt=!1,Kt=new Pt;function Gt(){for(var t;t=Lt();){try{t.h.call(t.g)}catch(n){Bt(n)}var e=Vt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zt=!1}function Ht(t,e){Ft.call(this),this.h=t||1,this.g=e||x,this.j=D(this.lb,this),this.l=Date.now()}function $t(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function Wt(t,e,n){if("function"===typeof t)n&&(t=D(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=D(t.handleEvent,t)}return 2147483647<Number(e)?-1:x.setTimeout(t,e||0)}function Qt(t){t.g=Wt((function(){t.g=null,t.i&&(t.i=!1,Qt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}F(Ht,Ft),(r=Ht.prototype).ca=!1,r.R=null,r.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nt(this,"tick"),this.ca&&($t(this),this.start()))}},r.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Ht.X.M.call(this),$t(this),delete this.g};var Xt=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this)).m=t,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,p.Z)(n,[{key:"l",value:function(t){this.h=arguments,this.g?this.i=!0:Qt(this)}},{key:"M",value:function(){(0,a.Z)((0,o.Z)(n.prototype),"M",this).call(this),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(N);function Yt(t){N.call(this),this.h=t,this.g={}}F(Yt,N);var Jt=[];function te(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var a=xt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function ee(t){dt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&It(t)}),t),t.g={}}function ne(){this.g=!0}function re(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return jt(n)}catch(u){return e}}(t,n)+(r?" "+r:"")}))}Yt.prototype.M=function(){Yt.X.M.call(this),ee(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ne.prototype.Aa=function(){this.g=!1},ne.prototype.info=function(){};var ie={},ae=null;function oe(){return ae=ae||new Ft}function ue(t){M.call(this,ie.Pa,t)}function se(t){var e=oe();Nt(e,new ue(e))}function ce(t,e){M.call(this,ie.STAT_EVENT,t),this.stat=e}function le(t){var e=oe();Nt(e,new ce(e,t))}function fe(t,e){M.call(this,ie.Qa,t),this.size=e}function he(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return x.setTimeout((function(){t()}),e)}ie.Pa="serverreachability",F(ue,M),ie.STAT_EVENT="statevent",F(ce,M),ie.Qa="timingevent",F(fe,M);var ve={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},de={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function pe(){}function ye(t){return t.h||(t.h=t.i())}function ge(){}pe.prototype.h=null;var me,ke={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function be(){M.call(this,"d")}function we(){M.call(this,"c")}function Ee(){}function xe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Yt(this),this.O=Te,t=Q?125:void 0,this.T=new Ht(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}F(be,M),F(we,M),F(Ee,pe),Ee.prototype.g=function(){return new XMLHttpRequest},Ee.prototype.i=function(){return{}},me=new Ee;var Te=45e3,Se={},Ie={};function Ze(t,e,n){t.K=1,t.v=He(Be(e)),t.s=n,t.P=!0,Ae(t,null)}function Ae(t,e){t.F=Date.now(),Fe(t),t.A=Be(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),un(n.i,"t",r),t.C=0,n=t.l.H,t.h=new _e,t.g=sr(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Xt(D(t.La,t,t.g),t.N)),te(t.S,t.g,"readystatechange",t.ib),e=t.H?pt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),se(),function(t,e,n,r,i,a){t.info((function(){if(t.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function Ce(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Da)}function De(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Oe(t,n))==Ie){4==e&&(t.o=4,le(14),i=!1),re(t.j,t.m,null,"[Incomplete Response]");break}if(r==Se){t.o=4,le(15),re(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}re(t.j,t.m,r,null),Me(t,r)}Ce(t)&&r!=Ie&&r!=Se&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,le(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),tr(e),e.K=!0,le(11))):(re(t.j,t.m,n,"[Invalid Chunked Response]"),Le(t),je(t))}function Oe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ie:(n=Number(e.substring(n,r)),isNaN(n)?Se:(r+=1)+n>e.length?Ie:(e=e.substr(r,n),t.C=r+n,e))}function Fe(t){t.V=Date.now()+t.O,Ne(t,t.O)}function Ne(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=he(D(t.gb,t),e)}function Re(t){t.B&&(x.clearTimeout(t.B),t.B=null)}function je(t){0==t.l.G||t.I||rr(t.l,t)}function Le(t){Re(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,$t(t.T),ee(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Me(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||pn(n.h,t)))if(!t.J&&pn(n.h,t)&&3==n.G){try{var r=n.Fa.g.parse(e)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;nr(n),Gn(n)}Jn(n),le(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=he(D(n.cb,n),6e3));if(1>=dn(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else ar(n,11)}else if((t.J||n.g==t)&&nr(n),!V(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){var a=i[e];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(yn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Ge(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var v=t;if((r=n).sa=ur(r,r.H?r.ka:null,r.V),v.J){gn(r.h,v);var d=v,p=r.J;p&&d.setTimeout(p),d.B&&(Re(d),Fe(d)),r.g=v}else Yn(r);0<n.i.length&&$n(n)}else"stop"!=a[0]&&"close"!=a[0]||ar(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ar(n,7):Kn(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}se()}catch(a){}}function Pe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(T(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(T(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}}(t),r=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(T(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}(r=xe.prototype).setTimeout=function(t){this.O=t},r.ib=function(t){t=t.target;var e=this.L;e&&3==Pn(t)?e.l():this.La(t)},r.La=function(t){try{if(t==this.g)t:{var e=Pn(this.g),n=this.g.Ea();this.g.aa();if(!(3>e)&&(3!=e||Q||this.g&&(this.h.h||this.g.fa()||Vn(this.g)))){this.I||4!=e||7==n||se(),Re(this);var r=this.g.aa();this.Y=r;e:if(Ce(this)){var i=Vn(this.g);t="";var a=i.length,o=4==Pn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Le(this),je(this);var u="";break e}this.h.i=new x.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(t,e,n,r,i,a,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,e,r),this.i){if(this.Z&&!this.J){e:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(s)){var l=s;break e}}l=null}if(!(r=l)){this.i=!1,this.o=3,le(12),Le(this),je(this);break t}re(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Me(this,r)}this.P?(De(this,e,u),Q&&this.i&&3==e&&(te(this.S,this.T,"tick",this.hb),this.T.start())):(re(this.j,this.m,u,null),Me(this,u)),4==e&&Le(this),this.i&&!this.I&&(4==e?rr(this.l,this):(this.i=!1,Fe(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,le(12)):(this.o=0,le(13)),Le(this),je(this)}}}catch(e){}},r.hb=function(){if(this.g){var t=Pn(this.g),e=this.g.fa();this.C<e.length&&(Re(this),De(this,t,e),this.i&&4!=t&&Fe(this))}},r.cancel=function(){this.I=!0,Le(this)},r.gb=function(){this.B=null;var t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(se(),le(17)),Le(this),this.o=2,je(this)):Ne(this,this.V-t)};var Ve=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ue){this.h=void 0!==e?e:t.h,qe(this,t.j),this.s=t.s,this.g=t.g,ze(this,t.m),this.l=t.l,e=t.i;var n=new nn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ke(this,n),this.o=t.o}else t&&(n=String(t).match(Ve))?(this.h=!!e,qe(this,n[1]||"",!0),this.s=$e(n[2]||""),this.g=$e(n[3]||"",!0),ze(this,n[4]),this.l=$e(n[5]||"",!0),Ke(this,n[6]||"",!0),this.o=$e(n[7]||"")):(this.h=!!e,this.i=new nn(null,this.h))}function Be(t){return new Ue(t)}function qe(t,e,n){t.j=n?$e(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ze(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ke(t,e,n){e instanceof nn?(t.i=e,function(t,e){e&&!t.j&&(rn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(an(this,e),un(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=We(e,tn)),t.i=new nn(e,t.h))}function Ge(t,e,n){t.i.set(e,n)}function He(t){return Ge(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ue.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Xe,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Xe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Je:Ye,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,en)),t.join("")};var Xe=/[#\/\?@]/g,Ye=/[#\?:]/g,Je=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function rn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function an(t,e){rn(t),e=sn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function on(t,e){return rn(t),e=sn(t,e),t.g.has(e)}function un(t,e,n){an(t,e),0<n.length&&(t.i=null,t.g.set(sn(t,e),j(n)),t.h+=n.length)}function sn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(r=nn.prototype).add=function(t,e){rn(this),this.i=null,t=sn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},r.forEach=function(t,e){rn(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},r.oa=function(){rn(this);for(var t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[],r=0;r<e.length;r++)for(var i=t[r],a=0;a<i.length;a++)n.push(e[r]);return n},r.W=function(t){rn(this);var e=[];if("string"===typeof t)on(this,t)&&(e=e.concat(this.g.get(sn(this,t))));else{t=Array.from(this.g.values());for(var n=0;n<t.length;n++)e=e.concat(t[n])}return e},r.set=function(t,e){return rn(this),this.i=null,on(this,t=sn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},r.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=Array.from(this.g.keys()),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),t.push(o)}}return this.i=t.join("&")};var cn=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.h=e,this.g=n}));function ln(t){this.l=t||hn,x.PerformanceNavigationTiming?t=0<(t=x.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(x.g&&x.g.Ga&&x.g.Ga()&&x.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fn,hn=10;function vn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function dn(t){return t.h?1:t.g?t.g.size:0}function pn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function yn(t,e){t.g?t.g.add(e):t.h=e}function gn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function mn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var e,n=t.i,r=(0,s.Z)(t.g.values());try{for(r.s();!(e=r.n()).done;){var i=e.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return j(t.i)}function kn(){}function bn(){this.g=new kn}function wn(t,e,n){var r=n||"";try{Pe(t,(function(t,n){var i=t;S(t)&&(i=jt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function En(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function xn(t){this.l=t.ac||null,this.j=t.jb||!1}function _n(t,e){Ft.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Tn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ln.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var t,e=(0,s.Z)(this.g.values());try{for(e.s();!(t=e.n()).done;){t.value.cancel()}}catch(n){e.e(n)}finally{e.f()}this.g.clear()}},kn.prototype.stringify=function(t){return x.JSON.stringify(t,void 0)},kn.prototype.parse=function(t){return x.JSON.parse(t,void 0)},F(xn,pe),xn.prototype.g=function(){return new _n(this.l,this.j)},xn.prototype.i=(fn={},function(){return fn}),F(_n,Ft);var Tn=0;function Sn(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function In(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zn(t)}function Zn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(r=_n.prototype).open=function(t,e){if(this.readyState!=Tn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zn(this)},r.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||x).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,In(this)),this.readyState=Tn},r.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof x.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sn(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},r.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?In(this):Zn(this),3==this.readyState&&Sn(this)}},r.Va=function(t){this.g&&(this.response=this.responseText=t,In(this))},r.Ua=function(t){this.g&&(this.response=t,In(this))},r.ga=function(){this.g&&In(this)},r.setRequestHeader=function(t,e){this.v.append(t,e)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var An=x.JSON.parse;function Cn(t){Ft.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Dn,this.K=this.L=!1}F(Cn,Ft);var Dn="",On=/^https?$/i,Fn=["POST","PUT"];function Nn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Rn(t),Ln(t)}function Rn(t){t.D||(t.D=!0,Nt(t,"complete"),Nt(t,"error"))}function jn(t){if(t.h&&"undefined"!=typeof E&&(!t.C[1]||4!=Pn(t)||2!=t.aa()))if(t.v&&4==Pn(t))Wt(t.Ha,0,t);else if(Nt(t,"readystatechange"),4==Pn(t)){t.h=!1;try{var e,n=t.aa();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.H).match(Ve)[1]||null;if(!a&&x.self&&x.self.location){var o=x.self.location.protocol;a=o.substr(0,o.length-1)}i=!On.test(a?a.toLowerCase():"")}e=i}if(e)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var u=2<Pn(t)?t.g.statusText:""}catch(s){u=""}t.j=u+" ["+t.aa()+"]",Rn(t)}}finally{Ln(t)}}}function Ln(t,e){if(t.g){Mn(t);var n=t.g,r=t.C[0]?_:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(x.clearTimeout(t.A),t.A=null)}function Pn(t){return t.g?t.g.readyState:0}function Vn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Dn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(_r){return null}}function Un(t){var e="";return dt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Bn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Un(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ge(t,e,n))}function qn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zn(t){this.Ca=0,this.i=[],this.j=new ne,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qn("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qn("baseRetryDelayMs",5e3,t),this.bb=qn("retryDelaySeedMs",1e4,t),this.$a=qn("forwardChannelMaxRetries",2,t),this.ta=qn("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new ln(t&&t.concurrentRequestLimit),this.Fa=new bn,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Kn(t){if(Hn(t),3==t.G){var e=t.U++,n=Be(t.F);Ge(n,"SID",t.I),Ge(n,"RID",e),Ge(n,"TYPE","terminate"),Qn(t,n),(e=new xe(t,t.j,e,void 0)).K=2,e.v=He(Be(n)),n=!1,x.navigator&&x.navigator.sendBeacon&&(n=x.navigator.sendBeacon(e.v.toString(),"")),!n&&x.Image&&((new Image).src=e.v,n=!0),n||(e.g=sr(e.l,null),e.g.da(e.v)),e.F=Date.now(),Fe(e)}or(t)}function Gn(t){t.g&&(tr(t),t.g.cancel(),t.g=null)}function Hn(t){Gn(t),t.u&&(x.clearTimeout(t.u),t.u=null),nr(t),t.h.cancel(),t.m&&("number"===typeof t.m&&x.clearTimeout(t.m),t.m=null)}function $n(t){vn(t.h)||t.m||(t.m=!0,qt(t.Ja,t),t.C=0)}function Wn(t,e){var n;n=e?e.m:t.U++;var r=Be(t.F);Ge(r,"SID",t.I),Ge(r,"RID",n),Ge(r,"AID",t.T),Qn(t,r),t.o&&t.s&&Bn(r,t.o,t.s),n=new xe(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Xn(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),yn(t.h,n),Ze(n,r,e)}function Qn(t,e){t.ia&&dt(t.ia,(function(t,n){Ge(e,n,t)})),t.l&&Pe({},(function(t,n){Ge(e,n,t)}))}function Xn(t,e,n){n=Math.min(t.i.length,n);var r=t.l?D(t.l.Ra,t.l,t):null;t:for(var i=t.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{wn(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break t}}return t=t.i.splice(0,n),e.D=t,r}function Yn(t){t.g||t.u||(t.Z=1,qt(t.Ia,t),t.A=0)}function Jn(t){return!(t.g||t.u||3<=t.A)&&(t.Z++,t.u=he(D(t.Ia,t),ir(t,t.A)),t.A++,!0)}function tr(t){null!=t.B&&(x.clearTimeout(t.B),t.B=null)}function er(t){t.g=new xe(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=Be(t.sa);Ge(e,"RID","rpc"),Ge(e,"SID",t.I),Ge(e,"CI",t.L?"0":"1"),Ge(e,"AID",t.T),Ge(e,"TYPE","xmlhttp"),Qn(t,e),t.o&&t.s&&Bn(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=He(Be(e)),n.s=null,n.P=!0,Ae(n,t)}function nr(t){null!=t.v&&(x.clearTimeout(t.v),t.v=null)}function rr(t,e){var n=null;if(t.g==e){nr(t),tr(t),t.g=null;var r=2}else{if(!pn(t.h,e))return;n=e.D,gn(t.h,e),r=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Nt(r=oe(),new fe(r,n)),$n(t)}else Yn(t);else if(3==(i=e.o)||0==i&&0<t.pa||!(1==r&&function(t,e){return!(dn(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.C>=(t.Za?0:t.$a))&&(t.m=he(D(t.Ja,t,e),ir(t,t.C)),t.C++,!0))}(t,e)||2==r&&Jn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:ar(t,5);break;case 4:ar(t,10);break;case 3:ar(t,6);break;default:ar(t,2)}}function ir(t,e){var n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function ar(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=D(t.kb,t);n||(n=new Ue("//www.google.com/images/cleardot.gif"),x.location&&"http"==x.location.protocol||qe(n,"https"),He(n)),function(t,e){var n=new ne;if(x.Image){var r=new Image;r.onload=O(En,n,r,"TestLoadImage: loaded",!0,e),r.onerror=O(En,n,r,"TestLoadImage: error",!1,e),r.onabort=O(En,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=O(En,n,r,"TestLoadImage: timeout",!1,e),x.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else le(2);t.G=0,t.l&&t.l.va(e),or(t),Hn(t)}function or(t){if(t.G=0,t.la=[],t.l){var e=mn(t.h);0==e.length&&0==t.i.length||(L(t.la,e),L(t.la,t.i),t.h.i.length=0,j(t.i),t.i.length=0),t.l.ua()}}function ur(t,e,n){var r=n instanceof Ue?Be(n):new Ue(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ze(r,r.m);else{var i=x.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Ue(null,void 0);r&&qe(a,r),e&&(a.g=e),i&&ze(a,i),n&&(a.l=n),r=a}return n=t.D,e=t.za,n&&e&&Ge(r,n,e),Ge(r,"VER",t.ma),Qn(t,r),r}function sr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Da&&!t.ra?new Cn(new xn({jb:!0})):new Cn(t.ra)).Ka(t.H),e}function cr(){}function lr(){if($&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function fr(t,e){Ft.call(this),this.g=new zn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!V(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!V(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new dr(this)}function hr(t){be.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vr(){we.call(this),this.status=1}function dr(t){this.g=t}(r=Cn.prototype).Ka=function(t){this.L=t},r.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():me.g(),this.C=this.u?ye(this.u):ye(me),this.g.onreadystatechange=D(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(c){return void Nn(this,c)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=(0,s.Z)(r.keys());try{for(o.s();!(a=o.n()).done;){var c=a.value;n.set(c,r.get(c))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(t){return"content-type"==t.toLowerCase()})),i=x.FormData&&t instanceof x.FormData,!(0<=R(Fn,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,f=(0,s.Z)(n);try{for(f.s();!(l=f.n()).done;){var h=(0,u.Z)(l.value,2),v=h[0],d=h[1];this.g.setRequestHeader(v,d)}}catch(p){f.e(p)}finally{f.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mn(this),0<this.B&&((this.K=function(t){return $&&at()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=D(this.qa,this)):this.A=Wt(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(c){Nn(this,c)}},r.qa=function(){"undefined"!=typeof E&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))},r.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),Ln(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ln(this,!0)),Cn.X.M.call(this)},r.Ha=function(){this.s||(this.F||this.v||this.l?jn(this):this.fb())},r.fb=function(){jn(this)},r.aa=function(){try{return 2<Pn(this)?this.g.status:-1}catch(fn){return-1}},r.fa=function(){try{return this.g?this.g.responseText:""}catch(fn){return""}},r.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),An(e)}},r.Ea=function(){return this.m},r.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=zn.prototype).ma=8,r.G=1,r.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;var e=new xe(this,this.j,t,void 0),n=this.s;if(this.S&&(n?gt(n=pt(n),this.S):n=this.S),null!==this.o||this.N||(e.H=n,n=null),this.O)t:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break t}if(4096===r||i===this.i.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Xn(this,e,r),Ge(i=Be(this.F),"RID",t),Ge(i,"CVER",22),this.D&&Ge(i,"X-HTTP-Session-Id",this.D),Qn(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Un(n)))+"&"+r:this.o&&Bn(i,this.o,n)),yn(this.h,e),this.Ya&&Ge(i,"TYPE","init"),this.O?(Ge(i,"$req",r),Ge(i,"SID","null"),e.Z=!0,Ze(e,i,null)):Ze(e,i,r),this.G=2}}else 3==this.G&&(t?Wn(this,t):0==this.i.length||vn(this.h)||Wn(this))},r.Ia=function(){if(this.u=null,er(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=he(D(this.eb,this),t)}},r.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,le(10),Gn(this),er(this))},r.cb=function(){null!=this.v&&(this.v=null,Gn(this),Jn(this),le(19))},r.kb=function(t){t?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))},(r=cr.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Ra=function(){},lr.prototype.g=function(t,e){return new fr(t,e)},F(fr,Ft),fr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;le(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ur(t,null,t.V),$n(t)},fr.prototype.close=function(){Kn(this.g)},fr.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=jt(t),t=n);e.i.push(new cn(e.ab++,t)),3==e.G&&$n(e)},fr.prototype.M=function(){this.g.l=null,delete this.j,Kn(this.g),delete this.g,fr.X.M.call(this)},F(hr,be),F(vr,we),F(dr,cr),dr.prototype.xa=function(){Nt(this.g,"a")},dr.prototype.wa=function(t){Nt(this.g,new hr(t))},dr.prototype.va=function(t){Nt(this.g,new vr)},dr.prototype.ua=function(){Nt(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,fr.prototype.send=fr.prototype.u,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,de.COMPLETE="complete",ge.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Ft.prototype.listen=Ft.prototype.N,Cn.prototype.listenOnce=Cn.prototype.O,Cn.prototype.getLastError=Cn.prototype.Oa,Cn.prototype.getLastErrorCode=Cn.prototype.Ea,Cn.prototype.getStatus=Cn.prototype.aa,Cn.prototype.getResponseJson=Cn.prototype.Sa,Cn.prototype.getResponseText=Cn.prototype.fa,Cn.prototype.send=Cn.prototype.da,Cn.prototype.setWithCredentials=Cn.prototype.Ka;var pr=w.createWebChannelTransport=function(){return new lr},yr=w.getStatEventTarget=function(){return oe()},gr=w.ErrorCode=ve,mr=w.EventType=de,kr=w.Event=ie,br=w.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},wr=w.FetchXmlHttpFactory=xn,Er=w.WebChannel=ge,xr=w.XhrIo=Cn,_r="@firebase/firestore",Tr=function(){function t(e){(0,d.Z)(this,t),this.uid=e}return(0,p.Z)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(t){return t.uid===this.uid}}]),t}();Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");var Sr="9.14.0",Ir=new m.Yd("@firebase/firestore");function Zr(){return Ir.logLevel}function Ar(t){if(Ir.logLevel<=m.in.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(Or);Ir.debug.apply(Ir,["Firestore (".concat(Sr,"): ").concat(t)].concat((0,v.Z)(i)))}}function Cr(t){if(Ir.logLevel<=m.in.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(Or);Ir.error.apply(Ir,["Firestore (".concat(Sr,"): ").concat(t)].concat((0,v.Z)(i)))}}function Dr(t){if(Ir.logLevel<=m.in.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(Or);Ir.warn.apply(Ir,["Firestore (".concat(Sr,"): ").concat(t)].concat((0,v.Z)(i)))}}function Or(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Fr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",e="FIRESTORE (".concat(Sr,") INTERNAL ASSERTION FAILED: ")+t;throw Cr(e),new Error(e)}function Nr(t,e){t||Fr()}function Rr(t,e){return t}var jr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lr=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this,t,r)).code=t,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,p.Z)(n)}(k.ZR),Mr=(0,p.Z)((function t(){var e=this;(0,d.Z)(this,t),this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))})),Pr=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))})),Vr=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(Tr.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),Ur=function(){function t(e){(0,d.Z)(this,t),this.token=e,this.changeListener=null}return(0,p.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),Br=function(){function t(e){(0,d.Z)(this,t),this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,p.Z)(t,[{key:"start",value:function(t,e){var n=this,r=this.i,i=function(t){return n.i!==r?(r=n.i,e(t)):Promise.resolve()},a=new Mr;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Mr,t.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var e=a;t.enqueueRetryable((0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.promise;case 2:return t.next=4,i(n.currentUser);case 4:case"end":return t.stop()}}),t)}))))},u=function(t){Ar("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=t,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(t){return u(t)})),setTimeout((function(){if(!n.auth){var t=n.t.getImmediate({optional:!0});t?u(t):(Ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mr)}}),0),o()}},{key:"getToken",value:function(){var t=this,e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.i!==e?(Ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Nr("string"==typeof n.accessToken),new Pr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var t=this.auth&&this.auth.getUid();return Nr(null===t||"string"==typeof t),new Tr(t)}}]),t}(),qr=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.p=new Map}return(0,p.Z)(t,[{key:"I",value:function(){return this.g?this.g():(Nr(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),t}(),zr=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.h=e,this.l=n,this.m=r,this.g=i}return(0,p.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(new qr(this.h,this.l,this.m,this.g))}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(Tr.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),Kr=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gr=function(){function t(e){(0,d.Z)(this,t),this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,p.Z)(t,[{key:"start",value:function(t,e){var n=this,r=function(t){null!=t.error&&Ar("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));var r=t.token!==n.A;return n.A=t.token,Ar("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?e(t.token):Promise.resolve()};this.o=function(e){t.enqueueRetryable((function(){return r(e)}))};var i=function(t){Ar("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=t,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(t){return i(t)})),setTimeout((function(){if(!n.appCheck){var t=n.T.getImmediate({optional:!0});t?i(t):Ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var t=this,e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(Nr("string"==typeof e.token),t.A=e.token,new Kr(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();function Hr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $r=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,null,[{key:"R",value:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Hr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n}}]),t}();function Wr(t,e){return t<e?-1:t>e?1:0}function Qr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}var Xr=function(){function t(e,n){if((0,d.Z)(this,t),this.seconds=e,this.nanoseconds=n,n<0)throw new Lr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lr(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Lr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lr(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return(0,p.Z)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(t){return this.seconds===t.seconds?Wr(this.nanoseconds,t.nanoseconds):Wr(this.seconds,t.seconds)}},{key:"isEqual",value:function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),Yr=function(){function t(e){(0,d.Z)(this,t),this.timestamp=e}return(0,p.Z)(t,[{key:"compareTo",value:function(t){return this.timestamp._compareTo(t.timestamp)}},{key:"isEqual",value:function(t){return this.timestamp.isEqual(t.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new Xr(0,0))}},{key:"max",value:function(){return new t(new Xr(253402300799,999999999))}}]),t}(),Jr=function(){function t(e,n,r){(0,d.Z)(this,t),void 0===n?n=0:n>e.length&&Fr(),void 0===r?r=e.length-n:r>e.length-n&&Fr(),this.segments=e,this.offset=n,this.len=r}return(0,p.Z)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(t){return this.segments[this.offset+t]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"isImmediateParentOf",value:function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"forEach",value:function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),a=e.get(r);if(i<a)return-1;if(i>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}]),t}(),ti=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,d.Z)(this,n),e.apply(this,arguments)}return(0,p.Z)(n,[{key:"construct",value:function(t,e,r){return new n(t,e,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=[],e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Lr(jr.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));t.push.apply(t,(0,v.Z)(u.split("/").filter((function(t){return t.length>0}))))}return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jr),ei=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,d.Z)(this,n),e.apply(this,arguments)}return(0,p.Z)(n,[{key:"construct",value:function(t,e,r){return new n(t,e,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(t){return ei.test(t)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(t){for(var e=[],r="",i=0,a=function(){if(0===r.length)throw new Lr(jr.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(r),r=""},o=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Lr(jr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Lr(jr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Lr(jr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jr),ri=function(){function t(e){(0,d.Z)(this,t),this.path=e}return(0,p.Z)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(t){return null!==t&&0===ti.comparator(this.path,t.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(ti.fromString(e))}},{key:"fromName",value:function(e){return new t(ti.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(ti.emptyPath())}},{key:"comparator",value:function(t,e){return ti.comparator(t.path,e.path)}},{key:"isDocumentKey",value:function(t){return t.length%2==0}},{key:"fromSegments",value:function(e){return new t(new ti(e.slice()))}}]),t}(),ii=(0,p.Z)((function t(e,n,r,i){(0,d.Z)(this,t),this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}));ii.UNKNOWN_ID=-1;function ai(t,e){var n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Yr.fromTimestamp(1e9===r?new Xr(n+1,0):new Xr(n,r));return new ui(i,ri.empty(),e)}function oi(t){return new ui(t.readTime,t.key,-1)}var ui=function(){function t(e,n,r){(0,d.Z)(this,t),this.readTime=e,this.documentKey=n,this.largestBatchId=r}return(0,p.Z)(t,null,[{key:"min",value:function(){return new t(Yr.min(),ri.empty(),-1)}},{key:"max",value:function(){return new t(Yr.max(),ri.empty(),-1)}}]),t}();function si(t,e){var n=t.readTime.compareTo(e.readTime);return 0!==n?n:0!==(n=ri.comparator(t.documentKey,e.documentKey))?n:Wr(t.largestBatchId,e.largestBatchId)}var ci="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",li=function(){function t(){(0,d.Z)(this,t),this.onCommittedListeners=[]}return(0,p.Z)(t,[{key:"addOnCommittedListener",value:function(t){this.onCommittedListeners.push(t)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(t){return t()}))}}]),t}();function fi(t){return hi.apply(this,arguments)}function hi(){return hi=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.code===jr.FAILED_PRECONDITION&&e.message===ci){t.next=2;break}throw e;case 2:Ar("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return t.stop()}}),t)}))),hi.apply(this,arguments)}var vi=function(){function t(e){var n=this;(0,d.Z)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(t){n.isDone=!0,n.result=t,n.nextCallback&&n.nextCallback(t)}),(function(t){n.isDone=!0,n.error=t,n.catchCallback&&n.catchCallback(t)}))}return(0,p.Z)(t,[{key:"catch",value:function(t){return this.next(void 0,t)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&Fr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,a=!1;e.forEach((function(e){++r,e.next((function(){++i,a&&i===r&&t()}),(function(t){return n(t)}))})),a=!0,i===r&&t()}))}},{key:"or",value:function(e){var n,r=t.resolve(!1),i=(0,s.Z)(e);try{var a=function(){var e=n.value;r=r.next((function(n){return n?t.resolve(n):e()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)}},{key:"mapArray",value:function(e,n){return new t((function(t,r){for(var i=e.length,a=new Array(i),o=0,u=function(u){var s=u;n(e[s]).next((function(e){a[s]=e,++o===i&&t(a)}),(function(t){return r(t)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(e,n){return new t((function(t,r){!function i(){!0===e()?n().next((function(){i()}),r):t()}()}))}}]),t}();function di(t){return"IndexedDbTransactionError"===t.name}var pi=function(){function t(e,n){var r=this;(0,d.Z)(this,t),this.previousValue=e,n&&(n.sequenceNumberHandler=function(t){return r.ut(t)},this.ct=function(t){return n.writeSequenceNumber(t)})}return(0,p.Z)(t,[{key:"ut",value:function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}},{key:"next",value:function(){var t=++this.previousValue;return this.ct&&this.ct(t),t}}]),t}();function yi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}pi.at=-1;var ki=function(){function t(e,n){(0,d.Z)(this,t),this.comparator=e,this.root=n||wi.EMPTY}return(0,p.Z)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wi.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}},{key:"get",value:function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}},{key:"indexOf",value:function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(t){return this.root.inorderTraversal(t)}},{key:"forEach",value:function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))}},{key:"toString",value:function(){var t=[];return this.inorderTraversal((function(e,n){return t.push("".concat(e,":").concat(n)),!1})),"{".concat(t.join(", "),"}")}},{key:"reverseTraversal",value:function(t){return this.root.reverseTraversal(t)}},{key:"getIterator",value:function(){return new bi(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(t){return new bi(this.root,t,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new bi(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(t){return new bi(this.root,t,this.comparator,!0)}}]),t}(),bi=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.isReverse=i,this.nodeStack=[];for(var a=1;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return(0,p.Z)(t,[{key:"getNext",value:function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}]),t}(),wi=function(){function t(e,n,r,i,a){(0,d.Z)(this,t),this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=a?a:t.EMPTY,this.size=this.left.size+1+this.right.size}return(0,p.Z)(t,[{key:"copy",value:function(e,n,r,i,a){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}},{key:"reverseTraversal",value:function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}},{key:"moveRedLeft",value:function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}},{key:"moveRedRight",value:function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}},{key:"checkMaxDepth",value:function(){var t=this.check();return Math.pow(2,t)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fr();if(this.right.isRed())throw Fr();var t=this.left.check();if(t!==this.right.check())throw Fr();return t+(this.isRed()?0:1)}}]),t}();wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1,wi.EMPTY=new(function(){function t(){(0,d.Z)(this,t),this.size=0}return(0,p.Z)(t,[{key:"key",get:function(){throw Fr()}},{key:"value",get:function(){throw Fr()}},{key:"color",get:function(){throw Fr()}},{key:"left",get:function(){throw Fr()}},{key:"right",get:function(){throw Fr()}},{key:"copy",value:function(t,e,n,r,i){return this}},{key:"insert",value:function(t,e,n){return new wi(t,e)}},{key:"remove",value:function(t,e){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(t){return!1}},{key:"reverseTraversal",value:function(t){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var Ei=function(){function t(e){(0,d.Z)(this,t),this.comparator=e,this.data=new ki(this.comparator)}return(0,p.Z)(t,[{key:"has",value:function(t){return null!==this.data.get(t)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(t){return this.data.indexOf(t)}},{key:"forEach",value:function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"forEachInRange",value:function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}},{key:"forEachWhile",value:function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}},{key:"getIterator",value:function(){return new xi(this.data.getIterator())}},{key:"getIteratorFrom",value:function(t){return new xi(this.data.getIteratorFrom(t))}},{key:"add",value:function(t){return this.copy(this.data.remove(t).insert(t,!0))}},{key:"delete",value:function(t){return this.has(t)?this.copy(this.data.remove(t)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),xi=function(){function t(e){(0,d.Z)(this,t),this.iter=e}return(0,p.Z)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();var _i=function(){function t(e){(0,d.Z)(this,t),this.fields=e,e.sort(ni.comparator)}return(0,p.Z)(t,[{key:"unionWith",value:function(e){var n,r=new Ei(ni.comparator),i=(0,s.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=(0,s.Z)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;r=r.add(c)}}catch(l){u.e(l)}finally{u.f()}return new t(r.toArray())}},{key:"covers",value:function(t){var e,n=(0,s.Z)(this.fields);try{for(n.s();!(e=n.n()).done;){if(e.value.isPrefixOf(t))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(t){return Qr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}();var Ti=function(t){function e(t){(0,d.Z)(this,e),this.binaryString=t}return(0,p.Z)(e,[{key:t,value:function(){var t=this,e=0;return{next:function(){return e<t.binaryString.length?{value:t.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return t=this.binaryString,btoa(t);var t}},{key:"toUint8Array",value:function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(t){return Wr(this.binaryString,t.binaryString)}},{key:"isEqual",value:function(t){return this.binaryString===t.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new e(n)}}]),e}(Symbol.iterator);Ti.EMPTY_BYTE_STRING=new Ti("");var Si=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(t){if(Nr(!!t),"string"==typeof t){var e=0,n=Si.exec(t);if(Nr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zi(t.seconds),nanos:Zi(t.nanos)}}function Zi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ai(t){return"string"==typeof t?Ti.fromBase64String(t):Ti.fromUint8Array(t)}function Ci(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Di(t){var e=t.mapValue.fields.__previous_value__;return Ci(e)?Di(e):e}function Oi(t){var e=Ii(t.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}var Fi=(0,p.Z)((function t(e,n,r,i,a,o,u,s){(0,d.Z)(this,t),this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ni=function(){function t(e,n){(0,d.Z)(this,t),this.projectId=e,this.database=n||"(default)"}return(0,p.Z)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}();function Ri(t){return null==t}function ji(t){return 0===t&&1/t==-1/0}function Li(t){return"number"==typeof t&&Number.isInteger(t)&&!ji(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ci(t)?4:Ji(t)?9007199254740991:10:Fr()}function Vi(t,e){if(t===e)return!0;var n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oi(t).isEqual(Oi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ii(t.timestampValue),r=Ii(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ai(t.bytesValue).isEqual(Ai(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Zi(t.geoPointValue.latitude)===Zi(e.geoPointValue.latitude)&&Zi(t.geoPointValue.longitude)===Zi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Zi(t.integerValue)===Zi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Zi(t.doubleValue),r=Zi(e.doubleValue);return n===r?ji(n)===ji(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Qr(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(yi(n)!==yi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vi(n[i],r[i])))return!1;return!0}(t,e);default:return Fr()}}function Ui(t,e){return void 0!==(t.values||[]).find((function(t){return Vi(t,e)}))}function Bi(t,e){if(t===e)return 0;var n=Pi(t),r=Pi(e);if(n!==r)return Wr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Zi(t.integerValue||t.doubleValue),r=Zi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return qi(t.timestampValue,e.timestampValue);case 4:return qi(Oi(t),Oi(e));case 5:return Wr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ai(t),r=Ai(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Wr(n[i],r[i]);if(0!==a)return a}return Wr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Wr(Zi(t.latitude),Zi(e.latitude));return 0!==n?n:Wr(Zi(t.longitude),Zi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var a=Bi(n[i],r[i]);if(a)return a}return Wr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Mi.mapValue&&e===Mi.mapValue)return 0;if(t===Mi.mapValue)return 1;if(e===Mi.mapValue)return-1;var n=t.fields||{},r=Object.keys(n),i=e.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Wr(r[o],a[o]);if(0!==u)return u;var s=Bi(n[r[o]],i[a[o]]);if(0!==s)return s}return Wr(r.length,a.length)}(t.mapValue,e.mapValue);default:throw Fr()}}function qi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wr(t,e);var n=Ii(t),r=Ii(e),i=Wr(n.seconds,r.seconds);return 0!==i?i:Wr(n.nanos,r.nanos)}function zi(t){return Ki(t)}function Ki(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ii(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ai(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ri.fromName(n).toString()):"geoPointValue"in t?"geo(".concat((e=t.geoPointValue).latitude,",").concat(e.longitude,")"):"arrayValue"in t?function(t){var e,n="[",r=!0,i=(0,s.Z)(t.values||[]);try{for(i.s();!(e=i.n()).done;){var a=e.value;r?r=!1:n+=",",n+=Ki(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(t.arrayValue):"mapValue"in t?function(t){var e,n=Object.keys(t.fields||{}).sort(),r="{",i=!0,a=(0,s.Z)(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;i?i=!1:r+=",",r+="".concat(o,":").concat(Ki(t.fields[o]))}}catch(u){a.e(u)}finally{a.f()}return r+"}"}(t.mapValue):Fr();var e,n}function Gi(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function Hi(t){return!!t&&"integerValue"in t}function $i(t){return!!t&&"arrayValue"in t}function Wi(t){return!!t&&"nullValue"in t}function Qi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xi(t){return!!t&&"mapValue"in t}function Yi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Yi(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Yi(t.arrayValue.values[r]);return n}return Object.assign({},t)}function Ji(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}var ta=function(){function t(e){(0,d.Z)(this,t),this.value=e}return(0,p.Z)(t,[{key:"field",value:function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Xi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}},{key:"set",value:function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yi(e)}},{key:"setAll",value:function(t){var e=this,n=ni.emptyPath(),r={},i=[];t.forEach((function(t,a){if(!n.isImmediateParentOf(a)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=a.popLast()}t?r[a.lastSegment()]=Yi(t):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(t){var e=this.field(t.popLast());Xi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}},{key:"isEqual",value:function(t){return Vi(this.value,t.value)}},{key:"getFieldsMap",value:function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Xi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}},{key:"applyChanges",value:function(t,e,n){gi(e,(function(e,n){return t[e]=n}));var r,i=(0,s.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete t[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new t(Yi(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function ea(t){var e=[];return gi(t.fields,(function(t,n){var r=new ni([t]);if(Xi(n)){var i=ea(n.mapValue).fields;if(0===i.length)e.push(r);else{var a,o=(0,s.Z)(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;e.push(r.child(u))}}catch(c){o.e(c)}finally{o.f()}}}else e.push(r)})),new _i(e)}var na=function(){function t(e,n,r,i,a,o){(0,d.Z)(this,t),this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return(0,p.Z)(t,[{key:"convertToFoundDocument",value:function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}},{key:"convertToNoDocument",value:function(t){return this.version=t,this.documentType=2,this.data=ta.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(t){return this.version=t,this.documentType=3,this.data=ta.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Yr.min(),this}},{key:"setReadTime",value:function(t){return this.readTime=t,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,Yr.min(),Yr.min(),ta.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r){return new t(e,1,n,Yr.min(),r,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,Yr.min(),ta.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,Yr.min(),ta.empty(),2)}}]),t}(),ra=(0,p.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,d.Z)(this,t),this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function ia(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ra(t,e,n,r,i,a,o)}function aa(t){var e=Rr(t);if(null===e.ht){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+zi(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Ri(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return zi(t)})).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return zi(t)})).join(",")),e.ht=n}return e.ht}function oa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ka(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],a=e.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Vi(i.value,a.value))return!1;var i,a;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wa(t.startAt,e.startAt)&&wa(t.endAt,e.endAt)}function ua(t){return ri.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var sa=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i){var a;return(0,d.Z)(this,n),(a=e.call(this)).field=t,a.op=r,a.value=i,a}return(0,p.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(Bi(e,this.value)):null!==e&&Pi(this.value)===Pi(e)&&this.ft(Bi(e,this.value))}},{key:"ft",value:function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Fr()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,r):new ca(t,e,r):"array-contains"===e?new va(t,r):"in"===e?new da(t,r):"not-in"===e?new pa(t,r):"array-contains-any"===e?new ya(t,r):new n(t,e,r)}},{key:"lt",value:function(t,e,n){return"in"===e?new la(t,n):new fa(t,n)}}]),n}(function(){return(0,p.Z)((function t(){(0,d.Z)(this,t)}))}()),ca=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i){var a;return(0,d.Z)(this,n),(a=e.call(this,t,r,i)).key=ri.fromName(i.referenceValue),a}return(0,p.Z)(n,[{key:"matches",value:function(t){var e=ri.comparator(t.key,this.key);return this.ft(e)}}]),n}(sa),la=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this,t,"in",r)).keys=ha("in",r),i}return(0,p.Z)(n,[{key:"matches",value:function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(sa),fa=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this,t,"not-in",r)).keys=ha("not-in",r),i}return(0,p.Z)(n,[{key:"matches",value:function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(sa);function ha(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ri.fromName(t.referenceValue)}))}var va=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){return(0,d.Z)(this,n),e.call(this,t,"array-contains",r)}return(0,p.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return $i(e)&&Ui(e.arrayValue,this.value)}}]),n}(sa),da=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){return(0,d.Z)(this,n),e.call(this,t,"in",r)}return(0,p.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return null!==e&&Ui(this.value.arrayValue,e)}}]),n}(sa),pa=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){return(0,d.Z)(this,n),e.call(this,t,"not-in",r)}return(0,p.Z)(n,[{key:"matches",value:function(t){if(Ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ui(this.value.arrayValue,e)}}]),n}(sa),ya=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){return(0,d.Z)(this,n),e.call(this,t,"array-contains-any",r)}return(0,p.Z)(n,[{key:"matches",value:function(t){var e=this,n=t.data.field(this.field);return!(!$i(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ui(e.value.arrayValue,t)}))}}]),n}(sa),ga=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.position=e,this.inclusive=n})),ma=(0,p.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,d.Z)(this,t),this.field=e,this.dir=n}));function ka(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ba(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var a=e[i],o=t.position[i];if(r=a.field.isKeyField()?ri.comparator(ri.fromName(o.referenceValue),n.key):Bi(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function wa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}var Ea=(0,p.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,d.Z)(this,t),this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function xa(t,e,n,r,i,a,o,u){return new Ea(t,e,n,r,i,a,o,u)}function _a(t){return new Ea(t)}function Ta(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Sa(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ia(t){var e,n=(0,s.Z)(t.filters);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Za(t){return null!==t.collectionGroup}function Aa(t){var e=Rr(t);if(null===e._t){e._t=[];var n=Ia(e),r=Sa(e);if(null!==n&&null===r)n.isKeyField()||e._t.push(new ma(n)),e._t.push(new ma(ni.keyField(),"asc"));else{var i,a=!1,o=(0,s.Z)(e.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;e._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ma(ni.keyField(),c))}}}return e._t}function Ca(t){var e=Rr(t);if(!e.wt)if("F"===e.limitType)e.wt=ia(e.path,e.collectionGroup,Aa(e),e.filters,e.limit,e.startAt,e.endAt);else{var n,r=[],i=(0,s.Z)(Aa(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ma(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var u=e.endAt?new ga(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new ga(e.startAt.position,e.startAt.inclusive):null;e.wt=ia(e.path,e.collectionGroup,r,e.filters,e.limit,u,c)}return e.wt}function Da(t,e,n){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Oa(t,e){return oa(Ca(t),Ca(e))&&t.limitType===e.limitType}function Fa(t){return"".concat(aa(Ca(t)),"|lt:").concat(t.limitType)}function Na(t){return"Query(target=".concat(function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((function(t){return"".concat((e=t).field.canonicalString()," ").concat(e.op," ").concat(zi(e.value));var e})).join(", "),"]")),Ri(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((function(t){return function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)})).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((function(t){return zi(t)})).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((function(t){return zi(t)})).join(",")),"Target(".concat(e,")")}(Ca(t)),"; limitType=").concat(t.limitType,")")}function Ra(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ri.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){var n,r=(0,s.Z)(t.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(t,e)&&function(t,e){var n,r=(0,s.Z)(t.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(e))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){var r=ba(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Aa(t),e))&&!(t.endAt&&!function(t,e,n){var r=ba(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Aa(t),e))}(t,e)}function ja(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function La(t){return function(e,n){var r,i=!1,a=(0,s.Z)(Aa(t));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ma(o,e,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function Ma(t,e,n){var r=t.field.isKeyField()?ri.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Bi(r,i):Fr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fr()}}function Pa(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(e)?"-0":e}}function Va(t){return{integerValue:""+t}}function Ua(t,e){return Li(e)?Va(e):Pa(t,e)}var Ba=(0,p.Z)((function t(){(0,d.Z)(this,t),this._=void 0}));function qa(t,e,n){return t instanceof Ga?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ha?$a(t,e):t instanceof Wa?Qa(t,e):function(t,e){var n=Ka(t,e),r=Ya(n)+Ya(t.yt);return Hi(n)&&Hi(t.yt)?Va(r):Pa(t.It,r)}(t,e)}function za(t,e,n){return t instanceof Ha?$a(t,e):t instanceof Wa?Qa(t,e):n}function Ka(t,e){return t instanceof Xa?Hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ga=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,d.Z)(this,n),e.apply(this,arguments)}return(0,p.Z)(n)}(Ba),Ha=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this)).elements=t,r}return(0,p.Z)(n)}(Ba);function $a(t,e){var n,r=Ja(e),i=(0,s.Z)(t.elements);try{var a=function(){var t=n.value;r.some((function(e){return Vi(e,t)}))||r.push(t)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wa=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this)).elements=t,r}return(0,p.Z)(n)}(Ba);function Qa(t,e){var n,r=Ja(e),i=(0,s.Z)(t.elements);try{var a=function(){var t=n.value;r=r.filter((function(e){return!Vi(e,t)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xa=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this)).It=t,i.yt=r,i}return(0,p.Z)(n)}(Ba);function Ya(t){return Zi(t.integerValue||t.doubleValue)}function Ja(t){return $i(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var to=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.version=e,this.transformResults=n})),eo=function(){function t(e,n){(0,d.Z)(this,t),this.updateTime=e,this.exists=n}return(0,p.Z)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function no(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ro=(0,p.Z)((function t(){(0,d.Z)(this,t)}));function io(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new go(t.key,eo.none()):new co(t.key,t.data,eo.none());var n,r=t.data,i=ta.empty(),a=new Ei(ni.comparator),o=(0,s.Z)(e.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var c=r.field(u);null===c&&u.length>1&&(u=u.popLast(),c=r.field(u)),null===c?i.delete(u):i.set(u,c),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new lo(t.key,i,new _i(a.toArray()),eo.none())}function ao(t,e,n){t instanceof co?function(t,e,n){var r=t.value.clone(),i=ho(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof lo?function(t,e,n){if(no(t.precondition,e)){var r=ho(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(fo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function oo(t,e,n,r){return t instanceof co?function(t,e,n,r){if(!no(t.precondition,e))return n;var i=t.value.clone(),a=vo(t.fieldTransforms,r,e);return i.setAll(a),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof lo?function(t,e,n,r){if(!no(t.precondition,e))return n;var i=vo(t.fieldTransforms,r,e),a=e.data;return a.setAll(fo(t)),a.setAll(i),e.convertToFoundDocument(e.version,a).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((function(t){return t.field})))}(t,e,n,r):function(t,e,n){return no(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function uo(t,e){var n,r=null,i=(0,s.Z)(t.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=e.data.field(a.field),u=Ka(a.transform,o||null);null!=u&&(null===r&&(r=ta.empty()),r.set(a.field,u))}}catch(c){i.e(c)}finally{i.f()}return r||null}function so(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Qr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ha&&e instanceof Ha||t instanceof Wa&&e instanceof Wa?Qr(t.elements,e.elements,Vi):t instanceof Xa&&e instanceof Xa?Vi(t.yt,e.yt):t instanceof Ga&&e instanceof Ga}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var co=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,d.Z)(this,n),(a=e.call(this)).key=t,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,p.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ro),lo=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,d.Z)(this,n),(o=e.call(this)).key=t,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,p.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ro);function fo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function ho(t,e,n){var r=new Map;Nr(t.length===n.length);for(var i=0;i<n.length;i++){var a=t[i],o=a.transform,u=e.data.field(a.field);r.set(a.field,za(o,u,n[i]))}return r}function vo(t,e,n){var r,i=new Map,a=(0,s.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,c=n.data.field(o.field);i.set(o.field,qa(u,c,e))}}catch(l){a.e(l)}finally{a.f()}return i}var po,yo,go=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this)).key=t,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,p.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ro),mo=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r){var i;return(0,d.Z)(this,n),(i=e.call(this)).key=t,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,p.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ro),ko=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.count=e}));function bo(t){switch(t){default:return Fr();case jr.CANCELLED:case jr.UNKNOWN:case jr.DEADLINE_EXCEEDED:case jr.RESOURCE_EXHAUSTED:case jr.INTERNAL:case jr.UNAVAILABLE:case jr.UNAUTHENTICATED:return!1;case jr.INVALID_ARGUMENT:case jr.NOT_FOUND:case jr.ALREADY_EXISTS:case jr.PERMISSION_DENIED:case jr.FAILED_PRECONDITION:case jr.ABORTED:case jr.OUT_OF_RANGE:case jr.UNIMPLEMENTED:case jr.DATA_LOSS:return!0}}function wo(t){if(void 0===t)return Cr("GRPC error has no .code"),jr.UNKNOWN;switch(t){case po.OK:return jr.OK;case po.CANCELLED:return jr.CANCELLED;case po.UNKNOWN:return jr.UNKNOWN;case po.DEADLINE_EXCEEDED:return jr.DEADLINE_EXCEEDED;case po.RESOURCE_EXHAUSTED:return jr.RESOURCE_EXHAUSTED;case po.INTERNAL:return jr.INTERNAL;case po.UNAVAILABLE:return jr.UNAVAILABLE;case po.UNAUTHENTICATED:return jr.UNAUTHENTICATED;case po.INVALID_ARGUMENT:return jr.INVALID_ARGUMENT;case po.NOT_FOUND:return jr.NOT_FOUND;case po.ALREADY_EXISTS:return jr.ALREADY_EXISTS;case po.PERMISSION_DENIED:return jr.PERMISSION_DENIED;case po.FAILED_PRECONDITION:return jr.FAILED_PRECONDITION;case po.ABORTED:return jr.ABORTED;case po.OUT_OF_RANGE:return jr.OUT_OF_RANGE;case po.UNIMPLEMENTED:return jr.UNIMPLEMENTED;case po.DATA_LOSS:return jr.DATA_LOSS;default:return Fr()}}(yo=po||(po={}))[yo.OK=0]="OK",yo[yo.CANCELLED=1]="CANCELLED",yo[yo.UNKNOWN=2]="UNKNOWN",yo[yo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yo[yo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yo[yo.NOT_FOUND=5]="NOT_FOUND",yo[yo.ALREADY_EXISTS=6]="ALREADY_EXISTS",yo[yo.PERMISSION_DENIED=7]="PERMISSION_DENIED",yo[yo.UNAUTHENTICATED=16]="UNAUTHENTICATED",yo[yo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yo[yo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yo[yo.ABORTED=10]="ABORTED",yo[yo.OUT_OF_RANGE=11]="OUT_OF_RANGE",yo[yo.UNIMPLEMENTED=12]="UNIMPLEMENTED",yo[yo.INTERNAL=13]="INTERNAL",yo[yo.UNAVAILABLE=14]="UNAVAILABLE",yo[yo.DATA_LOSS=15]="DATA_LOSS";var Eo=function(){function t(e,n){(0,d.Z)(this,t),this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,p.Z)(t,[{key:"get",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n){var r,i=(0,s.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,u.Z)(r.value,2),o=a[0],c=a[1];if(this.equalsFn(o,t))return c}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"set",value:function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}},{key:"delete",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){gi(this.inner,(function(e,n){var r,i=(0,s.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,u.Z)(r.value,2),o=a[0],c=a[1];t(o,c)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return mi(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),xo=new ki(ri.comparator);function _o(){return xo}var To=new ki(ri.comparator);function So(){for(var t=To,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];t=t.insert(o.key,o)}return t}function Io(t){var e=To;return t.forEach((function(t,n){return e=e.insert(t,n.overlayedDocument)})),e}function Zo(){return Co()}function Ao(){return Co()}function Co(){return new Eo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)}))}var Do=new ki(ri.comparator),Oo=new Ei(ri.comparator);function Fo(){for(var t=Oo,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];t=t.add(o)}return t}var No=new Ei(Wr);function Ro(){return No}var jo=function(){function t(e,n,r,i,a){(0,d.Z)(this,t),this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,p.Z)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n,r){var i=new Map;return i.set(e,Lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Yr.min(),i,Ro(),_o(),Fo())}}]),t}(),Lo=function(){function t(e,n,r,i,a){(0,d.Z)(this,t),this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,p.Z)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n,r){return new t(r,n,Fo(),Fo(),Fo())}}]),t}(),Mo=(0,p.Z)((function t(e,n,r,i){(0,d.Z)(this,t),this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=i})),Po=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.targetId=e,this.At=n})),Vo=(0,p.Z)((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ti.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,d.Z)(this,t),this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i})),Uo=function(){function t(){(0,d.Z)(this,t),this.Rt=0,this.bt=zo(),this.Pt=Ti.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return(0,p.Z)(t,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}},{key:"xt",value:function(){var t=Fo(),e=Fo(),n=Fo();return this.bt.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Fr()}})),new Lo(this.Pt,this.vt,t,e,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=zo()}},{key:"kt",value:function(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}},{key:"Ot",value:function(t){this.Vt=!0,this.bt=this.bt.remove(t)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),t}(),Bo=function(){function t(e){(0,d.Z)(this,t),this.Bt=e,this.Lt=new Map,this.Ut=_o(),this.qt=qo(),this.Kt=new Ei(Wr)}return(0,p.Z)(t,[{key:"Gt",value:function(t){var e,n=(0,s.Z)(t.Tt);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.Et&&t.Et.isFoundDocument()?this.Qt(r,t.Et):this.jt(r,t.key,t.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=(0,s.Z)(t.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,t.key,t.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.zt(n);switch(t.state){case 0:e.Ht(n)&&r.Ct(t.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(t.resumeToken);break;case 2:r.Ft(),r.St||e.removeTarget(n);break;case 3:e.Ht(n)&&(r.$t(),r.Ct(t.resumeToken));break;case 4:e.Ht(n)&&(e.Jt(n),r.Ct(t.resumeToken));break;default:Fr()}}))}},{key:"forEachTarget",value:function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((function(t,r){n.Ht(r)&&e(r)}))}},{key:"Yt",value:function(t){var e=t.targetId,n=t.At.count,r=this.Xt(e);if(r){var i=r.target;if(ua(i))if(0===n){var a=new ri(i.path);this.jt(e,a,na.newNoDocument(a,Yr.min()))}else Nr(1===n);else this.Zt(e)!==n&&(this.Jt(e),this.Kt=this.Kt.add(e))}}},{key:"te",value:function(t){var e=this,n=new Map;this.Lt.forEach((function(r,i){var a=e.Xt(i);if(a){if(r.current&&ua(a.target)){var o=new ri(a.target.path);null!==e.Ut.get(o)||e.ee(i,o)||e.jt(i,o,na.newNoDocument(o,t))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Fo();this.qt.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.Xt(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))})),this.Ut.forEach((function(e,n){return n.setReadTime(t)}));var i=new jo(t,n,this.Kt,this.Ut,r);return this.Ut=_o(),this.qt=qo(),this.Kt=new Ei(Wr),i}},{key:"Qt",value:function(t,e){if(this.Ht(t)){var n=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,n),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}}},{key:"jt",value:function(t,e,n){if(this.Ht(t)){var r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),n&&(this.Ut=this.Ut.insert(e,n))}}},{key:"removeTarget",value:function(t){this.Lt.delete(t)}},{key:"Zt",value:function(t){var e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}},{key:"Mt",value:function(t){this.zt(t).Mt()}},{key:"zt",value:function(t){var e=this.Lt.get(t);return e||(e=new Uo,this.Lt.set(t,e)),e}},{key:"ne",value:function(t){var e=this.qt.get(t);return e||(e=new Ei(Wr),this.qt=this.qt.insert(t,e)),e}},{key:"Ht",value:function(t){var e=null!==this.Xt(t);return e||Ar("WatchChangeAggregator","Detected inactive target",t),e}},{key:"Xt",value:function(t){var e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}},{key:"Jt",value:function(t){var e=this;this.Lt.set(t,new Uo),this.Bt.getRemoteKeysForTarget(t).forEach((function(n){e.jt(t,n,null)}))}},{key:"ee",value:function(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}]),t}();function qo(){return new ki(ri.comparator)}function zo(){return new ki(ri.comparator)}var Ko={asc:"ASCENDING",desc:"DESCENDING"},Go={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ho=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.databaseId=e,this.gt=n}));function $o(t,e){return t.gt?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wo(t,e){return t.gt?e.toBase64():e.toUint8Array()}function Qo(t,e){return $o(t,e.toTimestamp())}function Xo(t){return Nr(!!t),Yr.fromTimestamp(function(t){var e=Ii(t);return new Xr(e.seconds,e.nanos)}(t))}function Yo(t,e){return function(t){return new ti(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Jo(t){var e=ti.fromString(t);return Nr(ku(e)),e}function tu(t,e){return Yo(t.databaseId,e.path)}function eu(t,e){var n=Jo(e);if(n.get(1)!==t.databaseId.projectId)throw new Lr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Lr(jr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ri(au(n))}function nu(t,e){return Yo(t.databaseId,e)}function ru(t){var e=Jo(t);return 4===e.length?ti.emptyPath():au(e)}function iu(t){return new ti(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function au(t){return Nr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ou(t,e,n){return{name:tu(t,e),fields:n.value.mapValue.fields}}function uu(t,e){var n;if(e instanceof co)n={update:ou(t,e.key,e.value)};else if(e instanceof go)n={delete:tu(t,e.key)};else if(e instanceof lo)n={update:ou(t,e.key,e.data),updateMask:mu(e.fieldMask)};else{if(!(e instanceof mo))return Fr();n={verify:tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ga)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ha)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xa)return{fieldPath:e.field.canonicalString(),increment:n.yt};throw Fr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Fr()}(t,e.precondition)),n}function su(t,e){return{documents:[nu(t,e.path)]}}function cu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=nu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=nu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Qi(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NAN"}};if(Wi(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Qi(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NAN"}};if(Wi(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(t.field),op:vu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var a=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:du(t.field),direction:hu(t.dir)}}(t)}))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(t,e){return t.gt||Ri(e)?e:{value:e}}(t,e.limit);return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function lu(t){var e=ru(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Nr(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:e=e.child(a.collectionId)}var o=[];n.where&&(o=fu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new ma(pu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var s=null;n.limit&&(s=function(t){var e;return Ri(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=function(t){var e=!!t.before,n=t.values||[];return new ga(n,e)}(n.startAt));var l=null;return n.endAt&&(l=function(t){var e=!t.before,n=t.values||[];return new ga(n,e)}(n.endAt)),xa(e,i,u,o,s,"F",c,l)}function fu(t){return t?void 0!==t.unaryFilter?[gu(t)]:void 0!==t.fieldFilter?[yu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return fu(t)})).reduce((function(t,e){return t.concat(e)})):Fr():[]}function hu(t){return Ko[t]}function vu(t){return Go[t]}function du(t){return{fieldPath:t.canonicalString()}}function pu(t){return ni.fromServerFormat(t.fieldPath)}function yu(t){return sa.create(pu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fr()}}(t.fieldFilter.op),t.fieldFilter.value)}function gu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=pu(t.unaryFilter.field);return sa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=pu(t.unaryFilter.field);return sa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pu(t.unaryFilter.field);return sa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pu(t.unaryFilter.field);return sa.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fr()}}function mu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function ku(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var bu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),wu=([].concat((0,v.Z)(bu),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Eu=wu;[].concat(Eu,["indexConfiguration","indexState","indexEntries"]);var xu=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,p.Z)(t,[{key:"applyToRemoteDocument",value:function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ao(i,t,n[r])}}},{key:"applyToLocalView",value:function(t,e){var n,r=(0,s.Z)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(t.key)&&(e=oo(i,t,e,this.localWriteTime))}}catch(c){r.e(c)}finally{r.f()}var a,o=(0,s.Z)(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(t.key)&&(e=oo(u,t,e,this.localWriteTime))}}catch(c){o.e(c)}finally{o.f()}return e}},{key:"applyToLocalDocumentSet",value:function(t,e){var n=this,r=Ao();return this.mutations.forEach((function(i){var a=t.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=io(o,u=e.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Yr.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Fo())}},{key:"isEqual",value:function(t){return this.batchId===t.batchId&&Qr(this.mutations,t.mutations,(function(t,e){return so(t,e)}))&&Qr(this.baseMutations,t.baseMutations,(function(t,e){return so(t,e)}))}}]),t}(),_u=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,p.Z)(t,null,[{key:"from",value:function(e,n,r){Nr(e.mutations.length===r.length);for(var i=Do,a=e.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new t(e,n,r,i)}}]),t}(),Tu=function(){function t(e,n){(0,d.Z)(this,t),this.largestBatchId=e,this.mutation=n}return(0,p.Z)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(t){return null!==t&&this.mutation===t.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),Su=function(){function t(e,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yr.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yr.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ti.EMPTY_BYTE_STRING;(0,d.Z)(this,t),this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return(0,p.Z)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),Iu=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.re=e}));function Zu(t){var e=lu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Da(e,e.limit,"L"):e}var Au=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,[{key:"ce",value:function(t,e){this.ae(t,e),e.he()}},{key:"ae",value:function(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(Zi(t.integerValue));else if("doubleValue"in t){var n=Zi(t.doubleValue);isNaN(n)?this.le(e,13):(this.le(e,15),ji(n)?e.fe(0):e.fe(n))}else if("timestampValue"in t){var r=t.timestampValue;this.le(e,20),"string"==typeof r?e.de(r):(e.de("".concat(r.seconds||"")),e.fe(r.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(Ai(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){var i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?Ji(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):Fr()}},{key:"_e",value:function(t,e){this.le(e,25),this.Ie(t,e)}},{key:"Ie",value:function(t,e){e.de(t)}},{key:"ye",value:function(t,e){var n=t.fields||{};this.le(e,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,e),this.ae(n[a],e)}}},{key:"pe",value:function(t,e){var n=t.values||[];this.le(e,50);var r,i=(0,s.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,e)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(t,e){var n=this;this.le(e,37),ri.fromName(t).path.forEach((function(t){n.le(e,60),n.Ie(t,e)}))}},{key:"le",value:function(t,e){t.fe(e)}},{key:"we",value:function(t){t.fe(2)}}]),t}();Au.Te=new Au;var Cu=function(){function t(){(0,d.Z)(this,t),this.Ye=new Du}return(0,p.Z)(t,[{key:"addToCollectionParentIndex",value:function(t,e){return this.Ye.add(e),vi.resolve()}},{key:"getCollectionParents",value:function(t,e){return vi.resolve(this.Ye.getEntries(e))}},{key:"addFieldIndex",value:function(t,e){return vi.resolve()}},{key:"deleteFieldIndex",value:function(t,e){return vi.resolve()}},{key:"getDocumentsMatchingTarget",value:function(t,e){return vi.resolve(null)}},{key:"getIndexType",value:function(t,e){return vi.resolve(0)}},{key:"getFieldIndexes",value:function(t,e){return vi.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(t){return vi.resolve(null)}},{key:"getMinOffset",value:function(t,e){return vi.resolve(ui.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(t,e){return vi.resolve(ui.min())}},{key:"updateCollectionGroup",value:function(t,e,n){return vi.resolve()}},{key:"updateIndexEntries",value:function(t,e){return vi.resolve()}}]),t}(),Du=function(){function t(){(0,d.Z)(this,t),this.index={}}return(0,p.Z)(t,[{key:"add",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ei(ti.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}},{key:"has",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}},{key:"getEntries",value:function(t){return(this.index[t]||new Ei(ti.comparator)).toArray()}}]),t}();new Uint8Array(0);var Ou=function(){function t(e,n,r){(0,d.Z)(this,t),this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,p.Z)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();Ou.DEFAULT_COLLECTION_PERCENTILE=10,Ou.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ou.DEFAULT=new Ou(41943040,Ou.DEFAULT_COLLECTION_PERCENTILE,Ou.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ou.DISABLED=new Ou(-1,0,0);var Fu=function(){function t(e){(0,d.Z)(this,t),this.bn=e}return(0,p.Z)(t,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new t(0)}},{key:"vn",value:function(){return new t(-1)}}]),t}();var Nu=function(){function t(){(0,d.Z)(this,t),this.changes=new Eo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return(0,p.Z)(t,[{key:"addEntry",value:function(t){this.assertNotApplied(),this.changes.set(t.key,t)}},{key:"removeEntry",value:function(t,e){this.assertNotApplied(),this.changes.set(t,na.newInvalidDocument(t).setReadTime(e))}},{key:"getEntry",value:function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?vi.resolve(n):this.getFromCache(t,e)}},{key:"getEntries",value:function(t,e){return this.getAllFromCache(t,e)}},{key:"apply",value:function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}},{key:"assertNotApplied",value:function(){}}]),t}();var Ru=(0,p.Z)((function t(e,n){(0,d.Z)(this,t),this.overlayedDocument=e,this.mutatedFields=n})),ju=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,p.Z)(t,[{key:"getDocument",value:function(t,e){var n=this,r=null;return this.documentOverlayCache.getOverlay(t,e).next((function(i){return r=i,n.getBaseDocument(t,e,r)})).next((function(t){return null!==r&&oo(r.mutation,t,_i.empty(),Xr.now()),t}))}},{key:"getDocuments",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e,Fo()).next((function(){return e}))}))}},{key:"getLocalViewOfDocuments",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo(),i=Zo();return this.populateOverlays(t,i,e).next((function(){return n.computeViews(t,e,i,r).next((function(t){var e=So();return t.forEach((function(t,n){e=e.insert(t,n.overlayedDocument)})),e}))}))}},{key:"getOverlayedDocuments",value:function(t,e){var n=this,r=Zo();return this.populateOverlays(t,r,e).next((function(){return n.computeViews(t,e,r,Fo())}))}},{key:"populateOverlays",value:function(t,e,n){var r=[];return n.forEach((function(t){e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((function(t){t.forEach((function(t,n){e.set(t,n)}))}))}},{key:"computeViews",value:function(t,e,n,r){var i=_o(),a=Co(),o=Co();return e.forEach((function(t,e){var o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof lo)?i=i.insert(e.key,e):void 0!==o&&(a.set(e.key,o.mutation.getFieldMask()),oo(o.mutation,e,o.mutation.getFieldMask(),Xr.now()))})),this.recalculateAndSaveOverlays(t,i).next((function(t){return t.forEach((function(t,e){return a.set(t,e)})),e.forEach((function(t,e){var n;return o.set(t,new Ru(e,null!==(n=a.get(t))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(t,e){var n=this,r=Co(),i=new ki((function(t,e){return t-e})),a=Fo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){var n,a=(0,s.Z)(t);try{var o=function(){var t=n.value;t.keys().forEach((function(n){var a=e.get(n);if(null!==a){var o=r.get(n)||_i.empty();o=t.applyToLocalView(a,o),r.set(n,o);var u=(i.get(t.batchId)||Fo()).add(n);i=i.insert(t.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ao();c.forEach((function(t){if(!a.has(t)){var n=io(e.get(t),r.get(t));null!==n&&l.set(t,n),a=a.add(t)}})),o.push(n.documentOverlayCache.saveOverlays(t,s,l))};u.hasNext();)s();return vi.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.recalculateAndSaveOverlays(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(t,e,n){return function(t){return ri.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Za(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}},{key:"getNextDocuments",value:function(t,e,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-a.size):vi.resolve(Zo()),u=-1,s=a;return o.next((function(e){return vi.forEach(e,(function(e,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(e)?vi.resolve():i.getBaseDocument(t,e,n).next((function(t){s=s.insert(e,t)}))})).next((function(){return i.populateOverlays(t,e,a)})).next((function(){return i.computeViews(t,s,e,Fo())})).next((function(t){return{batchId:u,changes:Io(t)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(t,e){return this.getDocument(t,new ri(e)).next((function(t){var e=So();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(t,e,n){var r=this,i=e.collectionGroup,a=So();return this.indexManager.getCollectionParents(t,i).next((function(o){return vi.forEach(o,(function(o){var u=function(t,e){return new Ea(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.getDocumentsMatchingCollectionQuery(t,u,n).next((function(t){t.forEach((function(t,e){a=a.insert(t,e)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(t,e,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(t,e.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId)})).next((function(t){t.forEach((function(t,e){var n=e.getKey();null===r.get(n)&&(r=r.insert(n,na.newInvalidDocument(n)))}));var n=So();return r.forEach((function(r,i){var a=t.get(r);void 0!==a&&oo(a.mutation,i,_i.empty(),Xr.now()),Ra(e,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(t,e,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(t,e):vi.resolve(na.newInvalidDocument(e))}}]),t}(),Lu=function(){function t(e){(0,d.Z)(this,t),this.It=e,this.Zn=new Map,this.ts=new Map}return(0,p.Z)(t,[{key:"getBundleMetadata",value:function(t,e){return vi.resolve(this.Zn.get(e))}},{key:"saveBundleMetadata",value:function(t,e){var n;return this.Zn.set(e.id,{id:(n=e).id,version:n.version,createTime:Xo(n.createTime)}),vi.resolve()}},{key:"getNamedQuery",value:function(t,e){return vi.resolve(this.ts.get(e))}},{key:"saveNamedQuery",value:function(t,e){return this.ts.set(e.name,function(t){return{name:t.name,query:Zu(t.bundledQuery),readTime:Xo(t.readTime)}}(e)),vi.resolve()}}]),t}(),Mu=function(){function t(){(0,d.Z)(this,t),this.overlays=new ki(ri.comparator),this.es=new Map}return(0,p.Z)(t,[{key:"getOverlay",value:function(t,e){return vi.resolve(this.overlays.get(e))}},{key:"getOverlays",value:function(t,e){var n=this,r=Zo();return vi.forEach(e,(function(e){return n.getOverlay(t,e).next((function(t){null!==t&&r.set(e,t)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(t,e,n){var r=this;return n.forEach((function(n,i){r.ue(t,e,i)})),vi.resolve()}},{key:"removeOverlaysForBatchId",value:function(t,e,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(t){return r.overlays=r.overlays.remove(t)})),this.es.delete(n)),vi.resolve()}},{key:"getOverlaysForCollection",value:function(t,e,n){for(var r=Zo(),i=e.length+1,a=new ri(e.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return vi.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(t,e,n,r){for(var i=new ki((function(t,e){return t-e})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===e&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Zo(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Zo(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(t,e){return s.set(t,e)})),!(s.size()>=r)););return vi.resolve(s)}},{key:"ue",value:function(t,e,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Tu(e,n));var a=this.es.get(e);void 0===a&&(a=Fo(),this.es.set(e,a)),this.es.set(e,a.add(n.key))}}]),t}(),Pu=function(){function t(){(0,d.Z)(this,t),this.ns=new Ei(Vu.ss),this.rs=new Ei(Vu.os)}return(0,p.Z)(t,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(t,e){var n=new Vu(t,e);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))}},{key:"removeReference",value:function(t,e){this.cs(new Vu(t,e))}},{key:"hs",value:function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))}},{key:"ls",value:function(t){var e=this,n=new ri(new ti([])),r=new Vu(n,t),i=new Vu(n,t+1),a=[];return this.rs.forEachInRange([r,i],(function(t){e.cs(t),a.push(t.key)})),a}},{key:"fs",value:function(){var t=this;this.ns.forEach((function(e){return t.cs(e)}))}},{key:"cs",value:function(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}},{key:"ds",value:function(t){var e=new ri(new ti([])),n=new Vu(e,t),r=new Vu(e,t+1),i=Fo();return this.rs.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i}},{key:"containsKey",value:function(t){var e=new Vu(t,0),n=this.ns.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}]),t}(),Vu=function(){function t(e,n){(0,d.Z)(this,t),this.key=e,this._s=n}return(0,p.Z)(t,null,[{key:"ss",value:function(t,e){return ri.comparator(t.key,e.key)||Wr(t._s,e._s)}},{key:"os",value:function(t,e){return Wr(t._s,e._s)||ri.comparator(t.key,e.key)}}]),t}(),Uu=function(){function t(e,n){(0,d.Z)(this,t),this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ei(Vu.ss)}return(0,p.Z)(t,[{key:"checkEmpty",value:function(t){return vi.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(t,e,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new xu(i,e,n,r);this.mutationQueue.push(a);var o,u=(0,s.Z)(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;this.gs=this.gs.add(new Vu(c.key,i)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return vi.resolve(a)}},{key:"lookupMutationBatch",value:function(t,e){return vi.resolve(this.ys(e))}},{key:"getNextMutationBatchAfterBatchId",value:function(t,e){var n=e+1,r=this.ps(n),i=r<0?0:r;return vi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return vi.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(t){return vi.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,e){var n=this,r=new Vu(e,0),i=new Vu(e,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(t){var e=n.ys(t._s);a.push(e)})),vi.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,e){var n=this,r=new Ei(Wr);return e.forEach((function(t){var e=new Vu(t,0),i=new Vu(t,Number.POSITIVE_INFINITY);n.gs.forEachInRange([e,i],(function(t){r=r.add(t._s)}))})),vi.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,e){var n=e.path,r=n.length+1,i=n;ri.isDocumentKey(i)||(i=i.child(""));var a=new Vu(new ri(i),0),o=new Ei(Wr);return this.gs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t._s)),!0)}),a),vi.resolve(this.Is(o))}},{key:"Is",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ys(t);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(t,e){var n=this;Nr(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return vi.forEach(e.mutations,(function(i){var a=new Vu(i.key,e.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(t){}},{key:"containsKey",value:function(t,e){var n=new Vu(e,0),r=this.gs.firstAfterOrEqual(n);return vi.resolve(e.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(t){return this.mutationQueue.length,vi.resolve()}},{key:"Ts",value:function(t,e){return this.ps(t)}},{key:"ps",value:function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}},{key:"ys",value:function(t){var e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}]),t}(),Bu=function(){function t(e){(0,d.Z)(this,t),this.Es=e,this.docs=new ki(ri.comparator),this.size=0}return(0,p.Z)(t,[{key:"setIndexManager",value:function(t){this.indexManager=t}},{key:"addEntry",value:function(t,e){var n=e.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}},{key:"removeEntry",value:function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}},{key:"getEntry",value:function(t,e){var n=this.docs.get(e);return vi.resolve(n?n.document.mutableCopy():na.newInvalidDocument(e))}},{key:"getEntries",value:function(t,e){var n=this,r=_o();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.mutableCopy():na.newInvalidDocument(t))})),vi.resolve(r)}},{key:"getAllFromCollection",value:function(t,e,n){for(var r=_o(),i=new ri(e.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!e.isPrefixOf(u.path))break;u.path.length>e.length+1||si(oi(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return vi.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(t,e,n,r){Fr()}},{key:"As",value:function(t,e){return vi.forEach(this.docs,(function(t){return e(t)}))}},{key:"newChangeBuffer",value:function(t){return new qu(this)}},{key:"getSize",value:function(t){return vi.resolve(this.size)}}]),t}(),qu=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this)).Yn=t,r}return(0,p.Z)(n,[{key:"applyChanges",value:function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(e.Yn.addEntry(t,i)):e.Yn.removeEntry(r)})),vi.waitFor(n)}},{key:"getFromCache",value:function(t,e){return this.Yn.getEntry(t,e)}},{key:"getAllFromCache",value:function(t,e){return this.Yn.getEntries(t,e)}}]),n}(Nu),zu=function(){function t(e){(0,d.Z)(this,t),this.persistence=e,this.Rs=new Eo((function(t){return aa(t)}),oa),this.lastRemoteSnapshotVersion=Yr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Pu,this.targetCount=0,this.vs=Fu.Pn()}return(0,p.Z)(t,[{key:"forEachTarget",value:function(t,e){return this.Rs.forEach((function(t,n){return e(n)})),vi.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(t){return vi.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(t){return vi.resolve(this.bs)}},{key:"allocateTargetId",value:function(t){return this.highestTargetId=this.vs.next(),vi.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.bs&&(this.bs=e),vi.resolve()}},{key:"Dn",value:function(t){this.Rs.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.vs=new Fu(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}},{key:"addTargetData",value:function(t,e){return this.Dn(e),this.targetCount+=1,vi.resolve()}},{key:"updateTargetData",value:function(t,e){return this.Dn(e),vi.resolve()}},{key:"removeTargetData",value:function(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,vi.resolve()}},{key:"removeTargets",value:function(t,e,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(t,u.targetId)),i++)})),vi.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(t){return vi.resolve(this.targetCount)}},{key:"getTargetData",value:function(t,e){var n=this.Rs.get(e)||null;return vi.resolve(n)}},{key:"addMatchingKeys",value:function(t,e,n){return this.Ps.us(e,n),vi.resolve()}},{key:"removeMatchingKeys",value:function(t,e,n){this.Ps.hs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),vi.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(t,e){return this.Ps.ls(e),vi.resolve()}},{key:"getMatchingKeysForTargetId",value:function(t,e){var n=this.Ps.ds(e);return vi.resolve(n)}},{key:"containsKey",value:function(t,e){return vi.resolve(this.Ps.containsKey(e))}}]),t}(),Ku=function(){function t(e,n){var r=this;(0,d.Z)(this,t),this.Vs={},this.overlays={},this.Ss=new pi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new zu(this),this.indexManager=new Cu,this.remoteDocumentCache=new Bu((function(t){return r.referenceDelegate.xs(t)})),this.It=new Iu(n),this.Ns=new Lu(this.It)}return(0,p.Z)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(t){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(t){var e=this.overlays[t.toKey()];return e||(e=new Mu,this.overlays[t.toKey()]=e),e}},{key:"getMutationQueue",value:function(t,e){var n=this.Vs[t.toKey()];return n||(n=new Uu(e,this.referenceDelegate),this.Vs[t.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(t,e,n){var r=this;Ar("MemoryPersistence","Starting transaction:",t);var i=new Gu(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(t){return r.referenceDelegate.Os(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))}},{key:"Ms",value:function(t,e){return vi.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(t,e)}})))}}]),t}(),Gu=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this)).currentSequenceNumber=t,r}return(0,p.Z)(n)}(li),Hu=function(){function t(e){(0,d.Z)(this,t),this.persistence=e,this.Fs=new Pu,this.$s=null}return(0,p.Z)(t,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Fr()}},{key:"addReference",value:function(t,e,n){return this.Fs.addReference(n,e),this.Ls.delete(n.toString()),vi.resolve()}},{key:"removeReference",value:function(t,e,n){return this.Fs.removeReference(n,e),this.Ls.add(n.toString()),vi.resolve()}},{key:"markPotentiallyOrphaned",value:function(t,e){return this.Ls.add(e.toString()),vi.resolve()}},{key:"removeTarget",value:function(t,e){var n=this;this.Fs.ls(e.targetId).forEach((function(t){return n.Ls.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.Ls.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vi.forEach(this.Ls,(function(r){var i=ri.fromPath(r);return e.Us(t,i).next((function(t){t||n.removeEntry(i,Yr.min())}))})).next((function(){return e.$s=null,n.apply(t)}))}},{key:"updateLimboDocument",value:function(t,e){var n=this;return this.Us(t,e).next((function(t){t?n.Ls.delete(e.toString()):n.Ls.add(e.toString())}))}},{key:"xs",value:function(t){return 0}},{key:"Us",value:function(t,e){var n=this;return vi.or([function(){return vi.resolve(n.Fs.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Ms(t,e)}])}}],[{key:"Bs",value:function(e){return new t(e)}}]),t}();var $u=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}return(0,p.Z)(t,null,[{key:"Ci",value:function(e,n){var r,i=Fo(),a=Fo(),o=(0,s.Z)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new t(e,n.fromCache,i,a)}}]),t}(),Wu=function(){function t(){(0,d.Z)(this,t),this.xi=!1}return(0,p.Z)(t,[{key:"initialize",value:function(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,r){var i=this;return this.ki(t,e).next((function(a){return a||i.Oi(t,e,r,n)})).next((function(n){return n||i.Mi(t,e)}))}},{key:"ki",value:function(t,e){var n=this;if(Ta(e))return vi.resolve(null);var r=Ca(e);return this.indexManager.getIndexType(t,r).next((function(i){return 0===i?null:(null!==e.limit&&1===i&&(e=Da(e,null,"F"),r=Ca(e)),n.indexManager.getDocumentsMatchingTarget(t,r).next((function(i){var a=Fo.apply(void 0,(0,v.Z)(i));return n.Ni.getDocuments(t,a).next((function(i){return n.indexManager.getMinOffset(t,r).next((function(r){var o=n.Fi(e,i);return n.$i(e,o,a,r.readTime)?n.ki(t,Da(e,null,"F")):n.Bi(t,o,e,r)}))}))})))}))}},{key:"Oi",value:function(t,e,n,r){var i=this;return Ta(e)||r.isEqual(Yr.min())?this.Mi(t,e):this.Ni.getDocuments(t,n).next((function(a){var o=i.Fi(e,a);return i.$i(e,o,n,r)?i.Mi(t,e):(Zr()<=m.in.DEBUG&&Ar("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Na(e)),i.Bi(t,o,e,ai(r,-1)))}))}},{key:"Fi",value:function(t,e){var n=new Ei(La(t));return e.forEach((function(e,r){Ra(t,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;var i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(t,e){return Zr()<=m.in.DEBUG&&Ar("QueryEngine","Using full collection scan to execute query:",Na(e)),this.Ni.getDocumentsMatchingQuery(t,e,ui.min())}},{key:"Bi",value:function(t,e,n,r){return this.Ni.getDocumentsMatchingQuery(t,n,r).next((function(t){return e.forEach((function(e){t=t.insert(e.key,e)})),t}))}}]),t}(),Qu=function(){function t(e,n,r,i){(0,d.Z)(this,t),this.persistence=e,this.Li=n,this.It=i,this.Ui=new ki(Wr),this.qi=new Eo((function(t){return aa(t)}),oa),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}return(0,p.Z)(t,[{key:"Qi",value:function(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ju(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Ui)}))}}]),t}();function Xu(t,e,n,r){return new Qu(t,e,n,r)}function Yu(t,e){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Rr(e),t.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.mutationQueue.getAllMutationBatches(t).next((function(i){return e=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(t)})).next((function(n){var i,a=[],o=[],u=Fo(),c=(0,s.Z)(e);try{for(c.s();!(i=c.n()).done;){var l=i.value;a.push(l.batchId);var f,h=(0,s.Z)(l.mutations);try{for(h.s();!(f=h.n()).done;){var v=f.value;u=u.add(v.key)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){c.e(b)}finally{c.f()}var d,p=(0,s.Z)(n);try{for(p.s();!(d=p.n()).done;){var y=d.value;o.push(y.batchId);var g,m=(0,s.Z)(y.mutations);try{for(m.s();!(g=m.n()).done;){var k=g.value;u=u.add(k.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(t,u).next((function(t){return{ji:t,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),Ju.apply(this,arguments)}function ts(t,e){var n=Rr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,a=i.keys(),o=vi.resolve();return a.forEach((function(t){o=o.next((function(){return r.getEntry(e,t)})).next((function(e){var a=n.docVersions.get(t);Nr(null!==a),e.version.compareTo(a)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((function(){return t.mutationQueue.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){for(var e=Fo(),n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))})).next((function(){return n.localDocuments.getDocuments(t,r)}))}))}function es(t){var e=Rr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Cs.getLastRemoteSnapshotVersion(t)}))}function ns(t,e){var n=Rr(t),r=e.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];e.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(t,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(t,a.addedDocuments,u)})));var c=s.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(u)?c=c.withResumeToken(Ti.EMPTY_BYTE_STRING,Yr.min()).withLastLimboFreeSnapshotVersion(Yr.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(t,c))}}));var u=_o(),s=Fo();if(e.documentUpdates.forEach((function(r){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(rs(t,a,e.documentUpdates).next((function(t){u=t.Wi,s=t.zi}))),!r.isEqual(Yr.min())){var c=n.Cs.getLastRemoteSnapshotVersion(t).next((function(e){return n.Cs.setTargetsMetadata(t,t.currentSequenceNumber,r)}));o.push(c)}return vi.waitFor(o).next((function(){return a.apply(t)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(t,u,s)})).next((function(){return u}))})).then((function(t){return n.Ui=i,t}))}function rs(t,e,n){var r=Fo(),i=Fo();return n.forEach((function(t){return r=r.add(t)})),e.getEntries(t,r).next((function(t){var r=_o();return n.forEach((function(n,a){var o=t.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Yr.min())?(e.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(a),r=r.insert(n,a)):Ar("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function is(t,e){var n=Rr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)}))}function as(t,e){var n=Rr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Cs.getTargetData(t,e).next((function(i){return i?(r=i,vi.resolve(r)):n.Cs.allocateTargetId(t).next((function(i){return r=new Su(e,i,0,t.currentSequenceNumber),n.Cs.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ui.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(t.targetId,t),n.qi.set(e,t.targetId)),t}))}function os(t,e,n){return us.apply(this,arguments)}function us(){return us=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Rr(e),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",t.prev=1,t.t0=r,t.t0){t.next=6;break}return t.next=6,i.persistence.runTransaction("Release target",o,(function(t){return i.persistence.referenceDelegate.removeTarget(t,a)}));case 6:t.next=13;break;case 8:if(t.prev=8,t.t1=t.catch(1),di(t.t1)){t.next=12;break}throw t.t1;case 12:Ar("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(t.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),us.apply(this,arguments)}function ss(t,e,n){var r=Rr(t),i=Yr.min(),a=Fo();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Rr(t),i=r.qi.get(n);return void 0!==i?vi.resolve(r.Ui.get(i)):r.Cs.getTargetData(e,n)}(r,t,Ca(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(t,e.targetId).next((function(t){a=t}))})).next((function(){return r.Li.getDocumentsMatchingQuery(t,e,n?i:Yr.min(),n?a:Fo())})).next((function(t){return cs(r,ja(e),t),{documents:t,Hi:a}}))}))}function cs(t,e,n){var r=t.Ki.get(e)||Yr.min();n.forEach((function(t,e){e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Ki.set(e,r)}var ls=function(){function t(){(0,d.Z)(this,t),this.activeTargetIds=Ro()}return(0,p.Z)(t,[{key:"er",value:function(t){this.activeTargetIds=this.activeTargetIds.add(t)}},{key:"nr",value:function(t){this.activeTargetIds=this.activeTargetIds.delete(t)}},{key:"tr",value:function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}]),t}(),fs=function(){function t(){(0,d.Z)(this,t),this.Lr=new ls,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,p.Z)(t,[{key:"addPendingMutation",value:function(t){}},{key:"updateMutationState",value:function(t,e,n){}},{key:"addLocalQueryTarget",value:function(t){return this.Lr.er(t),this.Ur[t]||"not-current"}},{key:"updateQueryState",value:function(t,e,n){this.Ur[t]=e}},{key:"removeLocalQueryTarget",value:function(t){this.Lr.nr(t)}},{key:"isLocalQueryTarget",value:function(t){return this.Lr.activeTargetIds.has(t)}},{key:"clearQueryState",value:function(t){delete this.Ur[t]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(t){return this.Lr.activeTargetIds.has(t)}},{key:"start",value:function(){return this.Lr=new ls,Promise.resolve()}},{key:"handleUserChange",value:function(t,e,n){}},{key:"setOnlineState",value:function(t){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(t){}},{key:"notifyBundleLoaded",value:function(t){}}]),t}(),hs=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,[{key:"qr",value:function(t){}},{key:"shutdown",value:function(){}}]),t}(),vs=function(){function t(){var e=this;(0,d.Z)(this,t),this.Kr=function(){return e.Gr()},this.Qr=function(){return e.jr()},this.Wr=[],this.zr()}return(0,p.Z)(t,[{key:"qr",value:function(t){this.Wr.push(t)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Ar("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var t,e=(0,s.Z)(this.Wr);try{for(e.s();!(t=e.n()).done;){(0,t.value)(0)}}catch(n){e.e(n)}finally{e.f()}}},{key:"jr",value:function(){Ar("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var t,e=(0,s.Z)(this.Wr);try{for(e.s();!(t=e.n()).done;){(0,t.value)(1)}}catch(n){e.e(n)}finally{e.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),ds={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ps=function(){function t(e){(0,d.Z)(this,t),this.Hr=e.Hr,this.Jr=e.Jr}return(0,p.Z)(t,[{key:"Yr",value:function(t){this.Xr=t}},{key:"Zr",value:function(t){this.eo=t}},{key:"onMessage",value:function(t){this.no=t}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(t){this.Hr(t)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(t){this.eo(t)}},{key:"ro",value:function(t){this.no(t)}}]),t}(),ys=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this,t)).forceLongPolling=t.forceLongPolling,r.autoDetectLongPolling=t.autoDetectLongPolling,r.useFetchStreams=t.useFetchStreams,r}return(0,p.Z)(n,[{key:"fo",value:function(t,e,n,r){return new Promise((function(i,a){var o=new xr;o.setWithCredentials(!0),o.listenOnce(mr.COMPLETE,(function(){var e;try{switch(o.getLastErrorCode()){case gr.NO_ERROR:var n=o.getResponseJson();Ar("Connection","XHR received:",JSON.stringify(n)),i(n);break;case gr.TIMEOUT:Ar("Connection",'RPC "'+t+'" timed out'),a(new Lr(jr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var r=o.getStatus();if(Ar("Connection",'RPC "'+t+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var u=o.getResponseJson();Array.isArray(u)&&(u=u[0]);var s=null===(e=u)||void 0===e?void 0:e.error;if(s&&s.status&&s.message){var c=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(jr).indexOf(e)>=0?e:jr.UNKNOWN}(s.status);a(new Lr(c,s.message))}else a(new Lr(jr.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Lr(jr.UNAVAILABLE,"Connection failed."));break;default:Fr()}}finally{Ar("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);o.send(e,"POST",u,n,15)}))}},{key:"wo",value:function(t,e,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=pr(),a=yr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new wr({})),this.lo(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Ar("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ps({Hr:function(t){l?Ar("Connection","Not sending because WebChannel is closed:",t):(c||(Ar("Connection","Opening WebChannel transport."),s.open(),c=!0),Ar("Connection","WebChannel sending:",t),s.send(t))},Jr:function(){return s.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(s,Er.EventType.OPEN,(function(){l||Ar("Connection","WebChannel transport opened.")})),h(s,Er.EventType.CLOSE,(function(){l||(l=!0,Ar("Connection","WebChannel transport closed"),f.io())})),h(s,Er.EventType.ERROR,(function(t){l||(l=!0,Dr("Connection","WebChannel transport errored:",t),f.io(new Lr(jr.UNAVAILABLE,"The operation could not be completed")))})),h(s,Er.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Nr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ar("Connection","WebChannel received error:",i);var a=i.status,o=function(t){var e=po[t];if(void 0!==e)return wo(e)}(a),u=i.message;void 0===o&&(o=jr.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Lr(o,u)),s.close()}else Ar("Connection","WebChannel received:",n),f.ro(n)}})),h(a,kr.STAT_EVENT,(function(t){t.stat===br.PROXY?Ar("Connection","Detected buffering proxy"):t.stat===br.NOPROXY&&Ar("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function t(e){(0,d.Z)(this,t),this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,p.Z)(t,[{key:"co",get:function(){return!1}},{key:"ao",value:function(t,e,n,r,i){var a=this.ho(t,e);Ar("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(t,a,o,n).then((function(t){return Ar("RestConnection","Received: ",t),t}),(function(e){throw Dr("RestConnection","".concat(t," failed with error: "),e,"url: ",a,"request:",n),e}))}},{key:"_o",value:function(t,e,n,r,i,a){return this.ao(t,e,n,r,i)}},{key:"lo",value:function(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Sr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((function(e,n){return t[n]=e})),n&&n.headers.forEach((function(e,n){return t[n]=e}))}},{key:"ho",value:function(t,e){var n=ds[t];return"".concat(this.oo,"/v1/").concat(e,":").concat(n)}}]),t}());function gs(){return"undefined"!=typeof document?document:null}function ms(t){return new Ho(t,!0)}var ks=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,d.Z)(this,t),this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return(0,p.Z)(t,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(t){var e=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Ar("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return e.Eo=Date.now(),t()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),t}(),bs=function(){function t(e,n,r,i,a,o,u,s){(0,d.Z)(this,t),this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ks(e,n)}return(0,p.Z)(t,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.No(),!t.t0){t.next=4;break}return t.next=4,this.close(0);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var t=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return t.$o()})))}},{key:"Bo",value:function(t){this.Lo(),this.stream.send(t)}},{key:"$o",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ko()){t.next=2;break}return t.abrupt("return",this.close(0));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==e?this.xo.reset():n&&n.code===jr.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===jr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,t.next=9,this.listener.Zr(n);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(e){var r=(0,u.Z)(e,2),i=r[0],a=r[1];t.So===n&&t.Go(i,a)}),(function(n){e((function(){var e=new Lr(jr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Qo(e)}))}))}},{key:"Go",value:function(t,e){var n=this,r=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(t){r((function(){return n.Qo(t)}))})),this.stream.onMessage((function(t){r((function(){return n.onMessage(t)}))}))}},{key:"Oo",value:function(){var t=this;this.state=5,this.xo.Ro((0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),e)}))))}},{key:"Qo",value:function(t){return Ar("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}},{key:"Ko",value:function(t){var e=this;return function(n){e.Hs.enqueueAndForget((function(){return e.So===t?n():(Ar("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),ws=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a,o,u){var s;return(0,d.Z)(this,n),(s=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return(0,p.Z)(n,[{key:"jo",value:function(t,e){return this.connection.wo("Listen",t,e)}},{key:"onMessage",value:function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Fr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(t,e){return t.gt?(Nr(void 0===e||"string"==typeof e),Ti.fromBase64String(e||"")):(Nr(void 0===e||e instanceof Uint8Array),Ti.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(t){var e=void 0===t.code?jr.UNKNOWN:wo(t.code);return new Lr(e,t.message||"")}(o);n=new Vo(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;var s=e.documentChange;s.document,s.document.name,s.document.updateTime;var c=eu(t,s.document.name),l=Xo(s.document.updateTime),f=new ta({mapValue:{fields:s.document.fields}}),h=na.newFoundDocument(c,l,f),v=s.targetIds||[],d=s.removedTargetIds||[];n=new Mo(v,d,h.key,h)}else if("documentDelete"in e){e.documentDelete;var p=e.documentDelete;p.document;var y=eu(t,p.document),g=p.readTime?Xo(p.readTime):Yr.min(),m=na.newNoDocument(y,g),k=p.removedTargetIds||[];n=new Mo([],k,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=eu(t,b.document),E=b.removedTargetIds||[];n=new Mo([],E,w,null)}else{if(!("filter"in e))return Fr();e.filter;var x=e.filter;x.targetId;var _=x.count||0,T=new ko(_),S=x.targetId;n=new Po(S,T)}return n}(this.It,t),n=function(t){if(!("targetChange"in t))return Yr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Yr.min():e.readTime?Xo(e.readTime):Yr.min()}(t);return this.listener.Wo(e,n)}},{key:"zo",value:function(t){var e={};e.database=iu(this.It),e.addTarget=function(t,e){var n,r=e.target;return(n=ua(r)?{documents:su(t,r)}:{query:cu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Wo(t,e.resumeToken):e.snapshotVersion.compareTo(Yr.min())>0&&(n.readTime=$o(t,e.snapshotVersion.toTimestamp())),n}(this.It,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,t);n&&(e.labels=n),this.Bo(e)}},{key:"Ho",value:function(t){var e={};e.database=iu(this.It),e.removeTarget=t,this.Bo(e)}}]),n}(bs),Es=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a,o,u){var s;return(0,d.Z)(this,n),(s=e.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return(0,p.Z)(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,(0,a.Z)((0,o.Z)(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(t,e){return this.connection.wo("Write",t,e)}},{key:"onMessage",value:function(t){if(Nr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();var e=function(t,e){return t&&t.length>0?(Nr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Xo(t.updateTime):Xo(e);return n.isEqual(Yr.min())&&(n=Xo(e)),new to(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Xo(t.commitTime);return this.listener.Zo(n,e)}return Nr(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var t={};t.database=iu(this.It),this.Bo(t)}},{key:"Xo",value:function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return uu(e.It,t)}))};this.Bo(n)}}]),n}(bs),xs=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a){var o;return(0,d.Z)(this,n),(o=e.call(this)).authCredentials=t,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return(0,p.Z)(n,[{key:"su",value:function(){if(this.nu)throw new Lr(jr.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(t,e,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,u.Z)(i,2),o=a[0],s=a[1];return r.connection.ao(t,e,n,o,s)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===jr.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),t):new Lr(jr.UNKNOWN,t.toString())}))}},{key:"_o",value:function(t,e,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,u.Z)(a,2),s=o[0],c=o[1];return i.connection._o(t,e,n,s,c,r)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===jr.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),t):new Lr(jr.UNKNOWN,t.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return(0,p.Z)((function t(){(0,d.Z)(this,t)}))}());var _s=function(){function t(e,n){(0,d.Z)(this,t),this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return(0,p.Z)(t,[{key:"uu",value:function(){var t=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.ru=null,t.au("Backend didn't respond within 10 seconds."),t.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.cu("Offline")))}},{key:"set",value:function(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}},{key:"cu",value:function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}},{key:"au",value:function(t){var e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Cr(e),this.ou=!1):Ar("OnlineStateTracker",e)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),t}(),Ts=(0,p.Z)((function t(e,n,r,i,a){var o=this;(0,d.Z)(this,t),this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(t){r.enqueueAndForget((0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=js(o),!t.t0){t.next=5;break}return Ar("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Rr(e))._u.add(4),t.next=4,Zs(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),t.next=8,Ss(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(o);case 5:case"end":return t.stop()}}),t)}))))})),this.gu=new _s(r,i)}));function Ss(t){return Is.apply(this,arguments)}function Is(){return Is=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!js(e)){t.next=18;break}n=(0,s.Z)(e.wu),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=10;break}return i=r.value,t.next=8,i(!0);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])}))),Is.apply(this,arguments)}function Zs(t){return As.apply(this,arguments)}function As(){return As=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,s.Z)(e.wu),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return i=r.value,t.next=7,i(!1);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))),As.apply(this,arguments)}function Cs(t,e){var n=Rr(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Rs(n)?Ns(n):fc(n).ko()&&Os(n,e))}function Ds(t,e){var n=Rr(t),r=fc(n);n.du.delete(e),r.ko()&&Fs(n,e),0===n.du.size&&(r.ko()?r.Fo():js(n)&&n.gu.set("Unknown"))}function Os(t,e){t.yu.Mt(e.targetId),fc(t).zo(e)}function Fs(t,e){t.yu.Mt(e),fc(t).Ho(e)}function Ns(t){t.yu=new Bo({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},se:function(e){return t.du.get(e)||null}}),fc(t).start(),t.gu.uu()}function Rs(t){return js(t)&&!fc(t).No()&&t.du.size>0}function js(t){return 0===Rr(t)._u.size}function Ls(t){t.yu=void 0}function Ms(t){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.du.forEach((function(t,n){Os(e,t)}));case 1:case"end":return t.stop()}}),t)}))),Ps.apply(this,arguments)}function Vs(t,e){return Us.apply(this,arguments)}function Us(){return Us=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ls(e),Rs(e)?(e.gu.hu(n),Ns(e)):e.gu.set("Unknown");case 1:case"end":return t.stop()}}),t)}))),Us.apply(this,arguments)}function Bs(t,e,n){return qs.apply(this,arguments)}function qs(){return qs=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.gu.set("Online"),!(n instanceof Vo&&2===n.state&&n.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.cause,i=(0,s.Z)(n.targetIds),t.prev=2,i.s();case 4:if((a=i.n()).done){t.next=14;break}if(o=a.value,t.t0=e.du.has(o),!t.t0){t.next=12;break}return t.next=10,e.remoteSyncer.rejectListen(o,r);case 10:e.du.delete(o),e.yu.removeTarget(o);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),i.e(t.t1);case 19:return t.prev=19,i.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Ar("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),t.t0),t.next=11,zs(e,t.t0);case 11:case 22:t.next=29;break;case 13:if(n instanceof Mo?e.yu.Gt(n):n instanceof Po?e.yu.Yt(n):e.yu.Wt(n),r.isEqual(Yr.min())){t.next=29;break}return t.prev=14,t.next=17,es(e.localStore);case 17:if(i=t.sent,t.t1=r.compareTo(i)>=0,!t.t1){t.next=22;break}return t.next=22,function(t,e){var n=t.yu.te(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.du.get(r);i&&t.du.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.du.get(e);if(n){t.du.set(e,n.withResumeToken(Ti.EMPTY_BYTE_STRING,n.snapshotVersion)),Fs(t,e);var r=new Su(n.target,e,1,n.sequenceNumber);Os(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(e,r);case 24:return t.prev=24,t.t2=t.catch(14),Ar("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,zs(e,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),qs.apply(this,arguments)}function zs(t,e,n){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(di(n)){t.next=2;break}throw n;case 2:return e._u.add(1),t.next=5,Zs(e);case 5:e.gu.set("Offline"),r||(r=function(){return es(e.localStore)}),e.asyncQueue.enqueueRetryable((0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ar("RemoteStore","Retrying IndexedDB access"),t.next=3,r();case 3:return e._u.delete(1),t.next=6,Ss(e);case 6:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)}))),Ks.apply(this,arguments)}function Gs(t,e){return e().catch((function(n){return zs(t,n,e)}))}function Hs(t){return $s.apply(this,arguments)}function $s(){return $s=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Rr(e),r=hc(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Ws(n)){t.next=19;break}return t.prev=3,t.next=6,is(n.localStore,i);case 6:if(null!==(a=t.sent)){t.next=10;break}return 0===n.fu.length&&r.Fo(),t.abrupt("break",19);case 10:i=a.batchId,Qs(n,a),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(3),t.next=17,zs(n,t.t0);case 17:t.next=2;break;case 19:Xs(n)&&Ys(n);case 20:case"end":return t.stop()}}),t,null,[[3,13]])}))),$s.apply(this,arguments)}function Ws(t){return js(t)&&t.fu.length<10}function Qs(t,e){t.fu.push(e);var n=hc(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Xs(t){return js(t)&&!hc(t).No()&&t.fu.length>0}function Ys(t){hc(t).start()}function Js(t){return tc.apply(this,arguments)}function tc(){return tc=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:hc(e).eu();case 1:case"end":return t.stop()}}),t)}))),tc.apply(this,arguments)}function ec(t){return nc.apply(this,arguments)}function nc(){return nc=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=hc(e),r=(0,s.Z)(e.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return t.stop()}}),t)}))),nc.apply(this,arguments)}function rc(t,e,n){return ic.apply(this,arguments)}function ic(){return ic=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.fu.shift(),a=_u.from(i,n,r),t.next=3,Gs(e,(function(){return e.remoteSyncer.applySuccessfulWrite(a)}));case 3:return t.next=5,Hs(e);case 5:case"end":return t.stop()}}),t)}))),ic.apply(this,arguments)}function ac(t,e){return oc.apply(this,arguments)}function oc(){return oc=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n&&hc(e).Yo,!t.t0){t.next=4;break}return t.next=4,function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!bo(i=n.code)||i===jr.ABORTED){t.next=7;break}return r=e.fu.shift(),hc(e).Mo(),t.next=5,Gs(e,(function(){return e.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return t.next=7,Hs(e);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:Xs(e)&&Ys(e);case 5:case"end":return t.stop()}}),t)}))),oc.apply(this,arguments)}function uc(t,e){return sc.apply(this,arguments)}function sc(){return sc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Rr(e)).asyncQueue.verifyOperationInProgress(),Ar("RemoteStore","RemoteStore received new credentials"),i=js(r),r._u.add(3),t.next=6,Zs(r);case 6:return i&&r.gu.set("Unknown"),t.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),t.next=12,Ss(r);case 12:case"end":return t.stop()}}),t)}))),sc.apply(this,arguments)}function cc(t,e){return lc.apply(this,arguments)}function lc(){return lc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Rr(e),!n){t.next=7;break}return r._u.delete(2),t.next=5,Ss(r);case 5:t.next=13;break;case 7:if(t.t0=n,t.t0){t.next=13;break}return r._u.add(2),t.next=12,Zs(r);case 12:r.gu.set("Unknown");case 13:case"end":return t.stop()}}),t)}))),lc.apply(this,arguments)}function fc(t){return t.pu||(t.pu=function(t,e,n){var r=Rr(t);return r.su(),new ws(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(t.datastore,t.asyncQueue,{Yr:Ms.bind(null,t),Zr:Vs.bind(null,t),Wo:Bs.bind(null,t)}),t.wu.push(function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}t.pu.Mo(),Rs(t)?Ns(t):t.gu.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.pu.stop();case 6:Ls(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.pu}function hc(t){return t.Iu||(t.Iu=function(t,e,n){var r=Rr(t);return r.su(),new Es(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(t.datastore,t.asyncQueue,{Yr:Js.bind(null,t),Zr:ac.bind(null,t),tu:ec.bind(null,t),Zo:rc.bind(null,t)}),t.wu.push(function(){var e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return t.Iu.Mo(),e.next=4,Hs(t);case 4:e.next=9;break;case 6:return e.next=8,t.Iu.stop();case 8:t.fu.length>0&&(Ar("RemoteStore","Stopping write stream with ".concat(t.fu.length," pending writes")),t.fu=[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.Iu}var vc=function(){function t(e,n,r,i,a){(0,d.Z)(this,t),this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return(0,p.Z)(t,[{key:"start",value:function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lr(jr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}},{key:"handleDelayElapsed",value:function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(e,n,r,i,a){var o=new t(e,n,Date.now()+r,i,a);return o.start(r),o}}]),t}();function dc(t,e){if(Cr("AsyncQueue","".concat(e,": ").concat(t)),di(t))return new Lr(jr.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}var pc=function(){function t(e){(0,d.Z)(this,t),this.comparator=e?function(t,n){return e(t,n)||ri.comparator(t.key,n.key)}:function(t,e){return ri.comparator(t.key,e.key)},this.keyedMap=So(),this.sortedSet=new ki(this.comparator)}return(0,p.Z)(t,[{key:"has",value:function(t){return null!=this.keyedMap.get(t)}},{key:"get",value:function(t){return this.keyedMap.get(t)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"add",value:function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}},{key:"delete",value:function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),yc=function(){function t(){(0,d.Z)(this,t),this.Tu=new ki(ri.comparator)}return(0,p.Z)(t,[{key:"track",value:function(t){var e=t.doc.key,n=this.Tu.get(e);n?0!==t.type&&3===n.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==n.type?this.Tu=this.Tu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Tu=this.Tu.remove(e):1===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):Fr():this.Tu=this.Tu.insert(e,t)}},{key:"Eu",value:function(){var t=[];return this.Tu.inorderTraversal((function(e,n){t.push(n)})),t}}]),t}(),gc=function(){function t(e,n,r,i,a,o,u,s,c){(0,d.Z)(this,t),this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return(0,p.Z)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i,a){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,pc.emptySet(n),o,r,i,!0,!1,a)}}]),t}(),mc=(0,p.Z)((function t(){(0,d.Z)(this,t),this.Au=void 0,this.listeners=[]})),kc=(0,p.Z)((function t(){(0,d.Z)(this,t),this.queries=new Eo((function(t){return Fa(t)}),Oa),this.onlineState="Unknown",this.Ru=new Set}));function bc(t,e){return wc.apply(this,arguments)}function wc(){return wc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Rr(e),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new mc),!a){t.next=13;break}return t.prev=3,t.next=6,r.onListen(i);case 6:o.Au=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),u=dc(t.t0,"Initialization of query '".concat(Na(n.query),"' failed")),t.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Sc(r);case 14:case"end":return t.stop()}}),t,null,[[3,9]])}))),wc.apply(this,arguments)}function Ec(t,e){return xc.apply(this,arguments)}function xc(){return xc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Rr(e),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){t.next=6;break}return t.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return t.stop()}}),t)}))),xc.apply(this,arguments)}function _c(t,e){var n,r=Rr(t),i=!1,a=(0,s.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,c=r.queries.get(u);if(c){var l,f=(0,s.Z)(c.listeners);try{for(f.s();!(l=f.n()).done;){l.value.Pu(o)&&(i=!0)}}catch(h){f.e(h)}finally{f.f()}c.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Sc(r)}function Tc(t,e,n){var r=Rr(t),i=r.queries.get(e);if(i){var a,o=(0,s.Z)(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(e)}function Sc(t){t.Ru.forEach((function(t){t.next()}))}var Ic=function(){function t(e,n,r){(0,d.Z)(this,t),this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return(0,p.Z)(t,[{key:"Pu",value:function(t){if(!this.options.includeMetadataChanges){var e,n=[],r=(0,s.Z)(t.docChanges);try{for(r.s();!(e=r.n()).done;){var i=e.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}t=new gc(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}var a=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),a=!0):this.Cu(t,this.onlineState)&&(this.xu(t),a=!0),this.Su=t,a}},{key:"onError",value:function(t){this.vu.error(t)}},{key:"bu",value:function(t){this.onlineState=t;var e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}},{key:"Cu",value:function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return(!this.options.Nu||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}},{key:"Du",value:function(t){if(t.docChanges.length>0)return!0;var e=this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(t){t=gc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}]),t}();var Zc=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.key=e})),Ac=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.key=e})),Cc=function(){function t(e,n){(0,d.Z)(this,t),this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Fo(),this.mutatedKeys=Fo(),this.Gu=La(e),this.Qu=new pc(this.Gu)}return(0,p.Z)(t,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(t,e){var n=this,r=e?e.zu:new yc,i=e?e.Qu:this.Qu,a=e?e.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),f=Ra(n.query,e)?e:null,h=!!l&&n.mutatedKeys.has(l.key),v=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),d=!1;l&&f?l.data.isEqual(f.data)?h!==v&&(r.track({type:3,doc:f}),d=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),d=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),d=!0):l&&!f&&(r.track({type:1,doc:l}),d=!0,(s||c)&&(u=!0)),d&&(f?(o=o.add(f),a=v?a.add(t):a.delete(t)):(o=o.delete(t),a=a.delete(t)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}},{key:"applyChanges",value:function(t,e,n){var r=this,i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;var a=t.zu.Eu();a.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fr()}};return n(t)-n(e)}(t.type,e.type)||r.Gu(t.doc,e.doc)})),this.Ju(n);var o=e?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new gc(this.query,t.Qu,i,a,t.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yc,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}},{key:"Ju",value:function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.Uu=e.Uu.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.Uu=e.Uu.delete(t)})),this.current=t.current)}},{key:"Yu",value:function(){var t=this;if(!this.current)return[];var e=this.Ku;this.Ku=Fo(),this.Qu.forEach((function(e){t.Zu(e.key)&&(t.Ku=t.Ku.add(e.key))}));var n=[];return e.forEach((function(e){t.Ku.has(e)||n.push(new Ac(e))})),this.Ku.forEach((function(t){e.has(t)||n.push(new Zc(t))})),n}},{key:"tc",value:function(t){this.Uu=t.Hi,this.Ku=Fo();var e=this.Wu(t.documents);return this.applyChanges(e,!0)}},{key:"ec",value:function(){return gc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),t}(),Dc=(0,p.Z)((function t(e,n,r){(0,d.Z)(this,t),this.query=e,this.targetId=n,this.view=r})),Oc=(0,p.Z)((function t(e){(0,d.Z)(this,t),this.key=e,this.nc=!1})),Fc=function(){function t(e,n,r,i,a,o){(0,d.Z)(this,t),this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Eo((function(t){return Fa(t)}),Oa),this.rc=new Map,this.oc=new Set,this.uc=new ki(ri.comparator),this.cc=new Map,this.ac=new Pu,this.hc={},this.lc=new Map,this.fc=Fu.vn(),this.onlineState="Unknown",this.dc=void 0}return(0,p.Z)(t,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),t}();function Nc(t,e){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=cl(e),!(o=r.ic.get(n))){t.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),t.next=15;break;case 6:return t.next=8,as(r.localStore,Ca(n));case 8:return u=t.sent,r.isPrimaryClient&&Cs(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,t.next=14,jc(r,n,i,"current"===s,u.resumeToken);case 14:a=t.sent;case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)}))),Rc.apply(this,arguments)}function jc(t,e,n,r,i){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,i,a){var o,u,s,f,h,v;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._c=function(t,n,r){return function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n,r,i){var a,o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.view.Wu(r),t.t0=a.$i,!t.t0){t.next=6;break}return t.next=5,ss(e.localStore,n.query,!1).then((function(t){var e=t.documents;return n.view.Wu(e,a)}));case 5:a=t.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,e.isPrimaryClient,o),t.abrupt("return",(el(e,n.targetId,u.Xu),u.snapshot));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()(e,t,n,r)},t.next=3,ss(e.localStore,n,!0);case 3:return o=t.sent,u=new Cc(n,o.Hi),s=u.Wu(o.documents),f=Lo.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==e.onlineState,a),h=u.applyChanges(s,e.isPrimaryClient,f),el(e,r,h.Xu),v=new Dc(n,r,u),t.abrupt("return",(e.ic.set(n,v),e.rc.has(r)?e.rc.get(r).push(n):e.rc.set(r,[n]),h.snapshot));case 11:case"end":return t.stop()}}),t)}))),Lc.apply(this,arguments)}function Mc(t,e){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Rr(e),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){t.next=3;break}return t.abrupt("return",(r.rc.set(i.targetId,a.filter((function(t){return!Oa(t,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){t.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),t.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),t.t0){t.next=9;break}return t.next=9,os(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ds(r.remoteStore,i.targetId),Jc(r,i.targetId)})).catch(fi);case 9:t.next=14;break;case 11:return Jc(r,i.targetId),t.next=14,os(r.localStore,i.targetId,!0);case 14:case"end":return t.stop()}}),t)}))),Pc.apply(this,arguments)}function Vc(t,e,n){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=ll(e),t.prev=1,t.next=4,function(t,e){var n,r,i=Rr(t),a=Xr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Fo());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(t){var u=_o(),c=Fo();return i.Gi.getEntries(t,o).next((function(t){(u=t).forEach((function(t,e){e.isValidDocument()||(c=c.add(t))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(t,u)})).next((function(r){n=r;var o,u=[],c=(0,s.Z)(e);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=uo(l,n.get(l.key).overlayedDocument);null!=f&&u.push(new lo(l.key,f,ea(f.value.mapValue),eo.exists(!0)))}}catch(h){c.e(h)}finally{c.f()}return i.mutationQueue.addMutationBatch(t,a,u,e)})).next((function(e){r=e;var a=e.applyToLocalDocumentSet(n,c);return i.documentOverlayCache.saveOverlays(t,e.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Io(n)}}))}(i.localStore,n);case 4:return a=t.sent,i.sharedClientState.addPendingMutation(a.batchId),function(t,e,n){var r=t.hc[t.currentUser.toKey()];r||(r=new ki(Wr)),r=r.insert(e,n),t.hc[t.currentUser.toKey()]=r}(i,a.batchId,r),t.next=9,il(i,a.changes);case 9:return t.next=11,Hs(i.remoteStore);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),o=dc(t.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),Uc.apply(this,arguments)}function Bc(t,e){return qc.apply(this,arguments)}function qc(){return qc=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Rr(e),t.prev=1,t.next=4,ns(r.localStore,n);case 4:return i=t.sent,n.targetChanges.forEach((function(t,e){var n=r.cc.get(e);n&&(Nr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?n.nc=!0:t.modifiedDocuments.size>0?Nr(n.nc):t.removedDocuments.size>0&&(Nr(n.nc),n.nc=!1))})),t.next=8,il(r,i,n);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,fi(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),qc.apply(this,arguments)}function zc(t,e,n){var r=Rr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(t,n){var r=n.view.bu(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Rr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){var i,a=(0,s.Z)(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(e)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Sc(n)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Kc(t,e,n){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a,o,u,s,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=Rr(e)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){t.next=14;break}return u=(u=new ki(ri.comparator)).insert(o,na.newNoDocument(o,Yr.min())),s=Fo().add(o),l=new jo(Yr.min(),new Map,new Ei(Wr),u,s),t.next=9,Bc(i,l);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),rl(i),t.next=16;break;case 14:return t.next=16,os(i.localStore,n,!1).then((function(){return Jc(i,n,r)})).catch(fi);case 16:case"end":return t.stop()}}),t)}))),Gc.apply(this,arguments)}function Hc(t,e){return $c.apply(this,arguments)}function $c(){return $c=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Rr(e),i=n.batch.batchId,t.prev=1,t.next=4,ts(r.localStore,n);case 4:return a=t.sent,Yc(r,i,null),Xc(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),t.next=10,il(r,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,fi(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),$c.apply(this,arguments)}function Wc(t,e,n){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Rr(e),t.prev=1,t.next=4,function(t,e){var n=Rr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.mutationQueue.lookupMutationBatch(t,e).next((function(e){return Nr(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,r,e)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r)})).next((function(){return n.localDocuments.getDocuments(t,r)}))}))}(i.localStore,n);case 4:return a=t.sent,Yc(i,n,r),Xc(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),t.next=10,il(i,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,fi(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),Qc.apply(this,arguments)}function Xc(t,e){(t.lc.get(e)||[]).forEach((function(t){t.resolve()})),t.lc.delete(e)}function Yc(t,e,n){var r=Rr(t),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Jc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);var r,i=(0,s.Z)(t.rc.get(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;t.ic.delete(a),n&&t.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach((function(e){t.ac.containsKey(e)||tl(t,e)}))}function tl(t,e){t.oc.delete(e.path.canonicalString());var n=t.uc.get(e);null!==n&&(Ds(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),rl(t))}function el(t,e,n){var r,i=(0,s.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Zc?(t.ac.addReference(a.key,e),nl(t,a)):a instanceof Ac?(Ar("SyncEngine","Document no longer in limbo: "+a.key),t.ac.removeReference(a.key,e),t.ac.containsKey(a.key)||tl(t,a.key)):Fr()}}catch(o){i.e(o)}finally{i.f()}}function nl(t,e){var n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(Ar("SyncEngine","New document in limbo: "+n),t.oc.add(r),rl(t))}function rl(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){var e=t.oc.values().next().value;t.oc.delete(e);var n=new ri(ti.fromString(e)),r=t.fc.next();t.cc.set(r,new Oc(n)),t.uc=t.uc.insert(n,r),Cs(t.remoteStore,new Su(Ca(_a(n.path)),r,2,pi.at))}}function il(t,e,n){return al.apply(this,arguments)}function al(){return al=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var i,a,o,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Rr(e),a=[],o=[],u=[],t.t0=i.ic.isEmpty(),t.t0){t.next=9;break}return i.ic.forEach((function(t,e){u.push(i._c(e,n,r).then((function(t){if((t||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(e.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){a.push(t);var n=$u.Ci(e.targetId,t);o.push(n)}})))})),t.next=6,Promise.all(u);case 6:return i.sc.Wo(a),t.next=9,function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i,a,o,u,l,f,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Rr(e),t.prev=1,t.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return vi.forEach(n,(function(e){return vi.forEach(e.Si,(function(n){return r.persistence.referenceDelegate.addReference(t,e.targetId,n)})).next((function(){return vi.forEach(e.Di,(function(n){return r.persistence.referenceDelegate.removeReference(t,e.targetId,n)}))}))}))}));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(1),di(t.t0)){t.next=10;break}throw t.t0;case 10:Ar("LocalStore","Failed to update sequence numbers: "+t.t0);case 11:i=(0,s.Z)(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(l=r.Ui.get(u),f=l.snapshotVersion,h=l.withLastLimboFreeSnapshotVersion(f),r.Ui=r.Ui.insert(u,h))}catch(c){i.e(c)}finally{i.f()}case 13:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return t.stop()}}),t)}))),al.apply(this,arguments)}function ol(t,e){return ul.apply(this,arguments)}function ul(){return ul=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=Rr(e)).currentUser.isEqual(n)){t.next=11;break}return Ar("SyncEngine","User change. New user:",n.toKey()),t.next=5,Yu(r.localStore,n);case 5:return i=t.sent,r.currentUser=n,function(t,e){t.lc.forEach((function(t){t.forEach((function(t){t.reject(new Lr(jr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),t.next=11,il(r,i.ji);case 11:case"end":return t.stop()}}),t)}))),ul.apply(this,arguments)}function sl(t,e){var n=Rr(t),r=n.cc.get(e);if(r&&r.nc)return Fo().add(r.key);var i=Fo(),a=n.rc.get(e);if(!a)return i;var o,u=(0,s.Z)(a);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=n.ic.get(c);i=i.unionWith(l.view.ju)}}catch(f){u.e(f)}finally{u.f()}return i}function cl(t){var e=Rr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kc.bind(null,e),e.sc.Wo=_c.bind(null,e.eventManager),e.sc.wc=Tc.bind(null,e.eventManager),e}function ll(t){var e=Rr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wc.bind(null,e),e}var fl=function(){function t(){(0,d.Z)(this,t),this.synchronizeTabs=!1}return(0,p.Z)(t,[{key:"initialize",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.It=ms(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),t.next=5,this.persistence.start();case 5:this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"Tc",value:function(t,e){return null}},{key:"Ec",value:function(t,e){return null}},{key:"Ic",value:function(t){return Xu(this.persistence,new Wu,t.initialUser,this.It)}},{key:"yc",value:function(t){return new Ku(Hu.Bs,this.It)}},{key:"gc",value:function(t){return new fs}},{key:"terminate",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),t.next=3,this.sharedClientState.shutdown();case 3:return t.next=5,this.persistence.shutdown();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),hl=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,[{key:"initialize",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.localStore,t.t0){t.next=12;break}return this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return zc(r.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ol.bind(null,this.syncEngine),t.next=12,cc(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createEventManager",value:function(t){return new kc}},{key:"createDatastore",value:function(t){var e,n=ms(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new ys(e));return function(t,e,n,r){return new xs(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(t){var e,n,r,i,a,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return zc(o.syncEngine,t,0)},a=vs.C()?new vs:new hs,new Ts(e,n,r,i,a)}},{key:"createSyncEngine",value:function(t,e){return function(t,e,n,r,i,a,o){var u=new Fc(t,e,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}},{key:"terminate",value:function(){return function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Rr(e),Ar("RemoteStore","RemoteStore shutting down."),n._u.add(5),t.next=5,Zs(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}]),t}();function vl(t,e,n){if(!n)throw new Lr(jr.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function dl(t){if(!ri.isDocumentKey(t))throw new Lr(jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function pl(t){if(ri.isDocumentKey(t))throw new Lr(jr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function yl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}return"function"==typeof t?"a function":Fr()}function gl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Lr(jr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yl(t);throw new Lr(jr.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}return t}var ml=new Map,kl=function(){function t(e){var n;if((0,d.Z)(this,t),void 0===e.host){if(void 0!==e.ssl)throw new Lr(jr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lr(jr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new Lr(jr.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return(0,p.Z)(t,[{key:"isEqual",value:function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}]),t}(),bl=function(){function t(e,n,r,i){(0,d.Z)(this,t),this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kl({}),this._settingsFrozen=!1}return(0,p.Z)(t,[{key:"app",get:function(){if(!this._app)throw new Lr(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(t){if(this._settingsFrozen)throw new Lr(jr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kl(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Vr;switch(t.type){case"gapi":var e=t.client;return new zr(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Lr(jr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(t){var e=ml.get(t);e&&(Ar("ComponentProvider","Removing Datastore"),ml.delete(t),e.terminate())}(this),Promise.resolve()}}]),t}();function wl(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(t=gl(t,bl))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Dr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:"".concat(e,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Tr.MOCK_USER;else{o=(0,k.Sg)(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Lr(jr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tr(s)}t._authCredentials=new Ur(new Pr(o,u))}}var El=function(){function t(e,n,r){(0,d.Z)(this,t),this.converter=n,this._key=r,this.type="document",this.firestore=e}return(0,p.Z)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new _l(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),xl=function(){function t(e,n,r){(0,d.Z)(this,t),this.converter=n,this._query=r,this.type="query",this.firestore=e}return(0,p.Z)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),_l=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i){var a;return(0,d.Z)(this,n),(a=e.call(this,t,r,_a(i)))._path=i,a.type="collection",a}return(0,p.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var t=this._path.popLast();return t.isEmpty()?null:new El(this.firestore,null,new ri(t))}},{key:"withConverter",value:function(t){return new n(this.firestore,t,this._path)}}]),n}(xl);function Tl(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,k.m9)(t),vl("collection","path",e),t instanceof bl){var a=ti.fromString.apply(ti,[e].concat(r));return pl(a),new _l(t,null,a)}if(!(t instanceof El||t instanceof _l))throw new Lr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t._path.child(ti.fromString.apply(ti,[e].concat(r)));return pl(o),new _l(t.firestore,null,o)}var Sl=function(){function t(e){(0,d.Z)(this,t),this.observer=e,this.muted=!1}return(0,p.Z)(t,[{key:"next",value:function(t){this.observer.next&&this.Rc(this.observer.next,t)}},{key:"error",value:function(t){this.observer.error?this.Rc(this.observer.error,t):Cr("Uncaught Error in snapshot listener:",t.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)}}]),t}(),Il=function(){function t(e,n,r,i){var a=this;(0,d.Z)(this,t),this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=$r.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ar("FirestoreClient","Received user=",e.uid),t.next=3,a.authCredentialListener(e);case 3:a.user=e;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(t){return Ar("FirestoreClient","Received new app check token=",t),a.appCheckCredentialListener(t,a.user)}))}return(0,p.Z)(t,[{key:"getConfiguration",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(t){this.authCredentialListener=t}},{key:"setAppCheckTokenChangeListener",value:function(t){this.appCheckCredentialListener=t}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Lr(jr.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,l.Z)((0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=t.onlineComponents,!n.t0){n.next=5;break}return n.next=5,t.onlineComponents.terminate();case 5:if(n.t1=t.offlineComponents,!n.t1){n.next=9;break}return n.next=9,t.offlineComponents.terminate();case 9:t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=dc(n.t2,"Failed to shutdown persistence"),e.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),e.promise}}]),t}();function Zl(t,e){return Al.apply(this,arguments)}function Al(){return Al=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),Ar("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,e.getConfiguration();case 3:return r=t.sent,t.next=6,n.initialize(r);case 6:i=r.initialUser,e.setCredentialChangeListener(function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=i.isEqual(e),t.t0){t.next=5;break}return t.next=4,Yu(n.localStore,e);case 4:i=e;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=n;case 8:case"end":return t.stop()}}),t)}))),Al.apply(this,arguments)}function Cl(t,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),t.next=3,Ol(e);case 3:return r=t.sent,Ar("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,e.getConfiguration();case 7:return i=t.sent,t.next=10,n.initialize(r,i);case 10:e.setCredentialChangeListener((function(t){return uc(n.remoteStore,t)})),e.setAppCheckTokenChangeListener((function(t,e){return uc(n.remoteStore,e)})),e.onlineComponents=n;case 13:case"end":return t.stop()}}),t)}))),Dl.apply(this,arguments)}function Ol(t){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.offlineComponents,t.t0){t.next=5;break}return Ar("FirestoreClient","Using default OfflineComponentProvider"),t.next=5,Zl(e,new fl);case 5:return t.abrupt("return",e.offlineComponents);case 6:case"end":return t.stop()}}),t)}))),Fl.apply(this,arguments)}function Nl(t){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.onlineComponents,t.t0){t.next=5;break}return Ar("FirestoreClient","Using default OnlineComponentProvider"),t.next=5,Cl(e,new hl);case 5:return t.abrupt("return",e.onlineComponents);case 6:case"end":return t.stop()}}),t)}))),Rl.apply(this,arguments)}function jl(t){return Nl(t).then((function(t){return t.syncEngine}))}function Ll(t){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nl(e);case 2:return n=t.sent,r=n.eventManager,t.abrupt("return",(r.onListen=Nc.bind(null,n.syncEngine),r.onUnlisten=Mc.bind(null,n.syncEngine),r));case 5:case"end":return t.stop()}}),t)}))),Ml.apply(this,arguments)}var Pl=function(){function t(){var e=this;(0,d.Z)(this,t),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ks(this,"async_queue_retry"),this.Wc=function(){var t=gs();t&&Ar("AsyncQueue","Visibility state changed to "+t.visibilityState),e.xo.Po()};var n=gs();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return(0,p.Z)(t,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(t){this.enqueue(t)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(t){this.zc(),this.Hc(t)}},{key:"enterRestrictedMode",value:function(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;var e=gs();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(t){var e=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new Mr;return this.Hc((function(){return e.Uc&&e.Qc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(t){var e=this;this.enqueueAndForget((function(){return e.Lc.push(t),e.Jc()}))}},{key:"Jc",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){var e=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.Lc.length){t.next=14;break}return t.prev=1,t.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),di(t.t0)){t.next=12;break}throw t.t0;case 12:Ar("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return e.Jc()}));case 14:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"Hc",value:function(t){var e=this,n=this.Bc.then((function(){return e.Gc=!0,t().catch((function(t){e.Kc=t,e.Gc=!1;var n=function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Cr("INTERNAL UNHANDLED ERROR: ",n),t})).then((function(t){return e.Gc=!1,t}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(t,e,n){var r=this;this.zc(),this.jc.indexOf(t)>-1&&(e=0);var i=vc.createAndSchedule(this,t,e,n,(function(t){return r.Yc(t)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&Fr()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.Bc,t.next=3,e;case 3:if(e!==this.Bc){t.next=0;break}case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"Zc",value:function(t){var e,n=(0,s.Z)(this.qc);try{for(n.s();!(e=n.n()).done;){if(e.value.timerId===t)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(t){var e=this;return this.Xc().then((function(){e.qc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));var n,r=(0,s.Z)(e.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==t&&i.timerId===t)break}}catch(a){r.e(a)}finally{r.f()}return e.Xc()}))}},{key:"ea",value:function(t){this.jc.push(t)}},{key:"Yc",value:function(t){var e=this.qc.indexOf(t);this.qc.splice(e,1)}}]),t}();function Vl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;var n,r=t,i=(0,s.Z)(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(t)}var Ul=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a){var o;return(0,d.Z)(this,n),(o=e.call(this,t,r,i,a)).type="firestore",o._queue=new Pl,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,p.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||zl(this),this._firestoreClient.terminate()}}]),n}(bl);function Bl(t,e){var n="object"==typeof t?t:(0,y.Mq)(),r="string"==typeof t?t:e||"(default)",i=(0,y.qX)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){var a=(0,k.P0)("firestore");a&&wl.apply(void 0,[i].concat((0,v.Z)(a)))}return i}function ql(t){return t._firestoreClient||zl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zl(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Fi(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Il(t._authCredentials,t._appCheckCredentials,t._queue,r)}var Kl=function(){function t(e){(0,d.Z)(this,t),this._byteString=e}return(0,p.Z)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(t){return this._byteString.isEqual(t._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(Ti.fromBase64String(e))}catch(e){throw new Lr(jr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t(Ti.fromUint8Array(e))}}]),t}(),Gl=function(){function t(){(0,d.Z)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Lr(jr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(n)}return(0,p.Z)(t,[{key:"isEqual",value:function(t){return this._internalPath.isEqual(t._internalPath)}}]),t}();var Hl=(0,p.Z)((function t(e){(0,d.Z)(this,t),this._methodName=e})),$l=function(){function t(e,n){if((0,d.Z)(this,t),!isFinite(e)||e<-90||e>90)throw new Lr(jr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Lr(jr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return(0,p.Z)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(t){return this._lat===t._lat&&this._long===t._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(t){return Wr(this._lat,t._lat)||Wr(this._long,t._long)}}]),t}(),Wl=/^__.*__$/,Ql=function(){function t(e,n,r){(0,d.Z)(this,t),this.data=e,this.fieldMask=n,this.fieldTransforms=r}return(0,p.Z)(t,[{key:"toMutation",value:function(t,e){return null!==this.fieldMask?new lo(t,this.data,this.fieldMask,e,this.fieldTransforms):new co(t,this.data,e,this.fieldTransforms)}}]),t}();function Xl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fr()}}var Yl=function(){function t(e,n,r,i,a,o){(0,d.Z)(this,t),this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,p.Z)(t,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:n,oa:!1});return r.ua(t),r}},{key:"ca",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(t){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(t){return ff(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))}},{key:"na",value:function(){if(this.path)for(var t=0;t<this.path.length;t++)this.ua(this.path.get(t))}},{key:"ua",value:function(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(Xl(this.sa)&&Wl.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}]),t}(),Jl=function(){function t(e,n,r){(0,d.Z)(this,t),this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||ms(e)}return(0,p.Z)(t,[{key:"da",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yl({sa:t,methodName:e,fa:n,path:ni.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),t}();function tf(t){var e=t._freezeSettings(),n=ms(t._databaseId);return new Jl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ef(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=t.da(a.merge||a.mergeFields?2:0,e,n,i);uf("Data must be an object, but it was:",o,r);var u,c,l=af(r,o);if(a.merge)u=new _i(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var f,h=[],v=(0,s.Z)(a.mergeFields);try{for(v.s();!(f=v.n()).done;){var d=f.value,p=sf(e,d,n);if(!o.contains(p))throw new Lr(jr.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));hf(h,p)||h.push(p)}}catch(y){v.e(y)}finally{v.f()}u=new _i(h),c=o.fieldTransforms.filter((function(t){return u.covers(t.field)}))}else u=null,c=o.fieldTransforms;return new Ql(new ta(l),u,c)}function nf(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rf(n,t.da(r?4:3,e))}function rf(t,e){if(of(t=(0,k.m9)(t)))return uf("Unsupported field value:",e,t),af(t,e);if(t instanceof Hl)return function(t,e){if(!Xl(e.sa))throw e.ha("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.ha("".concat(t._methodName,"() is not currently supported inside arrays"));var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,e){var n,r=[],i=0,a=(0,s.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=rf(n.value,e.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(t,e)}return function(t,e){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ua(e.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xr.fromDate(t);return{timestampValue:$o(e.It,n)}}if(t instanceof Xr){var r=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$o(e.It,r)}}if(t instanceof $l)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Kl)return{bytesValue:Wo(e.It,t._byteString)};if(t instanceof El){var i=e.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw e.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.ha("Unsupported field value: ".concat(yl(t)))}(t,e)}function af(t,e){var n={};return mi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(function(t,r){var i=rf(r,e.ra(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function of(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xr||t instanceof $l||t instanceof Kl||t instanceof El||t instanceof Hl)}function uf(t,e,n){if(!of(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=yl(n);throw"an object"===r?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function sf(t,e,n){if((e=(0,k.m9)(e))instanceof Gl)return e._internalPath;if("string"==typeof e)return lf(t,e);throw ff("Field path arguments must be of type string or ",t,!1,void 0,n)}var cf=new RegExp("[~\\*/\\[\\]]");function lf(t,e,n){if(e.search(cf)>=0)throw ff("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return(0,i.Z)(Gl,(0,v.Z)(e.split(".")))._internalPath}catch(r){throw ff("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function ff(t,e,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(e,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Lr(jr.INVALID_ARGUMENT,u+t+s)}function hf(t,e){return t.some((function(t){return t.isEqual(e)}))}var vf=function(){function t(e,n,r,i,a){(0,d.Z)(this,t),this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,p.Z)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new El(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var t=new df(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(t){if(this._document){var e=this._document.data.field(pf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}]),t}(),df=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,d.Z)(this,n),e.apply(this,arguments)}return(0,p.Z)(n,[{key:"data",value:function(){return(0,a.Z)((0,o.Z)(n.prototype),"data",this).call(this)}}]),n}(vf);function pf(t,e){return"string"==typeof e?lf(t,e):e instanceof Gl?e._internalPath:e._delegate._internalPath}function yf(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Lr(jr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gf=(0,p.Z)((function t(){(0,d.Z)(this,t)}));function mf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];t=o._apply(t)}return t}var kf=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i){var a;return(0,d.Z)(this,n),(a=e.call(this)).ma=t,a.ga=r,a.ya=i,a.type="where",a}return(0,p.Z)(n,[{key:"_apply",value:function(t){var e=tf(t.firestore),n=function(t,e,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Lr(jr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Ef(o,a);var c,l=[],f=(0,s.Z)(o);try{for(f.s();!(c=f.n()).done;){var h=c.value;l.push(wf(r,t,h))}}catch(d){f.e(d)}finally{f.f()}u={arrayValue:{values:l}}}else u=wf(r,t,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Ef(o,a),u=nf(n,"where",o,"in"===a||"not-in"===a);var v=sa.create(i,a,u);return function(t,e){if(e.dt()){var n=Ia(t);if(null!==n&&!n.isEqual(e.field))throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(e.field.toString(),"'"));var r=Sa(t);null!==r&&xf(t,e.field,r)}var i=function(t,e){var n,r=(0,s.Z)(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Lr(jr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new Lr(jr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(t,v),v}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new xl(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}]),n}(gf);function bf(t,e,n){var r=e,i=pf("where",t);return new kf(i,r,n)}function wf(t,e,n){if("string"==typeof(n=(0,k.m9)(n))){if(""===n)throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Za(e)&&-1!==n.indexOf("/"))throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=e.path.child(ti.fromString(n));if(!ri.isDocumentKey(r))throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Gi(t,new ri(r))}if(n instanceof El)return Gi(t,n._key);throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yl(n),"."))}function Ef(t,e){if(!Array.isArray(t)||0===t.length)throw new Lr(jr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."));if(t.length>10)throw new Lr(jr.INVALID_ARGUMENT,"Invalid Query. '".concat(e.toString(),"' filters support a maximum of 10 elements in the value array."))}function xf(t,e,n){if(!n.isEqual(e))throw new Lr(jr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(e.toString(),"' and so you must also use '").concat(e.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _f=function(){function t(){(0,d.Z)(this,t)}return(0,p.Z)(t,[{key:"convertValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ai(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Fr()}}},{key:"convertObject",value:function(t,e){var n=this,r={};return gi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r}},{key:"convertGeoPoint",value:function(t){return new $l(Zi(t.latitude),Zi(t.longitude))}},{key:"convertArray",value:function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))}},{key:"convertServerTimestamp",value:function(t,e){switch(e){case"previous":var n=Di(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Oi(t));default:return null}}},{key:"convertTimestamp",value:function(t){var e=Ii(t);return new Xr(e.seconds,e.nanos)}},{key:"convertDocumentKey",value:function(t,e){var n=ti.fromString(t);Nr(ku(n));var r=new Ni(n.get(1),n.get(3)),i=new ri(n.popFirst(5));return r.isEqual(e)||Cr("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),i}}]),t}();function Tf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Sf=function(){function t(e,n){(0,d.Z)(this,t),this.hasPendingWrites=e,this.fromCache=n}return(0,p.Z)(t,[{key:"isEqual",value:function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}]),t}(),If=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t,r,i,a,o,u){var s;return(0,d.Z)(this,n),(s=e.call(this,t,r,i,a,u))._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,p.Z)(n,[{key:"exists",value:function(){return(0,a.Z)((0,o.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var e=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(pf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}]),n}(vf),Zf=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,d.Z)(this,n),e.apply(this,arguments)}return(0,p.Z)(n,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)((0,o.Z)(n.prototype),"data",this).call(this,t)}}]),n}(If),Af=function(){function t(e,n,r,i){(0,d.Z)(this,t),this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sf(i.hasPendingWrites,i.fromCache),this.query=r}return(0,p.Z)(t,[{key:"docs",get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Zf(n._firestore,n._userDataWriter,r.key,r,new Sf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lr(jr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Zf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Zf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,a=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(a=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cf(e.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),t}();function Cf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fr()}}var Df=function(t){(0,f.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,d.Z)(this,n),(r=e.call(this)).firestore=t,r}return(0,p.Z)(n,[{key:"convertBytes",value:function(t){return new Kl(t)}},{key:"convertReference",value:function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new El(this.firestore,null,e)}}]),n}(_f);function Of(t,e){var n=gl(t.firestore,Ul),r=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,k.m9)(t),1===arguments.length&&(e=$r.R()),vl("doc","path",e),t instanceof bl){var a=ti.fromString.apply(ti,[e].concat(r));return dl(a),new El(t,null,new ri(a))}if(!(t instanceof El||t instanceof _l))throw new Lr(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t._path.child(ti.fromString.apply(ti,[e].concat(r)));return dl(o),new El(t.firestore,t instanceof _l?t.converter:null,new ri(o))}(t),i=Tf(t.converter,e);return Nf(n,[ef(tf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,eo.exists(!1))]).then((function(){return r}))}function Ff(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,a,o;t=(0,k.m9)(t);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Vl(n[s])||(u=n[s],s++);var f,h,v,d={includeMetadataChanges:u.includeMetadataChanges};if(Vl(n[s])){var p=n[s];n[s]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[s+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[s+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(t instanceof El)h=gl(t.firestore,Ul),v=_a(t._key.path),f={next:function(e){n[s]&&n[s](Rf(h,t,e))},error:n[s+1],complete:n[s+2]};else{var y=gl(t,xl);h=gl(y.firestore,Ul),v=y._query;var g=new Df(h);f={next:function(t){n[s]&&n[s](new Af(h,g,y,t))},error:n[s+1],complete:n[s+2]},yf(t._query)}return function(t,e,n,r){var i=new Sl(r),a=new Ic(e,i,n);return t.asyncQueue.enqueueAndForget((0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=bc,e.next=3,Ll(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))),function(){i.bc(),t.asyncQueue.enqueueAndForget((0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ec,e.next=3,Ll(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))))}}(ql(h),v,d,f)}function Nf(t,e){return function(t,e){var n=new Mr;return t.asyncQueue.enqueueAndForget((0,l.Z)((0,c.Z)().mark((function r(){return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Vc,r.next=3,jl(t);case 3:return r.t1=r.sent,r.t2=e,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ql(t),e)}function Rf(t,e,n){var r=n.docs.get(e._key),i=new Df(t);return new If(t,i,e._key,r,new Sf(n.hasPendingWrites,n.fromCache),e.converter)}!function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){Sr=t}(y.Jn),(0,y.Xd)(new g.wA("firestore",(function(t,n){var r=n.instanceIdentifier,i=n.options,a=t.getProvider("app").getImmediate(),o=new Ul(new Br(t.getProvider("auth-internal")),new Gr(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Lr(jr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ni(t.options.projectId,e)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,y.KN)(_r,"3.7.3",t),(0,y.KN)(_r,"3.7.3","esm2017")}()},5705:function(t,e,n){"use strict";n.d(e,{TA:function(){return vr}});var r=n(2791),i=n(77),a=n.n(i),o=function(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===u}(t)}(t)};var u="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function c(t,e,n){return t.concat(e).map((function(t){return s(t,n)}))}function l(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||c,n.isMergeableObject=n.isMergeableObject||o;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):function(t,e,n){var r={};return n.isMergeableObject(t)&&Object.keys(t).forEach((function(e){r[e]=s(t[e],n)})),Object.keys(e).forEach((function(i){n.isMergeableObject(e[i])&&t[i]?r[i]=l(t[i],e[i],n):r[i]=s(e[i],n)})),r}(t,e,n):s(e,n)}l.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return l(t,n,e)}),{})};var f=l,h="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,d=h||v||Function("return this")(),p=d.Symbol,y=Object.prototype,g=y.hasOwnProperty,m=y.toString,k=p?p.toStringTag:void 0;var b=function(t){var e=g.call(t,k),n=t[k];try{t[k]=void 0;var r=!0}catch(a){}var i=m.call(t);return r&&(e?t[k]=n:delete t[k]),i},w=Object.prototype.toString;var E=function(t){return w.call(t)},x=p?p.toStringTag:void 0;var _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?b(t):E(t)};var T=function(t,e){return function(n){return t(e(n))}},S=T(Object.getPrototypeOf,Object);var I=function(t){return null!=t&&"object"==typeof t},Z=Function.prototype,A=Object.prototype,C=Z.toString,D=A.hasOwnProperty,O=C.call(Object);var F=function(t){if(!I(t)||"[object Object]"!=_(t))return!1;var e=S(t);if(null===e)return!0;var n=D.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&C.call(n)==O};var N=function(){this.__data__=[],this.size=0};var R=function(t,e){return t===e||t!==t&&e!==e};var j=function(t,e){for(var n=t.length;n--;)if(R(t[n][0],e))return n;return-1},L=Array.prototype.splice;var M=function(t){var e=this.__data__,n=j(e,t);return!(n<0)&&(n==e.length-1?e.pop():L.call(e,n,1),--this.size,!0)};var P=function(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]};var V=function(t){return j(this.__data__,t)>-1};var U=function(t,e){var n=this.__data__,r=j(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function B(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}B.prototype.clear=N,B.prototype.delete=M,B.prototype.get=P,B.prototype.has=V,B.prototype.set=U;var q=B;var z=function(){this.__data__=new q,this.size=0};var K=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var G=function(t){return this.__data__.get(t)};var H=function(t){return this.__data__.has(t)};var $=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var W=function(t){if(!$(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Q=d["__core-js_shared__"],X=function(){var t=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Y=function(t){return!!X&&X in t},J=Function.prototype.toString;var tt=function(t){if(null!=t){try{return J.call(t)}catch(e){}try{return t+""}catch(e){}}return""},et=/^\[object .+?Constructor\]$/,nt=Function.prototype,rt=Object.prototype,it=nt.toString,at=rt.hasOwnProperty,ot=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ut=function(t){return!(!$(t)||Y(t))&&(W(t)?ot:et).test(tt(t))};var st=function(t,e){return null==t?void 0:t[e]};var ct=function(t,e){var n=st(t,e);return ut(n)?n:void 0},lt=ct(d,"Map"),ft=ct(Object,"create");var ht=function(){this.__data__=ft?ft(null):{},this.size=0};var vt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},dt=Object.prototype.hasOwnProperty;var pt=function(t){var e=this.__data__;if(ft){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return dt.call(e,t)?e[t]:void 0},yt=Object.prototype.hasOwnProperty;var gt=function(t){var e=this.__data__;return ft?void 0!==e[t]:yt.call(e,t)};var mt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ft&&void 0===e?"__lodash_hash_undefined__":e,this};function kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kt.prototype.clear=ht,kt.prototype.delete=vt,kt.prototype.get=pt,kt.prototype.has=gt,kt.prototype.set=mt;var bt=kt;var wt=function(){this.size=0,this.__data__={hash:new bt,map:new(lt||q),string:new bt}};var Et=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var xt=function(t,e){var n=t.__data__;return Et(e)?n["string"==typeof e?"string":"hash"]:n.map};var _t=function(t){var e=xt(this,t).delete(t);return this.size-=e?1:0,e};var Tt=function(t){return xt(this,t).get(t)};var St=function(t){return xt(this,t).has(t)};var It=function(t,e){var n=xt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Zt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zt.prototype.clear=wt,Zt.prototype.delete=_t,Zt.prototype.get=Tt,Zt.prototype.has=St,Zt.prototype.set=It;var At=Zt;var Ct=function(t,e){var n=this.__data__;if(n instanceof q){var r=n.__data__;if(!lt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new At(r)}return n.set(t,e),this.size=n.size,this};function Dt(t){var e=this.__data__=new q(t);this.size=e.size}Dt.prototype.clear=z,Dt.prototype.delete=K,Dt.prototype.get=G,Dt.prototype.has=H,Dt.prototype.set=Ct;var Ot=Dt;var Ft=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Nt=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var Rt=function(t,e,n){"__proto__"==e&&Nt?Nt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},jt=Object.prototype.hasOwnProperty;var Lt=function(t,e,n){var r=t[e];jt.call(t,e)&&R(r,n)&&(void 0!==n||e in t)||Rt(t,e,n)};var Mt=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var u=e[a],s=r?r(n[u],t[u],u,n,t):void 0;void 0===s&&(s=t[u]),i?Rt(n,u,s):Lt(n,u,s)}return n};var Pt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Vt=function(t){return I(t)&&"[object Arguments]"==_(t)},Ut=Object.prototype,Bt=Ut.hasOwnProperty,qt=Ut.propertyIsEnumerable,zt=Vt(function(){return arguments}())?Vt:function(t){return I(t)&&Bt.call(t,"callee")&&!qt.call(t,"callee")},Kt=zt,Gt=Array.isArray;var Ht=function(){return!1},$t="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wt=$t&&"object"==typeof module&&module&&!module.nodeType&&module,Qt=Wt&&Wt.exports===$t?d.Buffer:void 0,Xt=(Qt?Qt.isBuffer:void 0)||Ht,Yt=/^(?:0|[1-9]\d*)$/;var Jt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e};var te=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ee={};ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Arguments]"]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object Boolean]"]=ee["[object DataView]"]=ee["[object Date]"]=ee["[object Error]"]=ee["[object Function]"]=ee["[object Map]"]=ee["[object Number]"]=ee["[object Object]"]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object WeakMap]"]=!1;var ne=function(t){return I(t)&&te(t.length)&&!!ee[_(t)]};var re=function(t){return function(e){return t(e)}},ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,ae=ie&&"object"==typeof module&&module&&!module.nodeType&&module,oe=ae&&ae.exports===ie&&h.process,ue=function(){try{var t=ae&&ae.require&&ae.require("util").types;return t||oe&&oe.binding&&oe.binding("util")}catch(e){}}(),se=ue&&ue.isTypedArray,ce=se?re(se):ne,le=Object.prototype.hasOwnProperty;var fe=function(t,e){var n=Gt(t),r=!n&&Kt(t),i=!n&&!r&&Xt(t),a=!n&&!r&&!i&&ce(t),o=n||r||i||a,u=o?Pt(t.length,String):[],s=u.length;for(var c in t)!e&&!le.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Jt(c,s))||u.push(c);return u},he=Object.prototype;var ve=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||he)},de=T(Object.keys,Object),pe=Object.prototype.hasOwnProperty;var ye=function(t){if(!ve(t))return de(t);var e=[];for(var n in Object(t))pe.call(t,n)&&"constructor"!=n&&e.push(n);return e};var ge=function(t){return null!=t&&te(t.length)&&!W(t)};var me=function(t){return ge(t)?fe(t):ye(t)};var ke=function(t,e){return t&&Mt(e,me(e),t)};var be=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},we=Object.prototype.hasOwnProperty;var Ee=function(t){if(!$(t))return be(t);var e=ve(t),n=[];for(var r in t)("constructor"!=r||!e&&we.call(t,r))&&n.push(r);return n};var xe=function(t){return ge(t)?fe(t,!0):Ee(t)};var _e=function(t,e){return t&&Mt(e,xe(e),t)},Te="object"==typeof exports&&exports&&!exports.nodeType&&exports,Se=Te&&"object"==typeof module&&module&&!module.nodeType&&module,Ie=Se&&Se.exports===Te?d.Buffer:void 0,Ze=Ie?Ie.allocUnsafe:void 0;var Ae=function(t,e){if(e)return t.slice();var n=t.length,r=Ze?Ze(n):new t.constructor(n);return t.copy(r),r};var Ce=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var De=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a};var Oe=function(){return[]},Fe=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,Re=Ne?function(t){return null==t?[]:(t=Object(t),De(Ne(t),(function(e){return Fe.call(t,e)})))}:Oe;var je=function(t,e){return Mt(t,Re(t),e)};var Le=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Me=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Le(e,Re(t)),t=S(t);return e}:Oe;var Pe=function(t,e){return Mt(t,Me(t),e)};var Ve=function(t,e,n){var r=e(t);return Gt(t)?r:Le(r,n(t))};var Ue=function(t){return Ve(t,me,Re)};var Be=function(t){return Ve(t,xe,Me)},qe=ct(d,"DataView"),ze=ct(d,"Promise"),Ke=ct(d,"Set"),Ge=ct(d,"WeakMap"),He="[object Map]",$e="[object Promise]",We="[object Set]",Qe="[object WeakMap]",Xe="[object DataView]",Ye=tt(qe),Je=tt(lt),tn=tt(ze),en=tt(Ke),nn=tt(Ge),rn=_;(qe&&rn(new qe(new ArrayBuffer(1)))!=Xe||lt&&rn(new lt)!=He||ze&&rn(ze.resolve())!=$e||Ke&&rn(new Ke)!=We||Ge&&rn(new Ge)!=Qe)&&(rn=function(t){var e=_(t),n="[object Object]"==e?t.constructor:void 0,r=n?tt(n):"";if(r)switch(r){case Ye:return Xe;case Je:return He;case tn:return $e;case en:return We;case nn:return Qe}return e});var an=rn,on=Object.prototype.hasOwnProperty;var un=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&on.call(t,"index")&&(n.index=t.index,n.input=t.input),n},sn=d.Uint8Array;var cn=function(t){var e=new t.constructor(t.byteLength);return new sn(e).set(new sn(t)),e};var ln=function(t,e){var n=e?cn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},fn=/\w*$/;var hn=function(t){var e=new t.constructor(t.source,fn.exec(t));return e.lastIndex=t.lastIndex,e},vn=p?p.prototype:void 0,dn=vn?vn.valueOf:void 0;var pn=function(t){return dn?Object(dn.call(t)):{}};var yn=function(t,e){var n=e?cn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var gn=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return cn(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return ln(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return yn(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return hn(t);case"[object Symbol]":return pn(t)}},mn=Object.create,kn=function(){function t(){}return function(e){if(!$(e))return{};if(mn)return mn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var bn=function(t){return"function"!=typeof t.constructor||ve(t)?{}:kn(S(t))};var wn=function(t){return I(t)&&"[object Map]"==an(t)},En=ue&&ue.isMap,xn=En?re(En):wn;var _n=function(t){return I(t)&&"[object Set]"==an(t)},Tn=ue&&ue.isSet,Sn=Tn?re(Tn):_n,In="[object Arguments]",Zn="[object Function]",An="[object Object]",Cn={};Cn[In]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object DataView]"]=Cn["[object Boolean]"]=Cn["[object Date]"]=Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn[An]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object Symbol]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Error]"]=Cn[Zn]=Cn["[object WeakMap]"]=!1;var Dn=function t(e,n,r,i,a,o){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=a?r(e,i,a,o):r(e)),void 0!==u)return u;if(!$(e))return e;var f=Gt(e);if(f){if(u=un(e),!s)return Ce(e,u)}else{var h=an(e),v=h==Zn||"[object GeneratorFunction]"==h;if(Xt(e))return Ae(e,s);if(h==An||h==In||v&&!a){if(u=c||v?{}:bn(e),!s)return c?Pe(e,_e(u,e)):je(e,ke(u,e))}else{if(!Cn[h])return a?e:{};u=gn(e,h,s)}}o||(o=new Ot);var d=o.get(e);if(d)return d;o.set(e,u),Sn(e)?e.forEach((function(i){u.add(t(i,n,r,i,e,o))})):xn(e)&&e.forEach((function(i,a){u.set(a,t(i,n,r,a,e,o))}));var p=f?void 0:(l?c?Be:Ue:c?xe:me)(e);return Ft(p||e,(function(i,a){p&&(i=e[a=i]),Lt(u,a,t(i,n,r,a,e,o))})),u};var On=function(t){return Dn(t,4)};var Fn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Nn=function(t){return"symbol"==typeof t||I(t)&&"[object Symbol]"==_(t)};function Rn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Rn.Cache||At),n}Rn.Cache=At;var jn=Rn;var Ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mn=/\\(\\)?/g,Pn=function(t){var e=jn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ln,(function(t,n,r,i){e.push(r?i.replace(Mn,"$1"):n||t)})),e}));var Vn=function(t){if("string"==typeof t||Nn(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},Un=p?p.prototype:void 0,Bn=Un?Un.toString:void 0;var qn=function t(e){if("string"==typeof e)return e;if(Gt(e))return Fn(e,t)+"";if(Nn(e))return Bn?Bn.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var zn=function(t){return null==t?"":qn(t)};var Kn=function(t){return Gt(t)?Fn(t,Vn):Nn(t)?[t]:Ce(Pn(zn(t)))};var Gn=function(t,e){};n(2110);var Hn=function(t){return Dn(t,5)};function $n(){return $n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$n.apply(this,arguments)}function Wn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Qn(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Xn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Yn=function(t){return Array.isArray(t)&&0===t.length},Jn=function(t){return"function"===typeof t},tr=function(t){return null!==t&&"object"===typeof t},er=function(t){return String(Math.floor(Number(t)))===t},nr=function(t){return"[object String]"===Object.prototype.toString.call(t)},rr=function(t){return 0===r.Children.count(t)},ir=function(t){return tr(t)&&Jn(t.then)};function ar(t,e,n,r){void 0===r&&(r=0);for(var i=Kn(e);t&&r<i.length;)t=t[i[r++]];return void 0===t?n:t}function or(t,e,n){for(var r=On(t),i=r,a=0,o=Kn(e);a<o.length-1;a++){var u=o[a],s=ar(t,o.slice(0,a+1));if(s&&(tr(s)||Array.isArray(s)))i=i[u]=On(s);else{var c=o[a+1];i=i[u]=er(c)&&Number(c)>=0?[]:{}}}return(0===a?t:i)[o[a]]===n?t:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function ur(t,e,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(t);i<a.length;i++){var o=a[i],u=t[o];tr(u)?n.get(u)||(n.set(u,!0),r[o]=Array.isArray(u)?[]:{},ur(u,e,n,r[o])):r[o]=e}return r}var sr=(0,r.createContext)(void 0);sr.displayName="FormikContext";sr.Provider,sr.Consumer;function cr(){var t=(0,r.useContext)(sr);return t||Gn(!1),t}function lr(t,e){switch(e.type){case"SET_VALUES":return $n({},t,{values:e.payload});case"SET_TOUCHED":return $n({},t,{touched:e.payload});case"SET_ERRORS":return a()(t.errors,e.payload)?t:$n({},t,{errors:e.payload});case"SET_STATUS":return $n({},t,{status:e.payload});case"SET_ISSUBMITTING":return $n({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return $n({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return $n({},t,{values:or(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return $n({},t,{touched:or(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return $n({},t,{errors:or(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return $n({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return $n({},t,{touched:ur(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return $n({},t,{isSubmitting:!1});default:return t}}var fr={},hr={};function vr(t){var e=t.validateOnChange,n=void 0===e||e,i=t.validateOnBlur,o=void 0===i||i,u=t.validateOnMount,s=void 0!==u&&u,c=t.isInitialValid,l=t.enableReinitialize,h=void 0!==l&&l,v=t.onSubmit,d=Qn(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=$n({validateOnChange:n,validateOnBlur:o,validateOnMount:s,onSubmit:v},d),y=(0,r.useRef)(p.initialValues),g=(0,r.useRef)(p.initialErrors||fr),m=(0,r.useRef)(p.initialTouched||hr),k=(0,r.useRef)(p.initialStatus),b=(0,r.useRef)(!1),w=(0,r.useRef)({});(0,r.useEffect)((function(){return b.current=!0,function(){b.current=!1}}),[]);var E=(0,r.useReducer)(lr,{values:p.initialValues,errors:p.initialErrors||fr,touched:p.initialTouched||hr,status:p.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),x=E[0],_=E[1],T=(0,r.useCallback)((function(t,e){return new Promise((function(n,r){var i=p.validate(t,e);null==i?n(fr):ir(i)?i.then((function(t){n(t||fr)}),(function(t){r(t)})):n(i)}))}),[p.validate]),S=(0,r.useCallback)((function(t,e){var n=p.validationSchema,r=Jn(n)?n(e):n,i=e&&r.validateAt?r.validateAt(e,t):function(t,e,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=dr(t);return e[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(t,r);return new Promise((function(t,e){i.then((function(){t(fr)}),(function(n){"ValidationError"===n.name?t(function(t){var e={};if(t.inner){if(0===t.inner.length)return or(e,t.path,t.message);var n=t.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;ar(e,o.path)||(e=or(e,o.path,o.message))}}return e}(n)):e(n)}))}))}),[p.validationSchema]),I=(0,r.useCallback)((function(t,e){return new Promise((function(n){return n(w.current[t].validate(e))}))}),[]),Z=(0,r.useCallback)((function(t){var e=Object.keys(w.current).filter((function(t){return Jn(w.current[t].validate)})),n=e.length>0?e.map((function(e){return I(e,ar(t,e))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(t){return t.reduce((function(t,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(t=or(t,e[r],n)),t}),{})}))}),[I]),A=(0,r.useCallback)((function(t){return Promise.all([Z(t),p.validationSchema?S(t):{},p.validate?T(t):{}]).then((function(t){var e=t[0],n=t[1],r=t[2];return f.all([e,n,r],{arrayMerge:pr})}))}),[p.validate,p.validationSchema,Z,T,S]),C=gr((function(t){return void 0===t&&(t=x.values),_({type:"SET_ISVALIDATING",payload:!0}),A(t).then((function(t){return b.current&&(_({type:"SET_ISVALIDATING",payload:!1}),_({type:"SET_ERRORS",payload:t})),t}))}));(0,r.useEffect)((function(){s&&!0===b.current&&a()(y.current,p.initialValues)&&C(y.current)}),[s,C]);var D=(0,r.useCallback)((function(t){var e=t&&t.values?t.values:y.current,n=t&&t.errors?t.errors:g.current?g.current:p.initialErrors||{},r=t&&t.touched?t.touched:m.current?m.current:p.initialTouched||{},i=t&&t.status?t.status:k.current?k.current:p.initialStatus;y.current=e,g.current=n,m.current=r,k.current=i;var a=function(){_({type:"RESET_FORM",payload:{isSubmitting:!!t&&!!t.isSubmitting,errors:n,touched:r,status:i,values:e,isValidating:!!t&&!!t.isValidating,submitCount:t&&t.submitCount&&"number"===typeof t.submitCount?t.submitCount:0}})};if(p.onReset){var o=p.onReset(x.values,Q);ir(o)?o.then(a):a()}else a()}),[p.initialErrors,p.initialStatus,p.initialTouched]);(0,r.useEffect)((function(){!0!==b.current||a()(y.current,p.initialValues)||(h&&(y.current=p.initialValues,D()),s&&C(y.current))}),[h,p.initialValues,D,s,C]),(0,r.useEffect)((function(){h&&!0===b.current&&!a()(g.current,p.initialErrors)&&(g.current=p.initialErrors||fr,_({type:"SET_ERRORS",payload:p.initialErrors||fr}))}),[h,p.initialErrors]),(0,r.useEffect)((function(){h&&!0===b.current&&!a()(m.current,p.initialTouched)&&(m.current=p.initialTouched||hr,_({type:"SET_TOUCHED",payload:p.initialTouched||hr}))}),[h,p.initialTouched]),(0,r.useEffect)((function(){h&&!0===b.current&&!a()(k.current,p.initialStatus)&&(k.current=p.initialStatus,_({type:"SET_STATUS",payload:p.initialStatus}))}),[h,p.initialStatus,p.initialTouched]);var O=gr((function(t){if(w.current[t]&&Jn(w.current[t].validate)){var e=ar(x.values,t),n=w.current[t].validate(e);return ir(n)?(_({type:"SET_ISVALIDATING",payload:!0}),n.then((function(t){return t})).then((function(e){_({type:"SET_FIELD_ERROR",payload:{field:t,value:e}}),_({type:"SET_ISVALIDATING",payload:!1})}))):(_({type:"SET_FIELD_ERROR",payload:{field:t,value:n}}),Promise.resolve(n))}return p.validationSchema?(_({type:"SET_ISVALIDATING",payload:!0}),S(x.values,t).then((function(t){return t})).then((function(e){_({type:"SET_FIELD_ERROR",payload:{field:t,value:e[t]}}),_({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),F=(0,r.useCallback)((function(t,e){var n=e.validate;w.current[t]={validate:n}}),[]),N=(0,r.useCallback)((function(t){delete w.current[t]}),[]),R=gr((function(t,e){return _({type:"SET_TOUCHED",payload:t}),(void 0===e?o:e)?C(x.values):Promise.resolve()})),j=(0,r.useCallback)((function(t){_({type:"SET_ERRORS",payload:t})}),[]),L=gr((function(t,e){var r=Jn(t)?t(x.values):t;return _({type:"SET_VALUES",payload:r}),(void 0===e?n:e)?C(r):Promise.resolve()})),M=(0,r.useCallback)((function(t,e){_({type:"SET_FIELD_ERROR",payload:{field:t,value:e}})}),[]),P=gr((function(t,e,r){return _({type:"SET_FIELD_VALUE",payload:{field:t,value:e}}),(void 0===r?n:r)?C(or(x.values,t,e)):Promise.resolve()})),V=(0,r.useCallback)((function(t,e){var n,r=e,i=t;if(!nr(t)){t.persist&&t.persist();var a=t.target?t.target:t.currentTarget,o=a.type,u=a.name,s=a.id,c=a.value,l=a.checked,f=(a.outerHTML,a.options),h=a.multiple;r=e||(u||s),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(t,e,n){if("boolean"===typeof t)return Boolean(e);var r=[],i=!1,a=-1;if(Array.isArray(t))r=t,i=(a=t.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(e);if(e&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(ar(x.values,r),l,c):f&&h?function(t){return Array.from(t).filter((function(t){return t.selected})).map((function(t){return t.value}))}(f):c}r&&P(r,i)}),[P,x.values]),U=gr((function(t){if(nr(t))return function(e){return V(e,t)};V(t)})),B=gr((function(t,e,n){return void 0===e&&(e=!0),_({type:"SET_FIELD_TOUCHED",payload:{field:t,value:e}}),(void 0===n?o:n)?C(x.values):Promise.resolve()})),q=(0,r.useCallback)((function(t,e){t.persist&&t.persist();var n=t.target,r=n.name,i=n.id,a=(n.outerHTML,e||(r||i));B(a,!0)}),[B]),z=gr((function(t){if(nr(t))return function(e){return q(e,t)};q(t)})),K=(0,r.useCallback)((function(t){Jn(t)?_({type:"SET_FORMIK_STATE",payload:t}):_({type:"SET_FORMIK_STATE",payload:function(){return t}})}),[]),G=(0,r.useCallback)((function(t){_({type:"SET_STATUS",payload:t})}),[]),H=(0,r.useCallback)((function(t){_({type:"SET_ISSUBMITTING",payload:t})}),[]),$=gr((function(){return _({type:"SUBMIT_ATTEMPT"}),C().then((function(t){var e=t instanceof Error;if(!e&&0===Object.keys(t).length){var n;try{if(void 0===(n=X()))return}catch(r){throw r}return Promise.resolve(n).then((function(t){return b.current&&_({type:"SUBMIT_SUCCESS"}),t})).catch((function(t){if(b.current)throw _({type:"SUBMIT_FAILURE"}),t}))}if(b.current&&(_({type:"SUBMIT_FAILURE"}),e))throw t}))})),W=gr((function(t){t&&t.preventDefault&&Jn(t.preventDefault)&&t.preventDefault(),t&&t.stopPropagation&&Jn(t.stopPropagation)&&t.stopPropagation(),$().catch((function(t){console.warn("Warning: An unhandled error was caught from submitForm()",t)}))})),Q={resetForm:D,validateForm:C,validateField:O,setErrors:j,setFieldError:M,setFieldTouched:B,setFieldValue:P,setStatus:G,setSubmitting:H,setTouched:R,setValues:L,setFormikState:K,submitForm:$},X=gr((function(){return v(x.values,Q)})),Y=gr((function(t){t&&t.preventDefault&&Jn(t.preventDefault)&&t.preventDefault(),t&&t.stopPropagation&&Jn(t.stopPropagation)&&t.stopPropagation(),D()})),J=(0,r.useCallback)((function(t){return{value:ar(x.values,t),error:ar(x.errors,t),touched:!!ar(x.touched,t),initialValue:ar(y.current,t),initialTouched:!!ar(m.current,t),initialError:ar(g.current,t)}}),[x.errors,x.touched,x.values]),tt=(0,r.useCallback)((function(t){return{setValue:function(e,n){return P(t,e,n)},setTouched:function(e,n){return B(t,e,n)},setError:function(e){return M(t,e)}}}),[P,B,M]),et=(0,r.useCallback)((function(t){var e=tr(t),n=e?t.name:t,r=ar(x.values,n),i={name:n,value:r,onChange:U,onBlur:z};if(e){var a=t.type,o=t.value,u=t.as,s=t.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===u&&s&&(i.value=i.value||[],i.multiple=!0)}return i}),[z,U,x.values]),nt=(0,r.useMemo)((function(){return!a()(y.current,x.values)}),[y.current,x.values]),rt=(0,r.useMemo)((function(){return"undefined"!==typeof c?nt?x.errors&&0===Object.keys(x.errors).length:!1!==c&&Jn(c)?c(p):c:x.errors&&0===Object.keys(x.errors).length}),[c,nt,x.errors,p]);return $n({},x,{initialValues:y.current,initialErrors:g.current,initialTouched:m.current,initialStatus:k.current,handleBlur:z,handleChange:U,handleReset:Y,handleSubmit:W,resetForm:D,setErrors:j,setFormikState:K,setFieldTouched:B,setFieldValue:P,setFieldError:M,setStatus:G,setSubmitting:H,setTouched:R,setValues:L,submitForm:$,validateForm:C,validateField:O,isValid:rt,dirty:nt,unregisterField:N,registerField:F,getFieldProps:et,getFieldMeta:J,getFieldHelpers:tt,validateOnBlur:o,validateOnChange:n,validateOnMount:s})}function dr(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=String(n);!0===Array.isArray(t[r])?e[r]=t[r].map((function(t){return!0===Array.isArray(t)||F(t)?dr(t):""!==t?t:void 0})):F(t[r])?e[r]=dr(t[r]):e[r]=""!==t[r]?t[r]:void 0}return e}function pr(t,e,n){var r=t.slice();return e.forEach((function(e,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(e);r[i]=a?f(Array.isArray(e)?[]:{},e,n):e}else n.isMergeableObject(e)?r[i]=f(t[i],e,n):-1===t.indexOf(e)&&r.push(e)})),r}var yr="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function gr(t){var e=(0,r.useRef)(t);return yr((function(){e.current=t})),(0,r.useCallback)((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.current.apply(void 0,n)}),[])}(0,r.forwardRef)((function(t,e){var n=t.action,i=Qn(t,["action"]),a=null!=n?n:"#",o=cr(),u=o.handleReset,s=o.handleSubmit;return(0,r.createElement)("form",Object.assign({onSubmit:s,ref:e,onReset:u,action:a},i))})).displayName="Form";var mr=function(t,e,n){var r=kr(t);return r.splice(e,0,n),r},kr=function(t){if(t){if(Array.isArray(t))return[].concat(t);var e=Object.keys(t).map((function(t){return parseInt(t)})).reduce((function(t,e){return e>t?e:t}),0);return Array.from($n({},t,{length:e+1}))}return[]},br=function(t){function e(e){var n;return(n=t.call(this,e)||this).updateArrayField=function(t,e,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:t,o="function"===typeof e?e:t,u=or(n.values,a,t(ar(n.values,a))),s=r?i(ar(n.errors,a)):void 0,c=e?o(ar(n.touched,a)):void 0;return Yn(s)&&(s=void 0),Yn(c)&&(c=void 0),$n({},n,{values:u,errors:r?or(n.errors,a,s):n.errors,touched:e?or(n.touched,a,c):n.touched})}))},n.push=function(t){return n.updateArrayField((function(e){return[].concat(kr(e),[Hn(t)])}),!1,!1)},n.handlePush=function(t){return function(){return n.push(t)}},n.swap=function(t,e){return n.updateArrayField((function(n){return function(t,e,n){var r=kr(t),i=r[e];return r[e]=r[n],r[n]=i,r}(n,t,e)}),!0,!0)},n.handleSwap=function(t,e){return function(){return n.swap(t,e)}},n.move=function(t,e){return n.updateArrayField((function(n){return function(t,e,n){var r=kr(t),i=r[e];return r.splice(e,1),r.splice(n,0,i),r}(n,t,e)}),!0,!0)},n.handleMove=function(t,e){return function(){return n.move(t,e)}},n.insert=function(t,e){return n.updateArrayField((function(n){return mr(n,t,e)}),(function(e){return mr(e,t,null)}),(function(e){return mr(e,t,null)}))},n.handleInsert=function(t,e){return function(){return n.insert(t,e)}},n.replace=function(t,e){return n.updateArrayField((function(n){return function(t,e,n){var r=kr(t);return r[e]=n,r}(n,t,e)}),!1,!1)},n.handleReplace=function(t,e){return function(){return n.replace(t,e)}},n.unshift=function(t){var e=-1;return n.updateArrayField((function(n){var r=n?[t].concat(n):[t];return e<0&&(e=r.length),r}),(function(t){var n=t?[null].concat(t):[null];return e<0&&(e=n.length),n}),(function(t){var n=t?[null].concat(t):[null];return e<0&&(e=n.length),n})),e},n.handleUnshift=function(t){return function(){return n.unshift(t)}},n.handleRemove=function(t){return function(){return n.remove(t)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(Xn(n)),n.pop=n.pop.bind(Xn(n)),n}Wn(e,t);var n=e.prototype;return n.componentDidUpdate=function(t){this.props.validateOnChange&&this.props.formik.validateOnChange&&!a()(ar(t.formik.values,t.name),ar(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(t){var e;return this.updateArrayField((function(n){var r=n?kr(n):[];return e||(e=r[t]),Jn(r.splice)&&r.splice(t,1),r}),!0,!0),e},n.pop=function(){var t;return this.updateArrayField((function(e){var n=e;return t||(t=n&&n.pop&&n.pop()),n}),!0,!0),t},n.render=function(){var t={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},e=this.props,n=e.component,i=e.render,a=e.children,o=e.name,u=$n({},t,{form:Qn(e.formik,["validate","validationSchema"]),name:o});return n?(0,r.createElement)(n,u):i?i(u):a?"function"===typeof a?a(u):rr(a)?null:r.Children.only(a):null},e}(r.Component);br.defaultProps={validateOnChange:!0};r.Component,r.Component},2110:function(t,e,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(t){return r.isMemo(t)?o:u[t.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=v(n);i&&i!==d&&t(e,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(e),p=s(n),y=0;y<o.length;++y){var g=o[y];if(!a[g]&&(!r||!r[g])&&(!p||!p[g])&&(!u||!u[g])){var m=h(n,g);try{c(e,g,m)}catch(k){}}}}return e}},908:function(t,e,n){var r=n(8136)(n(7009),"DataView");t.exports=r},9676:function(t,e,n){var r=n(5403),i=n(2747),a=n(6037),o=n(4154),u=n(7728);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,t.exports=s},8384:function(t,e,n){var r=n(3894),i=n(8699),a=n(4957),o=n(7184),u=n(7109);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,t.exports=s},5797:function(t,e,n){var r=n(8136)(n(7009),"Map");t.exports=r},8059:function(t,e,n){var r=n(4086),i=n(9255),a=n(9186),o=n(3423),u=n(3739);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=u,t.exports=s},8319:function(t,e,n){var r=n(8136)(n(7009),"Promise");t.exports=r},3924:function(t,e,n){var r=n(8136)(n(7009),"Set");t.exports=r},692:function(t,e,n){var r=n(8059),i=n(5774),a=n(1596);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},2854:function(t,e,n){var r=n(8384),i=n(511),a=n(835),o=n(707),u=n(8832),s=n(5077);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=u,c.prototype.set=s,t.exports=c},7197:function(t,e,n){var r=n(7009).Symbol;t.exports=r},6219:function(t,e,n){var r=n(7009).Uint8Array;t.exports=r},7091:function(t,e,n){var r=n(8136)(n(7009),"WeakMap");t.exports=r},4903:function(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},7538:function(t,e,n){var r=n(6478),i=n(4963),a=n(3629),o=n(5174),u=n(6800),s=n(9102),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),l=!n&&i(t),f=!n&&!l&&o(t),h=!n&&!l&&!f&&s(t),v=n||l||f||h,d=v?r(t.length,String):[],p=d.length;for(var y in t)!e&&!c.call(t,y)||v&&("length"==y||f&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,p))||d.push(y);return d}},8950:function(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},1705:function(t){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2095:function(t){t.exports=function(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}},7897:function(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},4622:function(t){t.exports=function(t){return t.split("")}},240:function(t){var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},7112:function(t,e,n){var r=n(9231);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},2526:function(t,e,n){var r=n(8528);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5099:function(t,e,n){var r=n(372)();t.exports=r},5358:function(t,e,n){var r=n(5099),i=n(2742);t.exports=function(t,e){return t&&r(t,e,i)}},8667:function(t,e,n){var r=n(3082),i=n(9793);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},1986:function(t,e,n){var r=n(1705),i=n(3629);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},9066:function(t,e,n){var r=n(7197),i=n(1587),a=n(3581),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},7852:function(t){var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},529:function(t){t.exports=function(t,e){return null!=t&&e in Object(t)}},4906:function(t,e,n){var r=n(9066),i=n(3141);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},1848:function(t,e,n){var r=n(3355),i=n(3141);t.exports=function t(e,n,a,o,u){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,a,o,t,u))}},3355:function(t,e,n){var r=n(2854),i=n(5305),a=n(2206),o=n(8078),u=n(8383),s=n(3629),c=n(5174),l=n(9102),f="[object Arguments]",h="[object Array]",v="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,y,g){var m=s(t),k=s(e),b=m?h:u(t),w=k?h:u(e),E=(b=b==f?v:b)==v,x=(w=w==f?v:w)==v,_=b==w;if(_&&c(t)){if(!c(e))return!1;m=!0,E=!1}if(_&&!E)return g||(g=new r),m||l(t)?i(t,e,n,p,y,g):a(t,e,b,n,p,y,g);if(!(1&n)){var T=E&&d.call(t,"__wrapped__"),S=x&&d.call(e,"__wrapped__");if(T||S){var I=T?t.value():t,Z=S?e.value():e;return g||(g=new r),y(I,Z,n,p,g)}}return!!_&&(g||(g=new r),o(t,e,n,p,y,g))}},8856:function(t,e,n){var r=n(2854),i=n(1848);t.exports=function(t,e,n,a){var o=n.length,u=o,s=!a;if(null==t)return!u;for(t=Object(t);o--;){var c=n[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<u;){var l=(c=n[o])[0],f=t[l],h=c[1];if(s&&c[2]){if(void 0===f&&!(l in t))return!1}else{var v=new r;if(a)var d=a(f,h,l,t,e,v);if(!(void 0===d?i(h,f,3,a,v):d))return!1}}return!0}},6703:function(t,e,n){var r=n(4786),i=n(257),a=n(8092),o=n(7907),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?h:u).test(o(t))}},8150:function(t,e,n){var r=n(9066),i=n(4635),a=n(3141),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},6025:function(t,e,n){var r=n(7080),i=n(4322),a=n(2100),o=n(3629),u=n(38);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):u(t)}},3654:function(t,e,n){var r=n(2936),i=n(8836),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},7080:function(t,e,n){var r=n(8856),i=n(9091),a=n(284);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},4322:function(t,e,n){var r=n(1848),i=n(6181),a=n(5658),o=n(5823),u=n(5072),s=n(284),c=n(9793);t.exports=function(t,e){return o(t)&&u(e)?s(c(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,3)}}},9586:function(t){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},4084:function(t,e,n){var r=n(8667);t.exports=function(t){return function(e){return r(e,t)}}},4632:function(t){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},2646:function(t){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}},6478:function(t){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},2446:function(t,e,n){var r=n(7197),i=n(8950),a=n(3629),o=n(152),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},6194:function(t){t.exports=function(t){return function(e){return t(e)}}},75:function(t){t.exports=function(t,e){return t.has(e)}},3082:function(t,e,n){var r=n(3629),i=n(5823),a=n(170),o=n(3518);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},9813:function(t,e,n){var r=n(2646);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},5525:function(t,e,n){var r=n(7009)["__core-js_shared__"];t.exports=r},372:function(t){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),u=o.length;u--;){var s=o[t?u:++i];if(!1===n(a[s],s,a))break}return e}}},322:function(t,e,n){var r=n(9813),i=n(7302),a=n(7580),o=n(3518);t.exports=function(t){return function(e){e=o(e);var n=i(e)?a(e):void 0,u=n?n[0]:e.charAt(0),s=n?r(n,1).join(""):e.slice(1);return u[t]()+s}}},7810:function(t,e,n){var r=n(2095),i=n(4857),a=n(5660),o=RegExp("['\u2019]","g");t.exports=function(t){return function(e){return r(a(i(e).replace(o,"")),t,"")}}},5868:function(t,e,n){var r=n(4632)({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});t.exports=r},8528:function(t,e,n){var r=n(8136),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},5305:function(t,e,n){var r=n(692),i=n(7897),a=n(75);t.exports=function(t,e,n,o,u,s){var c=1&n,l=t.length,f=e.length;if(l!=f&&!(c&&f>l))return!1;var h=s.get(t),v=s.get(e);if(h&&v)return h==e&&v==t;var d=-1,p=!0,y=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var g=t[d],m=e[d];if(o)var k=c?o(m,g,d,e,t,s):o(g,m,d,t,e,s);if(void 0!==k){if(k)continue;p=!1;break}if(y){if(!i(e,(function(t,e){if(!a(y,e)&&(g===t||u(g,t,n,o,s)))return y.push(e)}))){p=!1;break}}else if(g!==m&&!u(g,m,n,o,s)){p=!1;break}}return s.delete(t),s.delete(e),p}},2206:function(t,e,n){var r=n(7197),i=n(6219),a=n(9231),o=n(5305),u=n(234),s=n(2230),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,f,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!f(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var v=u;case"[object Set]":var d=1&r;if(v||(v=s),t.size!=e.size&&!d)return!1;var p=h.get(t);if(p)return p==e;r|=2,h.set(t,e);var y=o(v(t),v(e),r,c,f,h);return h.delete(t),y;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},8078:function(t,e,n){var r=n(8248),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,u){var s=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!s)return!1;for(var f=l;f--;){var h=c[f];if(!(s?h in e:i.call(e,h)))return!1}var v=u.get(t),d=u.get(e);if(v&&d)return v==e&&d==t;var p=!0;u.set(t,e),u.set(e,t);for(var y=s;++f<l;){var g=t[h=c[f]],m=e[h];if(a)var k=s?a(m,g,h,e,t,u):a(g,m,h,t,e,u);if(!(void 0===k?g===m||o(g,m,n,a,u):k)){p=!1;break}y||(y="constructor"==h)}if(p&&!y){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return u.delete(t),u.delete(e),p}},1032:function(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},8248:function(t,e,n){var r=n(1986),i=n(5918),a=n(2742);t.exports=function(t){return r(t,a,i)}},2799:function(t,e,n){var r=n(5964);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},9091:function(t,e,n){var r=n(5072),i=n(2742);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},8136:function(t,e,n){var r=n(6703),i=n(40);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},1587:function(t,e,n){var r=n(7197),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(s){}var i=o.call(t);return r&&(e?t[u]=n:delete t[u]),i}},5918:function(t,e,n){var r=n(4903),i=n(8174),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,u=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=u},8383:function(t,e,n){var r=n(908),i=n(5797),a=n(8319),o=n(3924),u=n(7091),s=n(9066),c=n(7907),l="[object Map]",f="[object Promise]",h="[object Set]",v="[object WeakMap]",d="[object DataView]",p=c(r),y=c(i),g=c(a),m=c(o),k=c(u),b=s;(r&&b(new r(new ArrayBuffer(1)))!=d||i&&b(new i)!=l||a&&b(a.resolve())!=f||o&&b(new o)!=h||u&&b(new u)!=v)&&(b=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case p:return d;case y:return l;case g:return f;case m:return h;case k:return v}return e}),t.exports=b},40:function(t){t.exports=function(t,e){return null==t?void 0:t[e]}},6417:function(t,e,n){var r=n(3082),i=n(4963),a=n(3629),o=n(6800),u=n(4635),s=n(9793);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,f=!1;++c<l;){var h=s(e[c]);if(!(f=null!=t&&n(t,h)))break;t=t[h]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&u(l)&&o(h,l)&&(a(t)||i(t))}},7302:function(t){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},7137:function(t){var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5403:function(t,e,n){var r=n(9620);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2747:function(t){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},6037:function(t,e,n){var r=n(9620),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},4154:function(t,e,n){var r=n(9620),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7728:function(t,e,n){var r=n(9620);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},6800:function(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},5823:function(t,e,n){var r=n(3629),i=n(152),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},5964:function(t){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},257:function(t,e,n){var r=n(5525),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},2936:function(t){var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},5072:function(t,e,n){var r=n(8092);t.exports=function(t){return t===t&&!r(t)}},3894:function(t){t.exports=function(){this.__data__=[],this.size=0}},8699:function(t,e,n){var r=n(7112),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},4957:function(t,e,n){var r=n(7112);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7184:function(t,e,n){var r=n(7112);t.exports=function(t){return r(this.__data__,t)>-1}},7109:function(t,e,n){var r=n(7112);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},4086:function(t,e,n){var r=n(9676),i=n(8384),a=n(5797);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},9255:function(t,e,n){var r=n(2799);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},9186:function(t,e,n){var r=n(2799);t.exports=function(t){return r(this,t).get(t)}},3423:function(t,e,n){var r=n(2799);t.exports=function(t){return r(this,t).has(t)}},3739:function(t,e,n){var r=n(2799);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},234:function(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},284:function(t){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},4634:function(t,e,n){var r=n(9151);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},9620:function(t,e,n){var r=n(8136)(Object,"create");t.exports=r},8836:function(t,e,n){var r=n(2709)(Object.keys,Object);t.exports=r},9494:function(t,e,n){t=n.nmd(t);var r=n(1032),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=u},3581:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},2709:function(t){t.exports=function(t,e){return function(n){return t(e(n))}}},7009:function(t,e,n){var r=n(1032),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},5774:function(t){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},1596:function(t){t.exports=function(t){return this.__data__.has(t)}},2230:function(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},511:function(t,e,n){var r=n(8384);t.exports=function(){this.__data__=new r,this.size=0}},835:function(t){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},707:function(t){t.exports=function(t){return this.__data__.get(t)}},8832:function(t){t.exports=function(t){return this.__data__.has(t)}},5077:function(t,e,n){var r=n(8384),i=n(5797),a=n(8059);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},7580:function(t,e,n){var r=n(4622),i=n(7302),a=n(2129);t.exports=function(t){return i(t)?a(t):r(t)}},170:function(t,e,n){var r=n(4634),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)})),e}));t.exports=o},9793:function(t,e,n){var r=n(152);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},7907:function(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},2129:function(t){var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",l=c+s+("(?:\\u200d(?:"+[a,o,u].join("|")+")"+c+s+")*"),f="(?:"+[a+r+"?",r,o,u,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+f+l,"g");t.exports=function(t){return t.match(h)||[]}},1029:function(t){var e="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+a+"]",u="\\d+",s="["+n+"]",c="["+r+"]",l="[^"+e+a+u+n+r+i+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",v="["+i+"]",d="(?:"+c+"|"+l+")",p="(?:"+v+"|"+l+")",y="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",g="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",k="[\\ufe0e\\ufe0f]?",b=k+m+("(?:\\u200d(?:"+["[^"+e+"]",f,h].join("|")+")"+k+m+")*"),w="(?:"+[s,f,h].join("|")+")"+b,E=RegExp([v+"?"+c+"+"+y+"(?="+[o,v,"$"].join("|")+")",p+"+"+g+"(?="+[o,v+d,"$"].join("|")+")",v+"?"+d+"+"+y,v+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u,w].join("|"),"g");t.exports=function(t){return t.match(E)||[]}},567:function(t,e,n){var r=n(3131),i=n(7810)((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=i},3131:function(t,e,n){var r=n(3518),i=n(2085);t.exports=function(t){return i(r(t).toLowerCase())}},4857:function(t,e,n){var r=n(5868),i=n(3518),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(a,r).replace(o,"")}},9231:function(t){t.exports=function(t,e){return t===e||t!==t&&e!==e}},6181:function(t,e,n){var r=n(8667);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},7805:function(t,e,n){var r=n(7852),i=n(6417);t.exports=function(t,e){return null!=t&&i(t,e,r)}},5658:function(t,e,n){var r=n(529),i=n(6417);t.exports=function(t,e){return null!=t&&i(t,e,r)}},2100:function(t){t.exports=function(t){return t}},4963:function(t,e,n){var r=n(4906),i=n(3141),a=Object.prototype,o=a.hasOwnProperty,u=a.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},3629:function(t){var e=Array.isArray;t.exports=e},1473:function(t,e,n){var r=n(4786),i=n(4635);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},5174:function(t,e,n){t=n.nmd(t);var r=n(7009),i=n(9488),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,u=o&&o.exports===a?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||i;t.exports=s},4786:function(t,e,n){var r=n(9066),i=n(8092);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},4635:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},8092:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3141:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},152:function(t,e,n){var r=n(9066),i=n(3141);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},9102:function(t,e,n){var r=n(8150),i=n(6194),a=n(9494),o=a&&a.isTypedArray,u=o?i(o):r;t.exports=u},2742:function(t,e,n){var r=n(7538),i=n(3654),a=n(1473);t.exports=function(t){return a(t)?r(t):i(t)}},9029:function(t,e,n){var r=n(2526),i=n(5358),a=n(6025);t.exports=function(t,e){var n={};return e=a(e,3),i(t,(function(t,i,a){r(n,e(t,i,a),t)})),n}},7702:function(t,e,n){var r=n(2526),i=n(5358),a=n(6025);t.exports=function(t,e){var n={};return e=a(e,3),i(t,(function(t,i,a){r(n,i,e(t,i,a))})),n}},9151:function(t,e,n){var r=n(8059);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},38:function(t,e,n){var r=n(9586),i=n(4084),a=n(5823),o=n(9793);t.exports=function(t){return a(t)?r(o(t)):i(t)}},7499:function(t,e,n){var r=n(7810)((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));t.exports=r},8174:function(t){t.exports=function(){return[]}},9488:function(t){t.exports=function(){return!1}},3518:function(t,e,n){var r=n(2446);t.exports=function(t){return null==t?"":r(t)}},2085:function(t,e,n){var r=n(322)("toUpperCase");t.exports=r},5660:function(t,e,n){var r=n(240),i=n(7137),a=n(3518),o=n(1029);t.exports=function(t,e,n){return t=a(t),void 0===(e=n?void 0:e)?i(t)?o(t):r(t):t.match(e)||[]}},2758:function(t){"use strict";function e(t){this._maxSize=t,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(t){return this._values[t]},e.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,u=new e(512),s=new e(512),c=new e(512);function l(t){return u.get(t)||u.set(t,f(t).map((function(t){return t.replace(o,"$2")})))}function f(t){return t.match(n)||[""]}function h(t){return"string"===typeof t&&t&&-1!==["'",'"'].indexOf(t.charAt(0))}function v(t){return!h(t)&&(function(t){return t.match(i)&&!t.match(r)}(t)||function(t){return a.test(t)}(t))}t.exports={Cache:e,split:f,normalizePath:l,setter:function(t){var e=l(t);return s.get(t)||s.set(t,(function(t,n){for(var r=0,i=e.length,a=t;r<i-1;){var o=e[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return t;a=a[e[r++]]}a[e[r]]=n}))},getter:function(t,e){var n=l(t);return c.get(t)||c.set(t,(function(t){for(var r=0,i=n.length;r<i;){if(null==t&&e)return;t=t[n[r++]]}return t}))},join:function(t){return t.reduce((function(t,e){return t+(h(e)||r.test(e)?"["+e+"]":(t?".":"")+e)}),"")},forEach:function(t,e,n){!function(t,e,n){var r,i,a,o,u=t.length;for(i=0;i<u;i++)(r=t[i])&&(v(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),e.call(n,r,o,a,i,t))}(Array.isArray(t)?t:f(t),e,n)}}},77:function(t){"use strict";var e=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){var u,s,c,l=e(t),f=e(o);if(l&&f){if((s=t.length)!=o.length)return!1;for(u=s;0!==u--;)if(!a(t[u],o[u]))return!1;return!0}if(l!=f)return!1;var h=t instanceof Date,v=o instanceof Date;if(h!=v)return!1;if(h&&v)return t.getTime()==o.getTime();var d=t instanceof RegExp,p=o instanceof RegExp;if(d!=p)return!1;if(d&&p)return t.toString()==o.toString();var y=n(t);if((s=y.length)!==n(o).length)return!1;for(u=s;0!==u--;)if(!r.call(o,y[u]))return!1;if(i&&t instanceof Element&&o instanceof Element)return t===o;for(u=s;0!==u--;)if(("_owner"!==(c=y[u])||!t.$$typeof)&&!a(t[c],o[c]))return!1;return!0}return t!==t&&o!==o}t.exports=function(t,e){try{return a(t,e)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},1372:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,v=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case l:case f:case a:case u:case o:case v:return t;default:switch(t=t&&t.$$typeof){case c:case h:case y:case p:case s:return t;default:return e}}case i:return e}}}function E(t){return w(t)===f}e.AsyncMode=l,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=s,e.Element=r,e.ForwardRef=h,e.Fragment=a,e.Lazy=y,e.Memo=p,e.Portal=i,e.Profiler=u,e.StrictMode=o,e.Suspense=v,e.isAsyncMode=function(t){return E(t)||w(t)===l},e.isConcurrentMode=E,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===s},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===h},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===y},e.isMemo=function(t){return w(t)===p},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===o},e.isSuspense=function(t){return w(t)===v},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===f||t===u||t===o||t===v||t===d||"object"===typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===p||t.$$typeof===s||t.$$typeof===c||t.$$typeof===h||t.$$typeof===m||t.$$typeof===k||t.$$typeof===b||t.$$typeof===g)},e.typeOf=w},7441:function(t,e,n){"use strict";t.exports=n(1372)},6514:function(t){function e(t,e){var n=t.length,r=new Array(n),i={},a=n,o=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}(e),u=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}(t);for(e.forEach((function(t){if(!u.has(t[0])||!u.has(t[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||s(t[a],a,new Set);return r;function s(t,e,a){if(a.has(t)){var c;try{c=", node was:"+JSON.stringify(t)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!u.has(t))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(t));if(!i[e]){i[e]=!0;var l=o.get(t)||new Set;if(e=(l=Array.from(l)).length){a.add(t);do{var f=l[--e];s(f,u.get(f),a)}while(e);a.delete(t)}r[--n]=t}}}t.exports=function(t){return e(function(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var i=t[n];e.add(i[0]),e.add(i[1])}return Array.from(e)}(t),t)},t.exports.array=e},1724:function(t,e,n){"use strict";n.d(e,{Ry:function(){return Bt},Z_:function(){return kt}});var r,i,a=n(2982),o=n(5671),u=n(3144);try{r=Map}catch(Kt){}try{i=Set}catch(Kt){}function s(t,e,n){if(!t||"object"!==typeof t||"function"===typeof t)return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(Array.isArray(t))return t.map(c);if(r&&t instanceof r)return new Map(Array.from(t.entries()));if(i&&t instanceof i)return new Set(Array.from(t.values()));if(t instanceof Object){e.push(t);var a=Object.create(t);for(var o in n.push(a),t){var u=e.findIndex((function(e){return e===t[o]}));a[o]=u>-1?n[u]:s(t[o],e,n)}return a}return t}function c(t){return s(t,[],[])}var l=Object.prototype.toString,f=Error.prototype.toString,h=RegExp.prototype.toString,v="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},d=/^Symbol\((.*)\)(.*)$/;function p(t){return t!=+t?"NaN":0===t&&1/t<0?"-0":""+t}function y(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==t||!0===t||!1===t)return""+t;var n=typeof t;if("number"===n)return p(t);if("string"===n)return e?'"'.concat(t,'"'):t;if("function"===n)return"[Function "+(t.name||"anonymous")+"]";if("symbol"===n)return v.call(t).replace(d,"Symbol($1)");var r=l.call(t).slice(8,-1);return"Date"===r?isNaN(t.getTime())?""+t:t.toISOString(t):"Error"===r||t instanceof Error?"["+f.call(t)+"]":"RegExp"===r?h.call(t):null}function g(t,e){var n=y(t,e);return null!==n?n:JSON.stringify(t,(function(t,n){var r=y(this[t],e);return null!==r?r:n}),2)}var m={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(t){var e=t.path,n=t.type,r=t.value,i=t.originalValue,a=null!=i&&i!==r,o="".concat(e," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(g(r,!0),"`")+(a?" (cast from the value `".concat(g(i,!0),"`)."):".");return null===r&&(o+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),o},defined:"${path} must be defined"},k={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},b={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},w={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},E={isValue:"${path} field must be ${value}"},x={noUnknown:"${path} field has unspecified keys: ${unknown}"},_={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},T=(Object.assign(Object.create(null),{mixed:m,string:k,number:b,date:w,object:x,array:_,boolean:E}),n(7805)),S=n.n(T),I=function(t){return t&&t.__isYupSchema__},Z=function(){function t(e,n){if((0,o.Z)(this,t),this.fn=void 0,this.refs=e,this.refs=e,"function"!==typeof n){if(!S()(n,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,u="function"===typeof r?r:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return t===r}))};this.fn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.pop(),o=e.pop(),s=u.apply(void 0,e)?i:a;if(s)return"function"===typeof s?s(o):o.concat(s.resolve(r))}}else this.fn=n}return(0,u.Z)(t,[{key:"resolve",value:function(t,e){var n=this.refs.map((function(t){return t.getValue(null==e?void 0:e.value,null==e?void 0:e.parent,null==e?void 0:e.context)})),r=this.fn.apply(t,n.concat(t,e));if(void 0===r||r===t)return t;if(!I(r))throw new TypeError("conditions must return a schema object");return r.resolve(e)}}]),t}(),A=Z,C=n(7326),D=n(136),O=n(7277),F=n(8664);function N(t){return null==t?[]:[].concat(t)}function R(){return R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R.apply(this,arguments)}var j=/\$\{\s*(\w+)\s*\}/g,L=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(t,r,i,u){var s;return(0,o.Z)(this,n),(s=e.call(this)).value=void 0,s.path=void 0,s.type=void 0,s.errors=void 0,s.params=void 0,s.inner=void 0,s.name="ValidationError",s.value=r,s.path=i,s.type=u,s.errors=[],s.inner=[],N(t).forEach((function(t){var e;n.isError(t)?((e=s.errors).push.apply(e,(0,a.Z)(t.errors)),s.inner=s.inner.concat(t.inner.length?t.inner:t)):s.errors.push(t)})),s.message=s.errors.length>1?"".concat(s.errors.length," errors occurred"):s.errors[0],Error.captureStackTrace&&Error.captureStackTrace((0,C.Z)(s),n),s}return(0,u.Z)(n,null,[{key:"formatError",value:function(t,e){var n=e.label||e.path||"this";return n!==e.path&&(e=R({},e,{path:n})),"string"===typeof t?t.replace(j,(function(t,n){return g(e[n])})):"function"===typeof t?t(e):t}},{key:"isError",value:function(t){return t&&"ValidationError"===t.name}}]),n}((0,F.Z)(Error));function M(t,e){var n=t.endEarly,r=t.tests,i=t.args,o=t.value,u=t.errors,s=t.sort,c=t.path,l=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(e),f=r.length,h=[];if(u=u||[],!f)return u.length?l(new L(u,o,c)):l(null,o);for(var v=0;v<r.length;v++){(0,r[v])(i,(function(t){if(t){if(!L.isError(t))return l(t,o);if(n)return t.value=o,l(t,o);h.push(t)}if(--f<=0){if(h.length&&(s&&h.sort(s),u.length&&h.push.apply(h,(0,a.Z)(u)),u=h),u.length)return void l(new L(u,o,c),o);l(null,o)}}))}}var P=n(7702),V=n.n(P),U=n(2758),B="$",q=".";var z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.Z)(this,t),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===B,this.isValue=this.key[0]===q,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?B:this.isValue?q:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,U.getter)(this.path,!0),this.map=n.map}return(0,u.Z)(t,[{key:"getValue",value:function(t,e,n){var r=this.isContext?n:this.isValue?t:e;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(t,e){return this.getValue(t,null==e?void 0:e.parent,null==e?void 0:e.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(t){return t&&t.__isYupRef}}]),t}();function K(){return K=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K.apply(this,arguments)}function G(t){function e(e,n){var r=e.value,i=e.path,a=void 0===i?"":i,o=e.label,u=e.options,s=e.originalValue,c=e.sync,l=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["value","path","label","options","originalValue","sync"]),f=t.name,h=t.test,v=t.params,d=t.message,p=u.parent,y=u.context;function g(t){return z.isRef(t)?t.getValue(r,p,y):t}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=V()(K({value:r,originalValue:s,label:o,path:t.path||a},v,t.params),g),n=new L(L.formatError(t.message||d,e),r,e.path,t.type||f);return n.params=e,n}var k=K({path:a,parent:p,type:f,createError:m,resolve:g,options:u,originalValue:s},l);if(c){var b;try{var w;if("function"===typeof(null==(w=b=h.call(k,r,k))?void 0:w.then))throw new Error('Validation test of type: "'.concat(k.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(E){return void n(E)}L.isError(b)?n(b):b?n(null,b):n(m())}else try{Promise.resolve(h.call(k,r,k)).then((function(t){L.isError(t)?n(t):t?n(null,t):n(m())})).catch(n)}catch(E){n(E)}}return e.OPTIONS=t,e}z.prototype.__isYupRef=!0;var H=function(t){return t.substr(0,t.length-1).substr(1)};function $(t,e,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return e?((0,U.forEach)(e,(function(u,s,c){var l=s?H(u):u;if((t=t.resolve({context:o,parent:r,value:n})).innerType){var f=c?parseInt(l,10):0;if(n&&f>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(u,", in the path: ").concat(e,". ")+"because there is no value at that index. ");r=n,n=n&&n[f],t=t.innerType}if(!c){if(!t.fields||!t.fields[l])throw new Error("The schema does not contain the path: ".concat(e,". ")+"(failed at: ".concat(a,' which is a type: "').concat(t._type,'")'));r=n,n=n&&n[l],t=t.fields[l]}i=l,a=s?"["+u+"]":"."+u})),{schema:t,parent:r,parentPath:i}):{parent:r,parentPath:e,schema:t}}var W=n(885),Q=n(7762),X=function(){function t(){(0,o.Z)(this,t),this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}return(0,u.Z)(t,[{key:"size",get:function(){return this.list.size+this.refs.size}},{key:"describe",value:function(){var t,e=[],n=(0,Q.Z)(this.list);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r)}}catch(u){n.e(u)}finally{n.f()}var i,a=(0,Q.Z)(this.refs);try{for(a.s();!(i=a.n()).done;){var o=(0,W.Z)(i.value,2)[1];e.push(o.describe())}}catch(u){a.e(u)}finally{a.f()}return e}},{key:"toArray",value:function(){return Array.from(this.list).concat(Array.from(this.refs.values()))}},{key:"resolveAll",value:function(t){return this.toArray().reduce((function(e,n){return e.concat(z.isRef(n)?t(n):n)}),[])}},{key:"add",value:function(t){z.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}},{key:"delete",value:function(t){z.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}},{key:"clone",value:function(){var e=new t;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}},{key:"merge",value:function(t,e){var n=this.clone();return t.list.forEach((function(t){return n.add(t)})),t.refs.forEach((function(t){return n.add(t)})),e.list.forEach((function(t){return n.delete(t)})),e.refs.forEach((function(t){return n.delete(t)})),n}}]),t}();function Y(){return Y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y.apply(this,arguments)}var J=function(){function t(e){var n=this;(0,o.Z)(this,t),this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new X,this._blacklist=new X,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(m.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=Y({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}return(0,u.Z)(t,[{key:"_type",get:function(){return this.type}},{key:"_typeCheck",value:function(t){return!0}},{key:"clone",value:function(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;var e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e._typeError=this._typeError,e._whitelistError=this._whitelistError,e._blacklistError=this._blacklistError,e._whitelist=this._whitelist.clone(),e._blacklist=this._blacklist.clone(),e.exclusiveTests=Y({},this.exclusiveTests),e.deps=(0,a.Z)(this.deps),e.conditions=(0,a.Z)(this.conditions),e.tests=(0,a.Z)(this.tests),e.transforms=(0,a.Z)(this.transforms),e.spec=c(Y({},this.spec,t)),e}},{key:"label",value:function(t){var e=this.clone();return e.spec.label=t,e}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},arguments.length<=0?void 0:arguments[0]),t}},{key:"withMutation",value:function(t){var e=this._mutate;this._mutate=!0;var n=t(this);return this._mutate=e,n}},{key:"concat",value:function(t){if(!t||t===this)return this;if(t.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(t.type));var e=this,n=t.clone(),r=Y({},e.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=e._typeError),n._whitelistError||(n._whitelistError=e._whitelistError),n._blacklistError||(n._blacklistError=e._blacklistError),n._whitelist=e._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=e._blacklist.merge(t._blacklist,t._whitelist),n.tests=e.tests,n.exclusiveTests=e.exclusiveTests,n.withMutation((function(e){t.tests.forEach((function(t){e.test(t.OPTIONS)}))})),n.transforms=[].concat((0,a.Z)(e.transforms),(0,a.Z)(n.transforms)),n}},{key:"isType",value:function(t){return!(!this.spec.nullable||null!==t)||this._typeCheck(t)}},{key:"resolve",value:function(t){var e=this;if(e.conditions.length){var n=e.conditions;(e=e.clone()).conditions=[],e=(e=n.reduce((function(e,n){return n.resolve(e,t)}),e)).resolve(t)}return e}},{key:"cast",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Y({value:t},e)),r=n._cast(t,e);if(void 0!==t&&!1!==e.assert&&!0!==n.isType(r)){var i=g(t),a=g(r);throw new TypeError("The value of ".concat(e.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n._type,'". \n\n')+"attempted value: ".concat(i," \n")+(a!==i?"result of cast: ".concat(a):""))}return r}},{key:"_cast",value:function(t,e){var n=this,r=void 0===t?t:this.transforms.reduce((function(e,r){return r.call(n,e,t,n)}),t);return void 0===r&&(r=this.getDefault()),r}},{key:"_validate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=n.sync,a=n.path,o=n.from,u=void 0===o?[]:o,s=n.originalValue,c=void 0===s?t:s,l=n.strict,f=void 0===l?this.spec.strict:l,h=n.abortEarly,v=void 0===h?this.spec.abortEarly:h,d=t;f||(d=this._cast(d,Y({assert:!1},n)));var p={value:d,path:a,options:n,originalValue:c,schema:this,label:this.spec.label,sync:i,from:u},y=[];this._typeError&&y.push(this._typeError);var g=[];this._whitelistError&&g.push(this._whitelistError),this._blacklistError&&g.push(this._blacklistError),M({args:p,value:d,path:a,sync:i,tests:y,endEarly:v},(function(t){t?r(t,d):M({tests:e.tests.concat(g),args:p,path:a,sync:i,value:d,endEarly:v},r)}))}},{key:"validate",value:function(t,e,n){var r=this.resolve(Y({},e,{value:t}));return"function"===typeof n?r._validate(t,e,n):new Promise((function(n,i){return r._validate(t,e,(function(t,e){t?i(t):n(e)}))}))}},{key:"validateSync",value:function(t,e){var n;return this.resolve(Y({},e,{value:t}))._validate(t,Y({},e,{sync:!0}),(function(t,e){if(t)throw t;n=e})),n}},{key:"isValid",value:function(t,e){return this.validate(t,e).then((function(){return!0}),(function(t){if(L.isError(t))return!1;throw t}))}},{key:"isValidSync",value:function(t,e){try{return this.validateSync(t,e),!0}catch(n){if(L.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(){var t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this):c(t)}},{key:"getDefault",value:function(t){return this.resolve(t||{})._getDefault()}},{key:"default",value:function(t){if(0===arguments.length)return this._getDefault();var e=this.clone({default:t});return e}},{key:"strict",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.clone();return e.spec.strict=t,e}},{key:"_isPresent",value:function(t){return null!=t}},{key:"defined",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.defined;return this.test({message:t,name:"defined",exclusive:!0,test:function(t){return void 0!==t}})}},{key:"required",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.required;return this.clone({presence:"required"}).withMutation((function(e){return e.test({message:t,name:"required",exclusive:!0,test:function(t){return this.schema._isPresent(t)}})}))}},{key:"notRequired",value:function(){var t=this.clone({presence:"optional"});return t.tests=t.tests.filter((function(t){return"required"!==t.OPTIONS.name})),t}},{key:"nullable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.clone({nullable:!1!==t});return e}},{key:"transform",value:function(t){var e=this.clone();return e.transforms.push(t),e}},{key:"test",value:function(){var t;if(void 0===(t=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(t.message=m.default),"function"!==typeof t.test)throw new TypeError("`test` is a required parameters");var e=this.clone(),n=G(t),r=t.exclusive||t.name&&!0===e.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(e.exclusiveTests[t.name]=!!t.exclusive),e.tests=e.tests.filter((function(e){if(e.OPTIONS.name===t.name){if(r)return!1;if(e.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),e.tests.push(n),e}},{key:"when",value:function(t,e){Array.isArray(t)||"string"===typeof t||(e=t,t=".");var n=this.clone(),r=N(t).map((function(t){return new z(t)}));return r.forEach((function(t){t.isSibling&&n.deps.push(t.key)})),n.conditions.push(new A(r,e)),n}},{key:"typeError",value:function(t){var e=this.clone();return e._typeError=G({message:t,name:"typeError",test:function(t){return!(void 0!==t&&!this.schema.isType(t))||this.createError({params:{type:this.schema._type}})}}),e}},{key:"oneOf",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.oneOf,n=this.clone();return t.forEach((function(t){n._whitelist.add(t),n._blacklist.delete(t)})),n._whitelistError=G({message:e,name:"oneOf",test:function(t){if(void 0===t)return!0;var e=this.schema._whitelist,n=e.resolveAll(this.resolve);return!!n.includes(t)||this.createError({params:{values:e.toArray().join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.notOneOf,n=this.clone();return t.forEach((function(t){n._blacklist.add(t),n._whitelist.delete(t)})),n._blacklistError=G({message:e,name:"notOneOf",test:function(t){var e=this.schema._blacklist,n=e.resolveAll(this.resolve);return!n.includes(t)||this.createError({params:{values:e.toArray().join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.clone();return e.spec.strip=t,e}},{key:"describe",value:function(){var t=this.clone(),e=t.spec,n=e.label;return{meta:e.meta,label:n,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(t){return{name:t.OPTIONS.name,params:t.OPTIONS.params}})).filter((function(t,e,n){return n.findIndex((function(e){return e.name===t.name}))===e}))}}}]),t}();J.prototype.__isYupSchema__=!0;for(var tt=function(){var t=nt[et];J.prototype["".concat(t,"At")]=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=$(this,e,n,r.context),a=i.parent,o=i.parentPath,u=i.schema;return u[t](a&&a[o],Y({},r,{parent:a,path:e}))}},et=0,nt=["validate","validateSync"];et<nt.length;et++)tt();for(var rt=0,it=["equals","is"];rt<it.length;rt++){var at=it[rt];J.prototype[at]=J.prototype.oneOf}for(var ot=0,ut=["not","nope"];ot<ut.length;ot++){var st=ut[ot];J.prototype[st]=J.prototype.notOneOf}J.prototype.optional=J.prototype.notRequired;var ct=J;ct.prototype;var lt=function(t){return null==t};var ft=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(){var t;return(0,o.Z)(this,n),(t=e.call(this,{type:"boolean"})).withMutation((function(){t.transform((function(t){if(!this.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t}))})),t}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return t instanceof Boolean&&(t=t.valueOf()),"boolean"===typeof t}},{key:"isTrue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.isValue;return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test:function(t){return lt(t)||!0===t}})}},{key:"isFalse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.isValue;return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test:function(t){return lt(t)||!1===t}})}}]),n}(J);ft.prototype;var ht=n(1752),vt=n(1120),dt=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,pt=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,yt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gt=function(t){return lt(t)||t===t.trim()},mt={}.toString();function kt(){return new bt}var bt=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(){var t;return(0,o.Z)(this,n),(t=e.call(this,{type:"string"})).withMutation((function(){t.transform((function(t){if(this.isType(t))return t;if(Array.isArray(t))return t;var e=null!=t&&t.toString?t.toString():t;return e===mt?t:e}))})),t}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return t instanceof String&&(t=t.valueOf()),"string"===typeof t}},{key:"_isPresent",value:function(t){return(0,ht.Z)((0,vt.Z)(n.prototype),"_isPresent",this).call(this,t)&&!!t.length}},{key:"length",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.length;return this.test({message:e,name:"length",exclusive:!0,params:{length:t},test:function(e){return lt(e)||e.length===this.resolve(t)}})}},{key:"min",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.min;return this.test({message:e,name:"min",exclusive:!0,params:{min:t},test:function(e){return lt(e)||e.length>=this.resolve(t)}})}},{key:"max",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.max;return this.test({name:"max",exclusive:!0,message:e,params:{max:t},test:function(e){return lt(e)||e.length<=this.resolve(t)}})}},{key:"matches",value:function(t,e){var n,r,i=!1;if(e)if("object"===typeof e){var a=e.excludeEmptyString;i=void 0!==a&&a,n=e.message,r=e.name}else n=e;return this.test({name:r||"matches",message:n||k.matches,params:{regex:t},test:function(e){return lt(e)||""===e&&i||-1!==e.search(t)}})}},{key:"email",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.email;return this.matches(dt,{name:"email",message:t,excludeEmptyString:!0})}},{key:"url",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.url;return this.matches(pt,{name:"url",message:t,excludeEmptyString:!0})}},{key:"uuid",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.uuid;return this.matches(yt,{name:"uuid",message:t,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(t){return null===t?"":t}))}},{key:"trim",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.trim;return this.transform((function(t){return null!=t?t.trim():t})).test({message:t,name:"trim",test:gt})}},{key:"lowercase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.lowercase;return this.transform((function(t){return lt(t)?t:t.toLowerCase()})).test({message:t,name:"string_case",exclusive:!0,test:function(t){return lt(t)||t===t.toLowerCase()}})}},{key:"uppercase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.uppercase;return this.transform((function(t){return lt(t)?t:t.toUpperCase()})).test({message:t,name:"string_case",exclusive:!0,test:function(t){return lt(t)||t===t.toUpperCase()}})}}]),n}(J);kt.prototype=bt.prototype;var wt=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(){var t;return(0,o.Z)(this,n),(t=e.call(this,{type:"number"})).withMutation((function(){t.transform((function(t){var e=t;if("string"===typeof e){if(""===(e=e.replace(/\s/g,"")))return NaN;e=+e}return this.isType(e)?e:parseFloat(e)}))})),t}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&!function(t){return t!=+t}(t)}},{key:"min",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.min;return this.test({message:e,name:"min",exclusive:!0,params:{min:t},test:function(e){return lt(e)||e>=this.resolve(t)}})}},{key:"max",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.max;return this.test({message:e,name:"max",exclusive:!0,params:{max:t},test:function(e){return lt(e)||e<=this.resolve(t)}})}},{key:"lessThan",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.lessThan;return this.test({message:e,name:"max",exclusive:!0,params:{less:t},test:function(e){return lt(e)||e<this.resolve(t)}})}},{key:"moreThan",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.moreThan;return this.test({message:e,name:"min",exclusive:!0,params:{more:t},test:function(e){return lt(e)||e>this.resolve(t)}})}},{key:"positive",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.positive;return this.moreThan(0,t)}},{key:"negative",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.negative;return this.lessThan(0,t)}},{key:"integer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.integer;return this.test({name:"integer",message:t,test:function(t){return lt(t)||Number.isInteger(t)}})}},{key:"truncate",value:function(){return this.transform((function(t){return lt(t)?t:0|t}))}},{key:"round",value:function(t){var e,n=["ceil","floor","round","trunc"];if("trunc"===(t=(null==(e=t)?void 0:e.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(t.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(e){return lt(e)?e:Math[t](e)}))}}]),n}(J);wt.prototype;var Et=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var xt=new Date("");function _t(){return new Tt}var Tt=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(){var t;return(0,o.Z)(this,n),(t=e.call(this,{type:"date"})).withMutation((function(){t.transform((function(t){return this.isType(t)?t:(t=function(t){var e,n,r=[1,4,5,6,7,10,11],i=0;if(n=Et.exec(t)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),e=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):e=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else e=Date.parse?Date.parse(t):NaN;return e}(t),isNaN(t)?xt:new Date(t))}))})),t}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return e=t,"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(t.getTime());var e}},{key:"prepareParam",value:function(t,e){var n;if(z.isRef(t))n=t;else{var r=this.cast(t);if(!this._typeCheck(r))throw new TypeError("`".concat(e,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.min,n=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},test:function(t){return lt(t)||t>=this.resolve(n)}})}},{key:"max",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.max,n=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},test:function(t){return lt(t)||t<=this.resolve(n)}})}}]),n}(J);Tt.INVALID_DATE=xt,_t.prototype=Tt.prototype,_t.INVALID_DATE=xt;var St=n(7499),It=n.n(St),Zt=n(567),At=n.n(Zt),Ct=n(9029),Dt=n.n(Ct),Ot=n(6514),Ft=n.n(Ot);function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(e.map((function(t){var e=(0,W.Z)(t,2),n=e[0],r=e[1];return"".concat(n,"-").concat(r)})));function a(t,e){var a=(0,U.split)(t)[0];r.add(a),i.has("".concat(e,"-").concat(a))||n.push([e,a])}var o=function(e){if(S()(t,e)){var n=t[e];r.add(e),z.isRef(n)&&n.isSibling?a(n.path,e):I(n)&&"deps"in n&&n.deps.forEach((function(t){return a(t,e)}))}};for(var u in t)o(u);return Ft().array(Array.from(r),n).reverse()}function Rt(t,e){var n=1/0;return t.some((function(t,r){var i;if(-1!==(null==(i=e.path)?void 0:i.indexOf(t)))return n=r,!0})),n}function jt(t){return function(e,n){return Rt(t,e)-Rt(t,n)}}function Lt(){return Lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lt.apply(this,arguments)}var Mt=function(t){return"[object Object]"===Object.prototype.toString.call(t)};function Pt(t,e){var n=Object.keys(t.fields);return Object.keys(e).filter((function(t){return-1===n.indexOf(t)}))}var Vt=jt([]),Ut=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,{type:"object"})).fields=Object.create(null),r._sortErrors=Vt,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){r.transform((function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){t=null}return this.isType(t)?t:null})),t&&r.shape(t)})),r}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return Mt(t)||"function"===typeof t}},{key:"_cast",value:function(t){var e,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,ht.Z)((0,vt.Z)(n.prototype),"_cast",this).call(this,t,i);if(void 0===a)return this.getDefault();if(!this._typeCheck(a))return a;var o,u=this.fields,s=null!=(e=i.stripUnknown)?e:this.spec.noUnknown,c=this._nodes.concat(Object.keys(a).filter((function(t){return-1===r._nodes.indexOf(t)}))),l={},f=Lt({},i,{parent:l,__validating:i.__validating||!1}),h=!1,v=(0,Q.Z)(c);try{for(v.s();!(o=v.n()).done;){var d=o.value,p=u[d],y=S()(a,d);if(p){var g=void 0,m=a[d];f.path=(i.path?"".concat(i.path,"."):"")+d;var k="spec"in(p=p.resolve({value:m,context:i.context,parent:l}))?p.spec:void 0,b=null==k?void 0:k.strict;if(null==k?void 0:k.strip){h=h||d in a;continue}void 0!==(g=i.__validating&&b?a[d]:p.cast(a[d],f))&&(l[d]=g)}else y&&!s&&(l[d]=a[d]);l[d]!==a[d]&&(h=!0)}}catch(w){v.e(w)}finally{v.f()}return h?l:a}},{key:"_validate",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=[],u=r.sync,s=r.from,c=void 0===s?[]:s,l=r.originalValue,f=void 0===l?t:l,h=r.abortEarly,v=void 0===h?this.spec.abortEarly:h,d=r.recursive,p=void 0===d?this.spec.recursive:d;c=[{schema:this,value:f}].concat((0,a.Z)(c)),r.__validating=!0,r.originalValue=f,r.from=c,(0,ht.Z)((0,vt.Z)(n.prototype),"_validate",this).call(this,t,r,(function(t,n){if(t){if(!L.isError(t)||v)return void i(t,n);o.push(t)}if(p&&Mt(n)){f=f||n;var a=e._nodes.map((function(t){return function(i,a){var o=-1===t.indexOf(".")?(r.path?"".concat(r.path,"."):"")+t:"".concat(r.path||"",'["').concat(t,'"]'),u=e.fields[t];u&&"validate"in u?u.validate(n[t],Lt({},r,{path:o,from:c,strict:!0,parent:n,originalValue:f[t]}),a):a(null)}}));M({sync:u,tests:a,value:n,errors:o,endEarly:v,sort:e._sortErrors,path:r.path},i)}else i(o[0]||null,n)}))}},{key:"clone",value:function(t){var e=(0,ht.Z)((0,vt.Z)(n.prototype),"clone",this).call(this,t);return e.fields=Lt({},this.fields),e._nodes=this._nodes,e._excludedEdges=this._excludedEdges,e._sortErrors=this._sortErrors,e}},{key:"concat",value:function(t){for(var e=this,r=(0,ht.Z)((0,vt.Z)(n.prototype),"concat",this).call(this,t),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var u=(0,W.Z)(o[a],2),s=u[0],c=u[1],l=i[s];void 0===l?i[s]=c:l instanceof J&&c instanceof J&&(i[s]=c.concat(l))}return r.withMutation((function(){return r.shape(i,e._excludedEdges)}))}},{key:"getDefaultFromShape",value:function(){var t=this,e={};return this._nodes.forEach((function(n){var r=t.fields[n];e[n]="default"in r?r.getDefault():void 0})),e}},{key:"_getDefault",value:function(){return"default"in this.spec?(0,ht.Z)((0,vt.Z)(n.prototype),"_getDefault",this).call(this):this._nodes.length?this.getDefaultFromShape():void 0}},{key:"shape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.clone(),r=Object.assign(n.fields,t);return n.fields=r,n._sortErrors=jt(Object.keys(r)),e.length&&(Array.isArray(e[0])||(e=[e]),n._excludedEdges=[].concat((0,a.Z)(n._excludedEdges),(0,a.Z)(e))),n._nodes=Nt(r,n._excludedEdges),n}},{key:"pick",value:function(t){var e,n={},r=(0,Q.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.clone().withMutation((function(t){return t.fields={},t.shape(n)}))}},{key:"omit",value:function(t){var e=this.clone(),n=e.fields;e.fields={};var r,i=(0,Q.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete n[a]}}catch(o){i.e(o)}finally{i.f()}return e.withMutation((function(){return e.shape(n)}))}},{key:"from",value:function(t,e,n){var r=(0,U.getter)(t,!0);return this.transform((function(i){if(null==i)return i;var a=i;return S()(i,t)&&(a=Lt({},i),n||delete a[t],a[e]=r(i)),a}))}},{key:"noUnknown",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.noUnknown;"string"===typeof t&&(e=t,t=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:e,test:function(e){if(null==e)return!0;var n=Pt(this.schema,e);return!t||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=t,n}},{key:"unknown",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.noUnknown;return this.noUnknown(!t,e)}},{key:"transformKeys",value:function(t){return this.transform((function(e){return e&&Dt()(e,(function(e,n){return t(n)}))}))}},{key:"camelCase",value:function(){return this.transformKeys(At())}},{key:"snakeCase",value:function(){return this.transformKeys(It())}},{key:"constantCase",value:function(){return this.transformKeys((function(t){return It()(t).toUpperCase()}))}},{key:"describe",value:function(){var t=(0,ht.Z)((0,vt.Z)(n.prototype),"describe",this).call(this);return t.fields=V()(this.fields,(function(t){return t.describe()})),t}}]),n}(J);function Bt(t){return new Ut(t)}function qt(){return qt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qt.apply(this,arguments)}Bt.prototype=Ut.prototype;var zt=function(t){(0,D.Z)(n,t);var e=(0,O.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,{type:"array"})).innerType=void 0,r.innerType=t,r.withMutation((function(){r.transform((function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){t=null}return this.isType(t)?t:null}))})),r}return(0,u.Z)(n,[{key:"_typeCheck",value:function(t){return Array.isArray(t)}},{key:"_subType",get:function(){return this.innerType}},{key:"_cast",value:function(t,e){var r=this,i=(0,ht.Z)((0,vt.Z)(n.prototype),"_cast",this).call(this,t,e);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(t,n){var i=r.innerType.cast(t,qt({},e,{path:"".concat(e.path||"","[").concat(n,"]")}));return i!==t&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(t){var e,r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,u=[],s=a.sync,c=a.path,l=this.innerType,f=null!=(e=a.abortEarly)?e:this.spec.abortEarly,h=null!=(r=a.recursive)?r:this.spec.recursive,v=null!=a.originalValue?a.originalValue:t;(0,ht.Z)((0,vt.Z)(n.prototype),"_validate",this).call(this,t,a,(function(t,e){if(t){if(!L.isError(t)||f)return void o(t,e);u.push(t)}if(h&&l&&i._typeCheck(e)){v=v||e;for(var n=new Array(e.length),r=function(t){var r=e[t],i="".concat(a.path||"","[").concat(t,"]"),o=qt({},a,{path:i,strict:!0,parent:e,index:t,originalValue:v[t]});n[t]=function(t,e){return l.validate(r,o,e)}},d=0;d<e.length;d++)r(d);M({sync:s,path:c,value:e,errors:u,endEarly:f,tests:n},o)}else o(u[0]||null,e)}))}},{key:"clone",value:function(t){var e=(0,ht.Z)((0,vt.Z)(n.prototype),"clone",this).call(this,t);return e.innerType=this.innerType,e}},{key:"concat",value:function(t){var e=(0,ht.Z)((0,vt.Z)(n.prototype),"concat",this).call(this,t);return e.innerType=this.innerType,t.innerType&&(e.innerType=e.innerType?e.innerType.concat(t.innerType):t.innerType),e}},{key:"of",value:function(t){var e=this.clone();if(!I(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+g(t));return e.innerType=t,e}},{key:"length",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.length;return this.test({message:e,name:"length",exclusive:!0,params:{length:t},test:function(e){return lt(e)||e.length===this.resolve(t)}})}},{key:"min",value:function(t,e){return e=e||_.min,this.test({message:e,name:"min",exclusive:!0,params:{min:t},test:function(e){return lt(e)||e.length>=this.resolve(t)}})}},{key:"max",value:function(t,e){return e=e||_.max,this.test({message:e,name:"max",exclusive:!0,params:{max:t},test:function(e){return lt(e)||e.length<=this.resolve(t)}})}},{key:"ensure",value:function(){var t=this;return this.default((function(){return[]})).transform((function(e,n){return t._typeCheck(e)?e:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(t){var e=t?function(e,n,r){return!t(e,n,r)}:function(t){return!!t};return this.transform((function(t){return null!=t?t.filter(e):t}))}},{key:"describe",value:function(){var t=(0,ht.Z)((0,vt.Z)(n.prototype),"describe",this).call(this);return this.innerType&&(t.innerType=this.innerType.describe()),t}},{key:"nullable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,ht.Z)((0,vt.Z)(n.prototype),"nullable",this).call(this,t)}},{key:"defined",value:function(){return(0,ht.Z)((0,vt.Z)(n.prototype),"defined",this).call(this)}},{key:"required",value:function(t){return(0,ht.Z)((0,vt.Z)(n.prototype),"required",this).call(this,t)}}]),n}(J);zt.prototype},5861:function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var u=t[a](o),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function u(t){r(o,i,a,u,s,"next",t)}function s(t){r(o,i,a,u,s,"throw",t)}u(void 0)}))}}n.d(e,{Z:function(){return i}})},7762:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(181);function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},1752:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(1120);function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=i(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},a.apply(this,arguments)}},4165:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(C){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),u=new I(r||[]);return a(o,"_invoke",{value:x(t,n,u)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=f;var v={};function d(){}function p(){}function y(){}var g={};l(g,u,(function(){return this}));var m=Object.getPrototypeOf,k=m&&m(m(Z([])));k&&k!==e&&n.call(k,u)&&(g=k);var b=y.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function i(a,o,u,s){var c=h(t[a],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):e.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return i("throw",t,u,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function Z(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=Z,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:Z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},t}},9474:function(t,e,n){"use strict";n.d(e,{Jn:function(){return C},KN:function(){return F},Mq:function(){return O},Xd:function(){return T},ZF:function(){return D},qX:function(){return S}});var r,i,a=n(2982),o=n(4165),u=n(5861),s=n(7762),c=n(4942),l=n(5671),f=n(3144),h=n(3258),v=n(6781),d=n(5854),p=n(9073),y=function(){function t(e){(0,l.Z)(this,t),this.container=e}return(0,f.Z)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")}}]),t}();var g="@firebase/app",m="0.8.4",k=new v.Yd("@firebase/app"),b="[DEFAULT]",w=(r={},(0,c.Z)(r,g,"fire-core"),(0,c.Z)(r,"@firebase/app-compat","fire-core-compat"),(0,c.Z)(r,"@firebase/analytics","fire-analytics"),(0,c.Z)(r,"@firebase/analytics-compat","fire-analytics-compat"),(0,c.Z)(r,"@firebase/app-check","fire-app-check"),(0,c.Z)(r,"@firebase/app-check-compat","fire-app-check-compat"),(0,c.Z)(r,"@firebase/auth","fire-auth"),(0,c.Z)(r,"@firebase/auth-compat","fire-auth-compat"),(0,c.Z)(r,"@firebase/database","fire-rtdb"),(0,c.Z)(r,"@firebase/database-compat","fire-rtdb-compat"),(0,c.Z)(r,"@firebase/functions","fire-fn"),(0,c.Z)(r,"@firebase/functions-compat","fire-fn-compat"),(0,c.Z)(r,"@firebase/installations","fire-iid"),(0,c.Z)(r,"@firebase/installations-compat","fire-iid-compat"),(0,c.Z)(r,"@firebase/messaging","fire-fcm"),(0,c.Z)(r,"@firebase/messaging-compat","fire-fcm-compat"),(0,c.Z)(r,"@firebase/performance","fire-perf"),(0,c.Z)(r,"@firebase/performance-compat","fire-perf-compat"),(0,c.Z)(r,"@firebase/remote-config","fire-rc"),(0,c.Z)(r,"@firebase/remote-config-compat","fire-rc-compat"),(0,c.Z)(r,"@firebase/storage","fire-gcs"),(0,c.Z)(r,"@firebase/storage-compat","fire-gcs-compat"),(0,c.Z)(r,"@firebase/firestore","fire-fst"),(0,c.Z)(r,"@firebase/firestore-compat","fire-fst-compat"),(0,c.Z)(r,"fire-js","fire-js"),(0,c.Z)(r,"firebase","fire-js-all"),r),E=new Map,x=new Map;function _(t,e){try{t.container.addComponent(e)}catch(n){k.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function T(t){var e=t.name;if(x.has(e))return k.debug("There were multiple attempts to register component ".concat(e,".")),!1;x.set(e,t);var n,r=(0,s.Z)(E.values());try{for(r.s();!(n=r.n()).done;){_(n.value,t)}}catch(i){r.e(i)}finally{r.f()}return!0}function S(t,e){var n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var I=(i={},(0,c.Z)(i,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,c.Z)(i,"bad-app-name","Illegal App name: '{$appName}"),(0,c.Z)(i,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,c.Z)(i,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,c.Z)(i,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,c.Z)(i,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,c.Z)(i,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,c.Z)(i,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(i,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(i,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(i,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),i),Z=new d.LL("app","Firebase",I),A=function(){function t(e,n,r){var i=this;(0,l.Z)(this,t),this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new h.wA("app",(function(){return i}),"PUBLIC"))}return(0,f.Z)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Z.create("app-deleted",{appName:this._name})}}]),t}(),C="9.14.0";function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){var r=e;e={name:r}}var i=Object.assign({name:b,automaticDataCollectionEnabled:!1},e),a=i.name;if("string"!==typeof a||!a)throw Z.create("bad-app-name",{appName:String(a)});if(n||(n=(0,d.aH)()),!n)throw Z.create("no-options");var o=E.get(a);if(o){if((0,d.vZ)(n,o.options)&&(0,d.vZ)(i,o.config))return o;throw Z.create("duplicate-app",{appName:a})}var u,c=new h.H0(a),l=(0,s.Z)(x.values());try{for(l.s();!(u=l.n()).done;){var f=u.value;c.addComponent(f)}}catch(p){l.e(p)}finally{l.f()}var v=new A(n,i,c);return E.set(a,v),v}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=E.get(t);if(!e&&t===b)return D();if(!e)throw Z.create("no-app",{appName:t});return e}function F(t,e,n){var r,i=null!==(r=w[t])&&void 0!==r?r:t;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void k.warn(u.join(" "))}T(new h.wA("".concat(i,"-version"),(function(){return{library:i,version:e}}),"VERSION"))}var N="firebase-heartbeat-store",R=null;function j(){return R||(R=(0,p.X3)("firebase-heartbeat-database",1,{upgrade:function(t,e){if(0===e)t.createObjectStore(N)}}).catch((function(t){throw Z.create("idb-open",{originalErrorMessage:t.message})}))),R}function L(t){return M.apply(this,arguments)}function M(){return(M=(0,u.Z)((0,o.Z)().mark((function t(e){var n,r,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j();case 3:return r=t.sent,t.abrupt("return",r.transaction(N).objectStore(N).get(U(e)));case 7:t.prev=7,t.t0=t.catch(0),t.t0 instanceof d.ZR?k.warn(t.t0.message):(i=Z.create("idb-get",{originalErrorMessage:null===(n=t.t0)||void 0===n?void 0:n.message}),k.warn(i.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function P(t,e){return V.apply(this,arguments)}function V(){return(V=(0,u.Z)((0,o.Z)().mark((function t(e,n){var r,i,a,u,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j();case 3:return i=t.sent,a=i.transaction(N,"readwrite"),u=a.objectStore(N),t.next=8,u.put(n,U(e));case 8:return t.abrupt("return",a.done);case 11:t.prev=11,t.t0=t.catch(0),t.t0 instanceof d.ZR?k.warn(t.t0.message):(s=Z.create("idb-set",{originalErrorMessage:null===(r=t.t0)||void 0===r?void 0:r.message}),k.warn(s.message));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function U(t){return"".concat(t.name,"!").concat(t.options.appId)}var B=function(){function t(e){var n=this;(0,l.Z)(this,t),this.container=e,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new G(r),this._heartbeatsCachePromise=this._storage.read().then((function(t){return n._heartbeatsCache=t,t}))}return(0,f.Z)(t,[{key:"triggerHeartbeat",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(){var e,n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.container.getProvider("platform-logger").getImmediate(),n=e.getPlatformInfoString(),r=q(),null!==this._heartbeatsCache){t.next=7;break}return t.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=t.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(t){return t.date===r}))){t.next=11;break}return t.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),t.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(){var e,n,r,i,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this._heartbeatsCache){t.next=3;break}return t.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){t.next=5;break}return t.abrupt("return","");case 5:if(e=q(),n=z(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=(0,d.L)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=e,!(i.length>0)){t.next=15;break}return this._heartbeatsCache.heartbeats=i,t.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:t.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();function q(){return(new Date).toISOString().substring(0,10)}function z(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=t.slice(),a=(0,s.Z)(t);try{var o=function(){var t=e.value,a=r.find((function(e){return e.agent===t.agent}));if(a){if(a.dates.push(t.date),H(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:t.agent,dates:[t.date]}),H(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(e=a.n()).done;){var u=o();if("break"===u)break}}catch(c){a.e(c)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var K,G=function(){function t(e){(0,l.Z)(this,t),this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,f.Z)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,d.hl)()){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",(0,d.eu)().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return",{heartbeats:[]});case 7:return t.next=9,L(this.app);case 9:return e=t.sent,t.abrupt("return",e||{heartbeats:[]});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"overwrite",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(e){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,this.read();case 9:return r=t.sent,t.abrupt("return",P(this.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,u.Z)((0,o.Z)().mark((function t(e){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,this.read();case 9:return r=t.sent,t.abrupt("return",P(this.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,a.Z)(r.heartbeats),(0,a.Z)(e.heartbeats))}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function H(t){return(0,d.L)(JSON.stringify({version:2,heartbeats:t})).length}K="",T(new h.wA("platform-logger",(function(t){return new y(t)}),"PRIVATE")),T(new h.wA("heartbeat",(function(t){return new B(t)}),"PRIVATE")),F(g,m,K),F(g,m,"esm2017"),F("fire-js","")},3258:function(t,e,n){"use strict";n.d(e,{H0:function(){return d},wA:function(){return f}});var r=n(4165),i=n(2982),a=n(5861),o=n(885),u=n(7762),s=n(5671),c=n(3144),l=n(5854),f=function(){function t(e,n,r){(0,s.Z)(this,t),this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,c.Z)(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),h="[DEFAULT]",v=function(){function t(e,n){(0,s.Z)(this,t),this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,c.Z)(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new l.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(l){}var e,n=(0,u.Z)(this.instancesDeferred.entries());try{for(n.s();!(e=n.n()).done;){var r=(0,o.Z)(e.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:s});a.resolve(c)}catch(l){}}}catch(f){n.e(f)}finally{n.f()}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()),t.next=3,Promise.all([].concat((0,i.Z)(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))),(0,i.Z)(e.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,n=void 0===e?{}:e,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=(0,u.Z)(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var c=(0,o.Z)(i.value,2),l=c[0],f=c[1],h=this.normalizeInstanceIdentifier(l);r===h&&f.resolve(a)}}catch(v){s.e(v)}finally{s.f()}return a}},{key:"onInit",value:function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&t(a,r),function(){i.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var n=this.onInitCallbacks.get(e);if(n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(t,e)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===h?void 0:e),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.component?this.component.multipleInstances?t:h:t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();var d=function(){function t(e){(0,s.Z)(this,t),this.name=e,this.providers=new Map}return(0,c.Z)(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new v(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}()},6781:function(t,e,n){"use strict";n.d(e,{Yd:function(){return v},in:function(){return i}});var r,i,a=n(5671),o=n(3144),u=n(4942),s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var c={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},l=i.INFO,f=(r={},(0,u.Z)(r,i.DEBUG,"log"),(0,u.Z)(r,i.VERBOSE,"log"),(0,u.Z)(r,i.INFO,"info"),(0,u.Z)(r,i.WARN,"warn"),(0,u.Z)(r,i.ERROR,"error"),r),h=function(t,e){if(!(e<t.logLevel)){var n=(new Date).toISOString(),r=f[e];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(t.name,":")].concat(o))}},v=function(){function t(e){(0,a.Z)(this,t),this.name=e,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,s.push(this)}return(0,o.Z)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"===typeof t?c[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(e)),this._logHandler.apply(this,[this,i.DEBUG].concat(e))}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(e)),this._logHandler.apply(this,[this,i.VERBOSE].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(e)),this._logHandler.apply(this,[this,i.INFO].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(e)),this._logHandler.apply(this,[this,i.WARN].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(e)),this._logHandler.apply(this,[this,i.ERROR].concat(e))}}]),t}()},9073:function(t,e,n){"use strict";n.d(e,{X3:function(){return m}});var r,i,a=n(1413),o=n(4165),u=n(5861);var s=new WeakMap,c=new WeakMap,l=new WeakMap,f=new WeakMap,h=new WeakMap;var v={get:function(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||l.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(t[e])},set:function(t,e,n){return t[e]=n,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function d(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(g(this),n),y(s.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(t.apply(g(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=t.call.apply(t,[g(this),e].concat(r));return l.set(a,e.sort?e.sort():[e]),y(a)}}function p(t){return"function"===typeof t?d(t):(t instanceof IDBTransaction&&function(t){if(!c.has(t)){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=function(){e(),r()},a=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)}));c.set(t,e)}}(t),e=t,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(t){return e instanceof t}))?new Proxy(t,v):t);var e}function y(t){if(t instanceof IDBRequest)return function(t){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(y(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}));return e.then((function(e){e instanceof IDBCursor&&s.set(e,t)})).catch((function(){})),h.set(e,t),e}(t);if(f.has(t))return f.get(t);var e=p(t);return e!==t&&(f.set(t,e),h.set(e,t)),e}var g=function(t){return h.get(t)};function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(t,e),s=y(u);return i&&u.addEventListener("upgradeneeded",(function(t){i(y(u.result),t.oldVersion,t.newVersion,y(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(t){o&&t.addEventListener("close",(function(){return o()})),a&&t.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}var k=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function E(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"===typeof e){if(w.get(e))return w.get(e);var n=e.replace(/FromIndex$/,""),r=e!==n,i=b.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||k.includes(n))){var a=function(){var t=(0,u.Z)((0,o.Z)().mark((function t(e){var a,u,s,c,l,f,h=arguments;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u=this.transaction(e,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),t.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();return w.set(e,a),a}}}v=function(t){return(0,a.Z)((0,a.Z)({},t),{},{get:function(e,n,r){return E(e,n)||t.get(e,n,r)},has:function(e,n){return!!E(e,n)||t.has(e,n)}})}(v)}}]);
//# sourceMappingURL=368.808aff18.chunk.js.map